{"ast":null,"code":"/**\r\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\nimport { LinkedList } from '../mol-data/generic';\n\nvar CommitQueue =\n/** @class */\nfunction () {\n  function CommitQueue() {\n    this.removeList = LinkedList();\n    this.removeMap = new Map();\n    this.addList = LinkedList();\n    this.addMap = new Map();\n  }\n\n  Object.defineProperty(CommitQueue.prototype, \"isEmpty\", {\n    get: function () {\n      return this.removeList.count === 0 && this.addList.count === 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CommitQueue.prototype.add = function (o) {\n    if (this.removeMap.has(o)) {\n      var a = this.removeMap.get(o);\n      this.removeMap.delete(o);\n      this.removeList.remove(a);\n    }\n\n    if (this.addMap.has(o)) return;\n    var b = this.addList.addLast(o);\n    this.addMap.set(o, b);\n  };\n\n  CommitQueue.prototype.remove = function (o) {\n    if (this.addMap.has(o)) {\n      var a = this.addMap.get(o);\n      this.addMap.delete(o);\n      this.addList.remove(a);\n    }\n\n    if (this.removeMap.has(o)) return;\n    var b = this.removeList.addLast(o);\n    this.removeMap.set(o, b);\n  };\n\n  CommitQueue.prototype.tryGetRemove = function () {\n    var o = this.removeList.removeFirst();\n    if (o) this.removeMap.delete(o);\n    return o;\n  };\n\n  CommitQueue.prototype.tryGetAdd = function () {\n    var o = this.addList.removeFirst();\n    if (o) this.addMap.delete(o);\n    return o;\n  };\n\n  return CommitQueue;\n}();\n\nexport { CommitQueue };","map":{"version":3,"sources":["../../src/mol-gl/commit-queue.ts"],"names":[],"mappings":"AAAA;;;;AAIG;AAEH,SAAS,UAAT,QAA2B,qBAA3B;;AAKA,IAAA,WAAA;AAAA;AAAA,YAAA;AAAA,WAAA,WAAA,GAAA;AACY,SAAA,UAAA,GAAa,UAAU,EAAvB;AACA,SAAA,SAAA,GAAY,IAAI,GAAJ,EAAZ;AACA,SAAA,OAAA,GAAU,UAAU,EAApB;AACA,SAAA,MAAA,GAAS,IAAI,GAAJ,EAAT;AAuCX;;AArCG,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,YAAA;AACI,aAAO,KAAK,UAAL,CAAgB,KAAhB,KAA0B,CAA1B,IAA+B,KAAK,OAAL,CAAa,KAAb,KAAuB,CAA7D;AACH,KAFU;qBAAA;;AAAA,GAAX;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,CAAJ,EAA2B;AACvB,QAAI,KAAK,SAAL,CAAe,GAAf,CAAmB,CAAnB,CAAJ,EAA2B;AACvB,UAAM,CAAC,GAAG,KAAK,SAAL,CAAe,GAAf,CAAmB,CAAnB,CAAV;AACA,WAAK,SAAL,CAAe,MAAf,CAAsB,CAAtB;AACA,WAAK,UAAL,CAAgB,MAAhB,CAAuB,CAAvB;AACH;;AACD,QAAI,KAAK,MAAL,CAAY,GAAZ,CAAgB,CAAhB,CAAJ,EAAwB;AACxB,QAAM,CAAC,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,CAArB,CAAV;AACA,SAAK,MAAL,CAAY,GAAZ,CAAgB,CAAhB,EAAmB,CAAnB;AACH,GATD;;AAWA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,CAAP,EAA8B;AAC1B,QAAI,KAAK,MAAL,CAAY,GAAZ,CAAgB,CAAhB,CAAJ,EAAwB;AACpB,UAAM,CAAC,GAAG,KAAK,MAAL,CAAY,GAAZ,CAAgB,CAAhB,CAAV;AACA,WAAK,MAAL,CAAY,MAAZ,CAAmB,CAAnB;AACA,WAAK,OAAL,CAAa,MAAb,CAAoB,CAApB;AACH;;AACD,QAAI,KAAK,SAAL,CAAe,GAAf,CAAmB,CAAnB,CAAJ,EAA2B;AAC3B,QAAM,CAAC,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,CAAxB,CAAV;AACA,SAAK,SAAL,CAAe,GAAf,CAAmB,CAAnB,EAAsB,CAAtB;AACH,GATD;;AAWA,EAAA,WAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,QAAM,CAAC,GAAG,KAAK,UAAL,CAAgB,WAAhB,EAAV;AACA,QAAI,CAAJ,EAAO,KAAK,SAAL,CAAe,MAAf,CAAsB,CAAtB;AACP,WAAO,CAAP;AACH,GAJD;;AAMA,EAAA,WAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA;AACI,QAAM,CAAC,GAAG,KAAK,OAAL,CAAa,WAAb,EAAV;AACA,QAAI,CAAJ,EAAO,KAAK,MAAL,CAAY,MAAZ,CAAmB,CAAnB;AACP,WAAO,CAAP;AACH,GAJD;;AAKJ,SAAA,WAAA;AAAC,CA3CD,EAAA","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nimport { LinkedList } from '../mol-data/generic';\r\nvar CommitQueue = /** @class */ (function () {\r\n    function CommitQueue() {\r\n        this.removeList = LinkedList();\r\n        this.removeMap = new Map();\r\n        this.addList = LinkedList();\r\n        this.addMap = new Map();\r\n    }\r\n    Object.defineProperty(CommitQueue.prototype, \"isEmpty\", {\r\n        get: function () {\r\n            return this.removeList.count === 0 && this.addList.count === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CommitQueue.prototype.add = function (o) {\r\n        if (this.removeMap.has(o)) {\r\n            var a = this.removeMap.get(o);\r\n            this.removeMap.delete(o);\r\n            this.removeList.remove(a);\r\n        }\r\n        if (this.addMap.has(o))\r\n            return;\r\n        var b = this.addList.addLast(o);\r\n        this.addMap.set(o, b);\r\n    };\r\n    CommitQueue.prototype.remove = function (o) {\r\n        if (this.addMap.has(o)) {\r\n            var a = this.addMap.get(o);\r\n            this.addMap.delete(o);\r\n            this.addList.remove(a);\r\n        }\r\n        if (this.removeMap.has(o))\r\n            return;\r\n        var b = this.removeList.addLast(o);\r\n        this.removeMap.set(o, b);\r\n    };\r\n    CommitQueue.prototype.tryGetRemove = function () {\r\n        var o = this.removeList.removeFirst();\r\n        if (o)\r\n            this.removeMap.delete(o);\r\n        return o;\r\n    };\r\n    CommitQueue.prototype.tryGetAdd = function () {\r\n        var o = this.addList.removeFirst();\r\n        if (o)\r\n            this.addMap.delete(o);\r\n        return o;\r\n    };\r\n    return CommitQueue;\r\n}());\r\nexport { CommitQueue };\r\n//# sourceMappingURL=commit-queue.js.map"]},"metadata":{},"sourceType":"module"}