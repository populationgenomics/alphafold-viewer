{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Canvas3DParams } from '../mol-canvas3d/canvas3d';\nimport { PluginCommands } from '../mol-plugin/commands';\nimport { StateTransform } from '../mol-state';\nimport { PluginUIComponent } from './base';\nimport { IconButton, SectionHeader } from './controls/common';\nimport { ParameterControls } from './controls/parameters';\nimport { StateObjectActions } from './state/actions';\nimport { RemoteStateSnapshots, StateSnapshots } from './state/snapshots';\nimport { StateTree } from './state/tree';\nimport { HelpContent } from './viewport/help';\nimport { HomeOutlinedSvg, AccountTreeOutlinedSvg, TuneSvg, HelpOutlineSvg, SaveOutlinedSvg, DeleteOutlinedSvg } from './controls/icons';\n\nvar LeftPanelControls =\n/** @class */\nfunction (_super) {\n  __extends(LeftPanelControls, _super);\n\n  function LeftPanelControls() {\n    var _a;\n\n    var _this = _super.apply(this, arguments) || this;\n\n    _this.state = {\n      tab: _this.plugin.behaviors.layout.leftPanelTabName.value\n    };\n\n    _this.set = function (tab) {\n      if (_this.state.tab === tab) {\n        _this.setState({\n          tab: 'none'\n        }, function () {\n          return _this.plugin.behaviors.layout.leftPanelTabName.next('none');\n        });\n\n        PluginCommands.Layout.Update(_this.plugin, {\n          state: {\n            regionState: __assign(__assign({}, _this.plugin.layout.state.regionState), {\n              left: 'collapsed'\n            })\n          }\n        });\n        return;\n      }\n\n      _this.setState({\n        tab: tab\n      }, function () {\n        return _this.plugin.behaviors.layout.leftPanelTabName.next(tab);\n      });\n\n      if (_this.plugin.layout.state.regionState.left !== 'full') {\n        PluginCommands.Layout.Update(_this.plugin, {\n          state: {\n            regionState: __assign(__assign({}, _this.plugin.layout.state.regionState), {\n              left: 'full'\n            })\n          }\n        });\n      }\n    };\n\n    _this.tabs = {\n      'none': _jsx(_Fragment, {}, void 0),\n      'root': _jsxs(_Fragment, {\n        children: [_jsx(SectionHeader, {\n          icon: HomeOutlinedSvg,\n          title: 'Home'\n        }, void 0), _jsx(StateObjectActions, {\n          state: _this.plugin.state.data,\n          nodeRef: StateTransform.RootRef,\n          hideHeader: true,\n          initiallyCollapsed: true,\n          alwaysExpandFirst: true\n        }, void 0), ((_a = _this.plugin.spec.components) === null || _a === void 0 ? void 0 : _a.remoteState) !== 'none' && _jsx(RemoteStateSnapshots, {\n          listOnly: true\n        }, void 0)]\n      }, void 0),\n      'data': _jsxs(_Fragment, {\n        children: [_jsx(SectionHeader, {\n          icon: AccountTreeOutlinedSvg,\n          title: _jsxs(_Fragment, {\n            children: [_jsx(RemoveAllButton, {}, void 0), \" State Tree\"]\n          }, void 0)\n        }, void 0), _jsx(StateTree, {\n          state: _this.plugin.state.data\n        }, void 0)]\n      }, void 0),\n      'states': _jsx(StateSnapshots, {}, void 0),\n      'settings': _jsxs(_Fragment, {\n        children: [_jsx(SectionHeader, {\n          icon: TuneSvg,\n          title: 'Plugin Settings'\n        }, void 0), _jsx(FullSettings, {}, void 0)]\n      }, void 0),\n      'help': _jsxs(_Fragment, {\n        children: [_jsx(SectionHeader, {\n          icon: HelpOutlineSvg,\n          title: 'Help'\n        }, void 0), _jsx(HelpContent, {}, void 0)]\n      }, void 0)\n    };\n    return _this;\n  }\n\n  LeftPanelControls.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.behaviors.layout.leftPanelTabName, function (tab) {\n      if (_this.state.tab !== tab) _this.setState({\n        tab: tab\n      });\n\n      if (tab === 'none' && _this.plugin.layout.state.regionState.left !== 'collapsed') {\n        PluginCommands.Layout.Update(_this.plugin, {\n          state: {\n            regionState: __assign(__assign({}, _this.plugin.layout.state.regionState), {\n              left: 'collapsed'\n            })\n          }\n        });\n      }\n    });\n    this.subscribe(this.plugin.state.data.events.changed, function (_a) {\n      var state = _a.state;\n      if (_this.state.tab !== 'data') return;\n      if (state.cells.size === 1) _this.set('root');\n    });\n  };\n\n  LeftPanelControls.prototype.render = function () {\n    var _this = this;\n\n    var tab = this.state.tab;\n    return _jsxs(\"div\", __assign({\n      className: 'msp-left-panel-controls'\n    }, {\n      children: [_jsxs(\"div\", __assign({\n        className: 'msp-left-panel-controls-buttons'\n      }, {\n        children: [_jsx(IconButton, {\n          svg: HomeOutlinedSvg,\n          toggleState: tab === 'root',\n          transparent: true,\n          onClick: function () {\n            return _this.set('root');\n          },\n          title: 'Home'\n        }, void 0), _jsx(DataIcon, {\n          set: this.set\n        }, void 0), _jsx(IconButton, {\n          svg: SaveOutlinedSvg,\n          toggleState: tab === 'states',\n          transparent: true,\n          onClick: function () {\n            return _this.set('states');\n          },\n          title: 'Plugin State'\n        }, void 0), _jsx(IconButton, {\n          svg: HelpOutlineSvg,\n          toggleState: tab === 'help',\n          transparent: true,\n          onClick: function () {\n            return _this.set('help');\n          },\n          title: 'Help'\n        }, void 0), _jsx(\"div\", __assign({\n          className: 'msp-left-panel-controls-buttons-bottom'\n        }, {\n          children: _jsx(IconButton, {\n            svg: TuneSvg,\n            toggleState: tab === 'settings',\n            transparent: true,\n            onClick: function () {\n              return _this.set('settings');\n            },\n            title: 'Settings'\n          }, void 0)\n        }), void 0)]\n      }), void 0), _jsx(\"div\", __assign({\n        className: 'msp-scrollable-container'\n      }, {\n        children: this.tabs[tab]\n      }), void 0)]\n    }), void 0);\n  };\n\n  return LeftPanelControls;\n}(PluginUIComponent);\n\nexport { LeftPanelControls };\n\nvar DataIcon =\n/** @class */\nfunction (_super) {\n  __extends(DataIcon, _super);\n\n  function DataIcon() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      changed: false\n    };\n    return _this;\n  }\n\n  Object.defineProperty(DataIcon.prototype, \"tab\", {\n    get: function () {\n      return this.plugin.behaviors.layout.leftPanelTabName.value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  DataIcon.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.behaviors.layout.leftPanelTabName, function (tab) {\n      if (_this.tab === 'data') _this.setState({\n        changed: false\n      });else _this.forceUpdate();\n    });\n    this.subscribe(this.plugin.state.data.events.changed, function (state) {\n      if (_this.tab !== 'data') _this.setState({\n        changed: true\n      });\n    });\n  };\n\n  DataIcon.prototype.render = function () {\n    var _this = this;\n\n    return _jsx(IconButton, {\n      svg: AccountTreeOutlinedSvg,\n      toggleState: this.tab === 'data',\n      transparent: true,\n      onClick: function () {\n        return _this.props.set('data');\n      },\n      title: 'State Tree',\n      style: {\n        position: 'relative'\n      },\n      extraContent: this.state.changed ? _jsx(\"div\", {\n        className: 'msp-left-panel-controls-button-data-dirty'\n      }, void 0) : void 0\n    }, void 0);\n  };\n\n  return DataIcon;\n}(PluginUIComponent);\n\nvar FullSettings =\n/** @class */\nfunction (_super) {\n  __extends(FullSettings, _super);\n\n  function FullSettings() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.setSettings = function (p) {\n      var _a;\n\n      PluginCommands.Canvas3D.SetSettings(_this.plugin, {\n        settings: (_a = {}, _a[p.name] = p.value, _a)\n      });\n    };\n\n    return _this;\n  }\n\n  FullSettings.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.events.canvas3d.settingsUpdated, function () {\n      return _this.forceUpdate();\n    });\n    this.subscribe(this.plugin.layout.events.updated, function () {\n      return _this.forceUpdate();\n    });\n    this.subscribe(this.plugin.canvas3d.camera.stateChanged, function (state) {\n      if (state.radiusMax !== undefined || state.radius !== undefined) {\n        _this.forceUpdate();\n      }\n    });\n  };\n\n  FullSettings.prototype.render = function () {\n    return _jsxs(_Fragment, {\n      children: [this.plugin.canvas3d && _jsxs(_Fragment, {\n        children: [_jsx(SectionHeader, {\n          title: 'Viewport'\n        }, void 0), _jsx(ParameterControls, {\n          params: Canvas3DParams,\n          values: this.plugin.canvas3d.props,\n          onChange: this.setSettings\n        }, void 0)]\n      }, void 0), _jsx(SectionHeader, {\n        title: 'Behavior'\n      }, void 0), _jsx(StateTree, {\n        state: this.plugin.state.behaviors\n      }, void 0)]\n    }, void 0);\n  };\n\n  return FullSettings;\n}(PluginUIComponent);\n\nvar RemoveAllButton =\n/** @class */\nfunction (_super) {\n  __extends(RemoveAllButton, _super);\n\n  function RemoveAllButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.remove = function (e) {\n      e.preventDefault();\n      PluginCommands.State.RemoveObject(_this.plugin, {\n        state: _this.plugin.state.data,\n        ref: StateTransform.RootRef\n      });\n    };\n\n    return _this;\n  }\n\n  RemoveAllButton.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.state.events.cell.created, function (e) {\n      if (e.cell.transform.parent === StateTransform.RootRef) _this.forceUpdate();\n    });\n    this.subscribe(this.plugin.state.events.cell.removed, function (e) {\n      if (e.parent === StateTransform.RootRef) _this.forceUpdate();\n    });\n  };\n\n  RemoveAllButton.prototype.render = function () {\n    var count = this.plugin.state.data.tree.children.get(StateTransform.RootRef).size;\n    if (count === 0) return null;\n    return _jsx(IconButton, {\n      svg: DeleteOutlinedSvg,\n      onClick: this.remove,\n      title: 'Remove All',\n      style: {\n        display: 'inline-block'\n      },\n      small: true,\n      className: 'msp-no-hover-outline',\n      transparent: true\n    }, void 0);\n  };\n\n  return RemoveAllButton;\n}(PluginUIComponent);","map":{"version":3,"sources":["../../src/mol-plugin-ui/left-panel.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { Canvas3DParams } from '../mol-canvas3d/canvas3d';\r\nimport { PluginCommands } from '../mol-plugin/commands';\r\nimport { StateTransform } from '../mol-state';\r\nimport { PluginUIComponent } from './base';\r\nimport { IconButton, SectionHeader } from './controls/common';\r\nimport { ParameterControls } from './controls/parameters';\r\nimport { StateObjectActions } from './state/actions';\r\nimport { RemoteStateSnapshots, StateSnapshots } from './state/snapshots';\r\nimport { StateTree } from './state/tree';\r\nimport { HelpContent } from './viewport/help';\r\nimport { HomeOutlinedSvg, AccountTreeOutlinedSvg, TuneSvg, HelpOutlineSvg, SaveOutlinedSvg, DeleteOutlinedSvg } from './controls/icons';\r\nvar LeftPanelControls = /** @class */ (function (_super) {\r\n    __extends(LeftPanelControls, _super);\r\n    function LeftPanelControls() {\r\n        var _a;\r\n        var _this = _super.apply(this, arguments) || this;\r\n        _this.state = { tab: _this.plugin.behaviors.layout.leftPanelTabName.value };\r\n        _this.set = function (tab) {\r\n            if (_this.state.tab === tab) {\r\n                _this.setState({ tab: 'none' }, function () { return _this.plugin.behaviors.layout.leftPanelTabName.next('none'); });\r\n                PluginCommands.Layout.Update(_this.plugin, { state: { regionState: __assign(__assign({}, _this.plugin.layout.state.regionState), { left: 'collapsed' }) } });\r\n                return;\r\n            }\r\n            _this.setState({ tab: tab }, function () { return _this.plugin.behaviors.layout.leftPanelTabName.next(tab); });\r\n            if (_this.plugin.layout.state.regionState.left !== 'full') {\r\n                PluginCommands.Layout.Update(_this.plugin, { state: { regionState: __assign(__assign({}, _this.plugin.layout.state.regionState), { left: 'full' }) } });\r\n            }\r\n        };\r\n        _this.tabs = {\r\n            'none': _jsx(_Fragment, {}, void 0),\r\n            'root': _jsxs(_Fragment, { children: [_jsx(SectionHeader, { icon: HomeOutlinedSvg, title: 'Home' }, void 0), _jsx(StateObjectActions, { state: _this.plugin.state.data, nodeRef: StateTransform.RootRef, hideHeader: true, initiallyCollapsed: true, alwaysExpandFirst: true }, void 0), ((_a = _this.plugin.spec.components) === null || _a === void 0 ? void 0 : _a.remoteState) !== 'none' && _jsx(RemoteStateSnapshots, { listOnly: true }, void 0)] }, void 0),\r\n            'data': _jsxs(_Fragment, { children: [_jsx(SectionHeader, { icon: AccountTreeOutlinedSvg, title: _jsxs(_Fragment, { children: [_jsx(RemoveAllButton, {}, void 0), \" State Tree\"] }, void 0) }, void 0), _jsx(StateTree, { state: _this.plugin.state.data }, void 0)] }, void 0),\r\n            'states': _jsx(StateSnapshots, {}, void 0),\r\n            'settings': _jsxs(_Fragment, { children: [_jsx(SectionHeader, { icon: TuneSvg, title: 'Plugin Settings' }, void 0), _jsx(FullSettings, {}, void 0)] }, void 0),\r\n            'help': _jsxs(_Fragment, { children: [_jsx(SectionHeader, { icon: HelpOutlineSvg, title: 'Help' }, void 0), _jsx(HelpContent, {}, void 0)] }, void 0)\r\n        };\r\n        return _this;\r\n    }\r\n    LeftPanelControls.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.behaviors.layout.leftPanelTabName, function (tab) {\r\n            if (_this.state.tab !== tab)\r\n                _this.setState({ tab: tab });\r\n            if (tab === 'none' && _this.plugin.layout.state.regionState.left !== 'collapsed') {\r\n                PluginCommands.Layout.Update(_this.plugin, { state: { regionState: __assign(__assign({}, _this.plugin.layout.state.regionState), { left: 'collapsed' }) } });\r\n            }\r\n        });\r\n        this.subscribe(this.plugin.state.data.events.changed, function (_a) {\r\n            var state = _a.state;\r\n            if (_this.state.tab !== 'data')\r\n                return;\r\n            if (state.cells.size === 1)\r\n                _this.set('root');\r\n        });\r\n    };\r\n    LeftPanelControls.prototype.render = function () {\r\n        var _this = this;\r\n        var tab = this.state.tab;\r\n        return _jsxs(\"div\", __assign({ className: 'msp-left-panel-controls' }, { children: [_jsxs(\"div\", __assign({ className: 'msp-left-panel-controls-buttons' }, { children: [_jsx(IconButton, { svg: HomeOutlinedSvg, toggleState: tab === 'root', transparent: true, onClick: function () { return _this.set('root'); }, title: 'Home' }, void 0), _jsx(DataIcon, { set: this.set }, void 0), _jsx(IconButton, { svg: SaveOutlinedSvg, toggleState: tab === 'states', transparent: true, onClick: function () { return _this.set('states'); }, title: 'Plugin State' }, void 0), _jsx(IconButton, { svg: HelpOutlineSvg, toggleState: tab === 'help', transparent: true, onClick: function () { return _this.set('help'); }, title: 'Help' }, void 0), _jsx(\"div\", __assign({ className: 'msp-left-panel-controls-buttons-bottom' }, { children: _jsx(IconButton, { svg: TuneSvg, toggleState: tab === 'settings', transparent: true, onClick: function () { return _this.set('settings'); }, title: 'Settings' }, void 0) }), void 0)] }), void 0), _jsx(\"div\", __assign({ className: 'msp-scrollable-container' }, { children: this.tabs[tab] }), void 0)] }), void 0);\r\n    };\r\n    return LeftPanelControls;\r\n}(PluginUIComponent));\r\nexport { LeftPanelControls };\r\nvar DataIcon = /** @class */ (function (_super) {\r\n    __extends(DataIcon, _super);\r\n    function DataIcon() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { changed: false };\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DataIcon.prototype, \"tab\", {\r\n        get: function () {\r\n            return this.plugin.behaviors.layout.leftPanelTabName.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    DataIcon.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.behaviors.layout.leftPanelTabName, function (tab) {\r\n            if (_this.tab === 'data')\r\n                _this.setState({ changed: false });\r\n            else\r\n                _this.forceUpdate();\r\n        });\r\n        this.subscribe(this.plugin.state.data.events.changed, function (state) {\r\n            if (_this.tab !== 'data')\r\n                _this.setState({ changed: true });\r\n        });\r\n    };\r\n    DataIcon.prototype.render = function () {\r\n        var _this = this;\r\n        return _jsx(IconButton, { svg: AccountTreeOutlinedSvg, toggleState: this.tab === 'data', transparent: true, onClick: function () { return _this.props.set('data'); }, title: 'State Tree', style: { position: 'relative' }, extraContent: this.state.changed ? _jsx(\"div\", { className: 'msp-left-panel-controls-button-data-dirty' }, void 0) : void 0 }, void 0);\r\n    };\r\n    return DataIcon;\r\n}(PluginUIComponent));\r\nvar FullSettings = /** @class */ (function (_super) {\r\n    __extends(FullSettings, _super);\r\n    function FullSettings() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.setSettings = function (p) {\r\n            var _a;\r\n            PluginCommands.Canvas3D.SetSettings(_this.plugin, { settings: (_a = {}, _a[p.name] = p.value, _a) });\r\n        };\r\n        return _this;\r\n    }\r\n    FullSettings.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.events.canvas3d.settingsUpdated, function () { return _this.forceUpdate(); });\r\n        this.subscribe(this.plugin.layout.events.updated, function () { return _this.forceUpdate(); });\r\n        this.subscribe(this.plugin.canvas3d.camera.stateChanged, function (state) {\r\n            if (state.radiusMax !== undefined || state.radius !== undefined) {\r\n                _this.forceUpdate();\r\n            }\r\n        });\r\n    };\r\n    FullSettings.prototype.render = function () {\r\n        return _jsxs(_Fragment, { children: [this.plugin.canvas3d && _jsxs(_Fragment, { children: [_jsx(SectionHeader, { title: 'Viewport' }, void 0), _jsx(ParameterControls, { params: Canvas3DParams, values: this.plugin.canvas3d.props, onChange: this.setSettings }, void 0)] }, void 0), _jsx(SectionHeader, { title: 'Behavior' }, void 0), _jsx(StateTree, { state: this.plugin.state.behaviors }, void 0)] }, void 0);\r\n    };\r\n    return FullSettings;\r\n}(PluginUIComponent));\r\nvar RemoveAllButton = /** @class */ (function (_super) {\r\n    __extends(RemoveAllButton, _super);\r\n    function RemoveAllButton() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.remove = function (e) {\r\n            e.preventDefault();\r\n            PluginCommands.State.RemoveObject(_this.plugin, { state: _this.plugin.state.data, ref: StateTransform.RootRef });\r\n        };\r\n        return _this;\r\n    }\r\n    RemoveAllButton.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.state.events.cell.created, function (e) {\r\n            if (e.cell.transform.parent === StateTransform.RootRef)\r\n                _this.forceUpdate();\r\n        });\r\n        this.subscribe(this.plugin.state.events.cell.removed, function (e) {\r\n            if (e.parent === StateTransform.RootRef)\r\n                _this.forceUpdate();\r\n        });\r\n    };\r\n    RemoveAllButton.prototype.render = function () {\r\n        var count = this.plugin.state.data.tree.children.get(StateTransform.RootRef).size;\r\n        if (count === 0)\r\n            return null;\r\n        return _jsx(IconButton, { svg: DeleteOutlinedSvg, onClick: this.remove, title: 'Remove All', style: { display: 'inline-block' }, small: true, className: 'msp-no-hover-outline', transparent: true }, void 0);\r\n    };\r\n    return RemoveAllButton;\r\n}(PluginUIComponent));\r\n//# sourceMappingURL=left-panel.js.map"]},"metadata":{},"sourceType":"module"}