{"ast":null,"code":"/**\r\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\nimport { __spreadArray } from \"tslib\";\n\nfunction createImmediateActions() {\n  var global = function () {\n    var _window = typeof window !== 'undefined' && window;\n\n    var _self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && self;\n\n    var _global = typeof global !== 'undefined' && global;\n\n    return _window || _global || _self;\n  }();\n\n  var tasksByHandle = {};\n  var doc = typeof document !== 'undefined' ? document : void 0;\n  var nextHandle = 1; // Spec says greater than zero\n\n  var registerImmediate;\n\n  function setImmediate(callback) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    } // Callback can either be a function or a string\n\n\n    if (typeof callback !== 'function') {\n      callback = new Function('' + callback);\n    } // Store and register the task\n\n\n    var task = {\n      callback: callback,\n      args: args\n    };\n    tasksByHandle[nextHandle] = task;\n    registerImmediate(nextHandle);\n    return nextHandle++;\n  }\n\n  function clearImmediate(handle) {\n    delete tasksByHandle[handle];\n  }\n\n  function run(task) {\n    var callback = task.callback;\n    var args = task.args;\n\n    switch (args.length) {\n      case 0:\n        callback();\n        break;\n\n      case 1:\n        callback(args[0]);\n        break;\n\n      case 2:\n        callback(args[0], args[1]);\n        break;\n\n      case 3:\n        callback(args[0], args[1], args[2]);\n        break;\n\n      default:\n        callback.apply(undefined, args);\n        break;\n    }\n  }\n\n  function runIfPresent(handle) {\n    var task = tasksByHandle[handle];\n    clearImmediate(handle);\n    run(task);\n  }\n\n  function installNextTickImplementation() {\n    registerImmediate = function (handle) {\n      process.nextTick(function () {\n        runIfPresent(handle);\n      });\n    };\n  }\n\n  function canUsePostMessage() {\n    if (global && global.postMessage && !global.importScripts) {\n      var postMessageIsAsynchronous_1 = true;\n      var oldOnMessage = global.onmessage;\n\n      global.onmessage = function () {\n        postMessageIsAsynchronous_1 = false;\n      };\n\n      global.postMessage('', '*');\n      global.onmessage = oldOnMessage;\n      return postMessageIsAsynchronous_1;\n    }\n  }\n\n  function installPostMessageImplementation() {\n    // Installs an event handler on `global` for the `message` event: see\n    // * https://developer.mozilla.org/en/DOM/window.postMessage\n    // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n    var messagePrefix = 'setImmediate$' + Math.random() + '$';\n\n    var onGlobalMessage = function (event) {\n      if (event.source === global && typeof event.data === 'string' && event.data.indexOf(messagePrefix) === 0) {\n        runIfPresent(+event.data.slice(messagePrefix.length));\n      }\n    };\n\n    if (window.addEventListener) {\n      window.addEventListener('message', onGlobalMessage, false);\n    } else {\n      window.attachEvent('onmessage', onGlobalMessage);\n    }\n\n    registerImmediate = function (handle) {\n      window.postMessage(messagePrefix + handle, '*');\n    };\n  }\n\n  function installMessageChannelImplementation() {\n    var channel = new MessageChannel();\n\n    channel.port1.onmessage = function (event) {\n      var handle = event.data;\n      runIfPresent(handle);\n    };\n\n    registerImmediate = function (handle) {\n      channel.port2.postMessage(handle);\n    };\n  }\n\n  function installReadyStateChangeImplementation() {\n    var html = doc.documentElement;\n\n    registerImmediate = function (handle) {\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var script = doc.createElement('script');\n\n      script.onreadystatechange = function () {\n        runIfPresent(handle);\n        script.onreadystatechange = null;\n        html.removeChild(script);\n        script = null;\n      };\n\n      html.appendChild(script);\n    };\n  }\n\n  function installSetTimeoutImplementation() {\n    registerImmediate = function (handle) {\n      setTimeout(runIfPresent, 0, handle);\n    };\n  } // Don't get fooled by e.g. browserify environments.\n\n\n  if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {\n    // For Node.js before 0.9\n    installNextTickImplementation();\n  } else if (canUsePostMessage()) {\n    // For non-IE10 modern browsers\n    installPostMessageImplementation();\n  } else if (typeof MessageChannel !== 'undefined') {\n    // For web workers, where supported\n    installMessageChannelImplementation();\n  } else if (doc && 'onreadystatechange' in doc.createElement('script')) {\n    // For IE 6–8\n    installReadyStateChangeImplementation();\n  } else {\n    // For older browsers\n    installSetTimeoutImplementation();\n  }\n\n  return {\n    setImmediate: setImmediate,\n    clearImmediate: clearImmediate\n  };\n}\n\nvar immediateActions = function () {\n  if (typeof setImmediate !== 'undefined') {\n    if (typeof window !== 'undefined') {\n      return {\n        setImmediate: function (handler) {\n          var _a;\n\n          var args = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n\n          return (_a = window).setImmediate.apply(_a, __spreadArray([handler], args, false));\n        },\n        clearImmediate: function (handle) {\n          return window.clearImmediate(handle);\n        }\n      };\n    } else {\n      return {\n        setImmediate: setImmediate,\n        clearImmediate: clearImmediate\n      };\n    }\n  }\n\n  return createImmediateActions();\n}();\n\nfunction resolveImmediate(res) {\n  immediateActions.setImmediate(res);\n}\n\nvar Scheduler = {\n  setImmediate: immediateActions.setImmediate,\n  clearImmediate: immediateActions.clearImmediate,\n  immediatePromise: function () {\n    return new Promise(resolveImmediate);\n  },\n  delay: function (timeout, value) {\n    if (value === void 0) {\n      value = void 0;\n    }\n\n    return new Promise(function (r) {\n      return setTimeout(r, timeout, value);\n    });\n  }\n};\nexport { Scheduler };","map":{"version":3,"sources":["../../../src/mol-task/util/scheduler.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nimport { __spreadArray } from \"tslib\";\r\nfunction createImmediateActions() {\r\n    var global = (function () {\r\n        var _window = typeof window !== 'undefined' && window;\r\n        var _self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && self;\r\n        var _global = typeof global !== 'undefined' && global;\r\n        return _window || _global || _self;\r\n    })();\r\n    var tasksByHandle = {};\r\n    var doc = typeof document !== 'undefined' ? document : void 0;\r\n    var nextHandle = 1; // Spec says greater than zero\r\n    var registerImmediate;\r\n    function setImmediate(callback) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        // Callback can either be a function or a string\r\n        if (typeof callback !== 'function') {\r\n            callback = new Function('' + callback);\r\n        }\r\n        // Store and register the task\r\n        var task = { callback: callback, args: args };\r\n        tasksByHandle[nextHandle] = task;\r\n        registerImmediate(nextHandle);\r\n        return nextHandle++;\r\n    }\r\n    function clearImmediate(handle) {\r\n        delete tasksByHandle[handle];\r\n    }\r\n    function run(task) {\r\n        var callback = task.callback;\r\n        var args = task.args;\r\n        switch (args.length) {\r\n            case 0:\r\n                callback();\r\n                break;\r\n            case 1:\r\n                callback(args[0]);\r\n                break;\r\n            case 2:\r\n                callback(args[0], args[1]);\r\n                break;\r\n            case 3:\r\n                callback(args[0], args[1], args[2]);\r\n                break;\r\n            default:\r\n                callback.apply(undefined, args);\r\n                break;\r\n        }\r\n    }\r\n    function runIfPresent(handle) {\r\n        var task = tasksByHandle[handle];\r\n        clearImmediate(handle);\r\n        run(task);\r\n    }\r\n    function installNextTickImplementation() {\r\n        registerImmediate = function (handle) {\r\n            process.nextTick(function () { runIfPresent(handle); });\r\n        };\r\n    }\r\n    function canUsePostMessage() {\r\n        if (global && global.postMessage && !global.importScripts) {\r\n            var postMessageIsAsynchronous_1 = true;\r\n            var oldOnMessage = global.onmessage;\r\n            global.onmessage = function () {\r\n                postMessageIsAsynchronous_1 = false;\r\n            };\r\n            global.postMessage('', '*');\r\n            global.onmessage = oldOnMessage;\r\n            return postMessageIsAsynchronous_1;\r\n        }\r\n    }\r\n    function installPostMessageImplementation() {\r\n        // Installs an event handler on `global` for the `message` event: see\r\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\r\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\r\n        var messagePrefix = 'setImmediate$' + Math.random() + '$';\r\n        var onGlobalMessage = function (event) {\r\n            if (event.source === global &&\r\n                typeof event.data === 'string' &&\r\n                event.data.indexOf(messagePrefix) === 0) {\r\n                runIfPresent(+event.data.slice(messagePrefix.length));\r\n            }\r\n        };\r\n        if (window.addEventListener) {\r\n            window.addEventListener('message', onGlobalMessage, false);\r\n        }\r\n        else {\r\n            window.attachEvent('onmessage', onGlobalMessage);\r\n        }\r\n        registerImmediate = function (handle) {\r\n            window.postMessage(messagePrefix + handle, '*');\r\n        };\r\n    }\r\n    function installMessageChannelImplementation() {\r\n        var channel = new MessageChannel();\r\n        channel.port1.onmessage = function (event) {\r\n            var handle = event.data;\r\n            runIfPresent(handle);\r\n        };\r\n        registerImmediate = function (handle) {\r\n            channel.port2.postMessage(handle);\r\n        };\r\n    }\r\n    function installReadyStateChangeImplementation() {\r\n        var html = doc.documentElement;\r\n        registerImmediate = function (handle) {\r\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\r\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\r\n            var script = doc.createElement('script');\r\n            script.onreadystatechange = function () {\r\n                runIfPresent(handle);\r\n                script.onreadystatechange = null;\r\n                html.removeChild(script);\r\n                script = null;\r\n            };\r\n            html.appendChild(script);\r\n        };\r\n    }\r\n    function installSetTimeoutImplementation() {\r\n        registerImmediate = function (handle) {\r\n            setTimeout(runIfPresent, 0, handle);\r\n        };\r\n    }\r\n    // Don't get fooled by e.g. browserify environments.\r\n    if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {\r\n        // For Node.js before 0.9\r\n        installNextTickImplementation();\r\n    }\r\n    else if (canUsePostMessage()) {\r\n        // For non-IE10 modern browsers\r\n        installPostMessageImplementation();\r\n    }\r\n    else if (typeof MessageChannel !== 'undefined') {\r\n        // For web workers, where supported\r\n        installMessageChannelImplementation();\r\n    }\r\n    else if (doc && 'onreadystatechange' in doc.createElement('script')) {\r\n        // For IE 6–8\r\n        installReadyStateChangeImplementation();\r\n    }\r\n    else {\r\n        // For older browsers\r\n        installSetTimeoutImplementation();\r\n    }\r\n    return {\r\n        setImmediate: setImmediate,\r\n        clearImmediate: clearImmediate\r\n    };\r\n}\r\nvar immediateActions = (function () {\r\n    if (typeof setImmediate !== 'undefined') {\r\n        if (typeof window !== 'undefined') {\r\n            return {\r\n                setImmediate: function (handler) {\r\n                    var _a;\r\n                    var args = [];\r\n                    for (var _i = 1; _i < arguments.length; _i++) {\r\n                        args[_i - 1] = arguments[_i];\r\n                    }\r\n                    return (_a = window).setImmediate.apply(_a, __spreadArray([handler], args, false));\r\n                },\r\n                clearImmediate: function (handle) { return window.clearImmediate(handle); }\r\n            };\r\n        }\r\n        else {\r\n            return { setImmediate: setImmediate, clearImmediate: clearImmediate };\r\n        }\r\n    }\r\n    return createImmediateActions();\r\n}());\r\nfunction resolveImmediate(res) {\r\n    immediateActions.setImmediate(res);\r\n}\r\nvar Scheduler = {\r\n    setImmediate: immediateActions.setImmediate,\r\n    clearImmediate: immediateActions.clearImmediate,\r\n    immediatePromise: function () { return new Promise(resolveImmediate); },\r\n    delay: function (timeout, value) {\r\n        if (value === void 0) { value = void 0; }\r\n        return new Promise(function (r) { return setTimeout(r, timeout, value); });\r\n    }\r\n};\r\nexport { Scheduler };\r\n//# sourceMappingURL=scheduler.js.map"]},"metadata":{},"sourceType":"module"}