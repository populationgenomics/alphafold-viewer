{"ast":null,"code":"/*\r\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\nimport { MSymbol, isSymbol } from './symbol';\nexport function symbol(args, type, description) {\n  return MSymbol('', args, type, description);\n}\nexport function normalizeTable(table) {\n  _normalizeTable('', '', table);\n}\nexport function symbolList(table) {\n  var list = [];\n\n  _symbolList(table, list);\n\n  return list;\n}\n\nfunction formatKey(key) {\n  var regex = /([a-z])([A-Z])([a-z]|$)/g; // do this twice because 'xXxX'\n\n  return key.replace(regex, function (s, a, b, c) {\n    return a + \"-\" + b.toLocaleLowerCase() + c;\n  }).replace(regex, function (s, a, b, c) {\n    return a + \"-\" + b.toLocaleLowerCase() + c;\n  });\n}\n\nfunction _normalizeTable(namespace, key, obj) {\n  if (isSymbol(obj)) {\n    obj.info.namespace = namespace;\n    obj.info.name = obj.info.name || formatKey(key);\n    obj.id = obj.info.namespace + \".\" + obj.info.name;\n    return;\n  }\n\n  var currentNs = \"\" + (obj['@namespace'] || formatKey(key));\n  var newNs = namespace ? namespace + \".\" + currentNs : currentNs;\n\n  for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n    var childKey = _a[_i];\n    if (typeof obj[childKey] !== 'object' && !isSymbol(obj[childKey])) continue;\n\n    _normalizeTable(newNs, childKey, obj[childKey]);\n  }\n}\n\nfunction _symbolList(obj, list) {\n  if (isSymbol(obj)) {\n    list.push(obj);\n    return;\n  }\n\n  for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n    var childKey = _a[_i];\n    if (typeof obj[childKey] !== 'object' && !isSymbol(obj[childKey])) continue;\n\n    _symbolList(obj[childKey], list);\n  }\n}","map":{"version":3,"sources":["../../../src/mol-script/language/helpers.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nimport { MSymbol, isSymbol } from './symbol';\r\nexport function symbol(args, type, description) {\r\n    return MSymbol('', args, type, description);\r\n}\r\nexport function normalizeTable(table) {\r\n    _normalizeTable('', '', table);\r\n}\r\nexport function symbolList(table) {\r\n    var list = [];\r\n    _symbolList(table, list);\r\n    return list;\r\n}\r\nfunction formatKey(key) {\r\n    var regex = /([a-z])([A-Z])([a-z]|$)/g;\r\n    // do this twice because 'xXxX'\r\n    return key.replace(regex, function (s, a, b, c) { return a + \"-\" + b.toLocaleLowerCase() + c; }).replace(regex, function (s, a, b, c) { return a + \"-\" + b.toLocaleLowerCase() + c; });\r\n}\r\nfunction _normalizeTable(namespace, key, obj) {\r\n    if (isSymbol(obj)) {\r\n        obj.info.namespace = namespace;\r\n        obj.info.name = obj.info.name || formatKey(key);\r\n        obj.id = obj.info.namespace + \".\" + obj.info.name;\r\n        return;\r\n    }\r\n    var currentNs = \"\" + (obj['@namespace'] || formatKey(key));\r\n    var newNs = namespace ? namespace + \".\" + currentNs : currentNs;\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var childKey = _a[_i];\r\n        if (typeof obj[childKey] !== 'object' && !isSymbol(obj[childKey]))\r\n            continue;\r\n        _normalizeTable(newNs, childKey, obj[childKey]);\r\n    }\r\n}\r\nfunction _symbolList(obj, list) {\r\n    if (isSymbol(obj)) {\r\n        list.push(obj);\r\n        return;\r\n    }\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var childKey = _a[_i];\r\n        if (typeof obj[childKey] !== 'object' && !isSymbol(obj[childKey]))\r\n            continue;\r\n        _symbolList(obj[childKey], list);\r\n    }\r\n}\r\n//# sourceMappingURL=helpers.js.map"]},"metadata":{},"sourceType":"module"}