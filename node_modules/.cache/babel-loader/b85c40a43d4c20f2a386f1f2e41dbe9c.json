{"ast":null,"code":"/**\r\n * Copyright (c) 2018-2019 Mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\nimport { MolScriptSymbolTable as MolScript } from '../../language/symbol-table';\nimport { DefaultQueryRuntimeTable, QuerySymbolRuntime, QueryRuntimeArguments } from './base';\nimport { Queries, StructureProperties, StructureElement, UnitRing } from '../../../mol-model/structure';\nimport { ElementSymbol, BondType } from '../../../mol-model/structure/model/types';\nimport { SetUtils } from '../../../mol-util/set';\nimport { upperCaseAny } from '../../../mol-util/string';\nimport { VdwRadius, AtomWeight, AtomNumber } from '../../../mol-model/structure/model/properties/atomic';\nimport { cantorPairing } from '../../../mol-data/util';\nimport { bundleElementImpl, bundleGenerator } from '../../../mol-model/structure/query/queries/internal';\nimport { arrayEqual } from '../../../mol-util/array';\nvar C = QuerySymbolRuntime.Const;\nvar D = QuerySymbolRuntime.Dynamic;\nvar symbols = [// ============= TYPES =============\nC(MolScript.core.type.bool, function core_type_bool(ctx, v) {\n  return !!v[0](ctx);\n}), C(MolScript.core.type.num, function core_type_num(ctx, v) {\n  return +v[0](ctx);\n}), C(MolScript.core.type.str, function core_type_str(ctx, v) {\n  return '' + v[0](ctx);\n}), C(MolScript.core.type.list, function core_type_list(ctx, xs) {\n  return QueryRuntimeArguments.forEachEval(xs, ctx, function (v, i, list) {\n    return list[i] = v;\n  }, []);\n}), C(MolScript.core.type.set, function core_type_set(ctx, xs) {\n  return QueryRuntimeArguments.forEachEval(xs, ctx, function core_type_set_argEval(v, i, set) {\n    return set.add(v);\n  }, new Set());\n}), C(MolScript.core.type.regex, function core_type_regex(ctx, v) {\n  return new RegExp(v[0](ctx), v[1] && v[1](ctx) || '');\n}), C(MolScript.core.type.bitflags, function core_type_bitflags(ctx, v) {\n  return +v[0](ctx);\n}), C(MolScript.core.type.compositeKey, function core_type_compositeKey(ctx, xs) {\n  return QueryRuntimeArguments.forEachEval(xs, ctx, function (v, i, list) {\n    return list[i] = '' + v;\n  }, []).join('-');\n}), // ============= LOGIC ================\nC(MolScript.core.logic.not, function (ctx, v) {\n  return !v[0](ctx);\n}), C(MolScript.core.logic.and, function (ctx, xs) {\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) if (!xs[i](ctx)) return false;\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      if (!xs[k](ctx)) return false;\n    }\n  }\n\n  return true;\n}), C(MolScript.core.logic.or, function (ctx, xs) {\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) if (xs[i](ctx)) return true;\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      if (xs[k](ctx)) return true;\n    }\n  }\n\n  return false;\n}), // ============= RELATIONAL ================\nC(MolScript.core.rel.eq, function (ctx, v) {\n  return v[0](ctx) === v[1](ctx);\n}), C(MolScript.core.rel.neq, function (ctx, v) {\n  return v[0](ctx) !== v[1](ctx);\n}), C(MolScript.core.rel.lt, function (ctx, v) {\n  return v[0](ctx) < v[1](ctx);\n}), C(MolScript.core.rel.lte, function (ctx, v) {\n  return v[0](ctx) <= v[1](ctx);\n}), C(MolScript.core.rel.gr, function (ctx, v) {\n  return v[0](ctx) > v[1](ctx);\n}), C(MolScript.core.rel.gre, function (ctx, v) {\n  return v[0](ctx) >= v[1](ctx);\n}), C(MolScript.core.rel.inRange, function (ctx, v) {\n  var x = v[0](ctx);\n  return x >= v[1](ctx) && x <= v[2](ctx);\n}), // ============= ARITHMETIC ================\nC(MolScript.core.math.add, function (ctx, xs) {\n  var ret = 0;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret += xs[i](ctx);\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret += xs[k](ctx);\n    }\n  }\n\n  return ret;\n}), C(MolScript.core.math.sub, function (ctx, xs) {\n  var ret = 0;\n\n  if (typeof xs.length === 'number') {\n    if (xs.length === 1) return -xs[0](ctx);\n    ret = xs[0](ctx) || 0;\n\n    for (var i = 1, _i = xs.length; i < _i; i++) ret -= xs[i](ctx);\n  } else {\n    var keys = Object.keys(xs);\n    if (keys.length === 1) return -xs[keys[0]](ctx);\n    ret = xs[keys[0]](ctx) || 0;\n\n    for (var i = 1, _i = keys.length; i < _i; i++) ret -= xs[keys[i]](ctx);\n  }\n\n  return ret;\n}), C(MolScript.core.math.mult, function (ctx, xs) {\n  var ret = 1;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret *= xs[i](ctx);\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret *= xs[k](ctx);\n    }\n  }\n\n  return ret;\n}), C(MolScript.core.math.div, function (ctx, v) {\n  return v[0](ctx) / v[1](ctx);\n}), C(MolScript.core.math.pow, function (ctx, v) {\n  return Math.pow(v[0](ctx), v[1](ctx));\n}), C(MolScript.core.math.mod, function (ctx, v) {\n  return v[0](ctx) % v[1](ctx);\n}), C(MolScript.core.math.min, function (ctx, xs) {\n  var ret = Number.POSITIVE_INFINITY;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret = Math.min(xs[i](ctx), ret);\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret = Math.min(xs[k](ctx), ret);\n    }\n  }\n\n  return ret;\n}), C(MolScript.core.math.max, function (ctx, xs) {\n  var ret = Number.NEGATIVE_INFINITY;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret = Math.max(xs[i](ctx), ret);\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret = Math.max(xs[k](ctx), ret);\n    }\n  }\n\n  return ret;\n}), C(MolScript.core.math.floor, function (ctx, v) {\n  return Math.floor(v[0](ctx));\n}), C(MolScript.core.math.ceil, function (ctx, v) {\n  return Math.ceil(v[0](ctx));\n}), C(MolScript.core.math.roundInt, function (ctx, v) {\n  return Math.round(v[0](ctx));\n}), C(MolScript.core.math.abs, function (ctx, v) {\n  return Math.abs(v[0](ctx));\n}), C(MolScript.core.math.sqrt, function (ctx, v) {\n  return Math.sqrt(v[0](ctx));\n}), C(MolScript.core.math.cbrt, function (ctx, v) {\n  return Math.cbrt(v[0](ctx));\n}), C(MolScript.core.math.sin, function (ctx, v) {\n  return Math.sin(v[0](ctx));\n}), C(MolScript.core.math.cos, function (ctx, v) {\n  return Math.cos(v[0](ctx));\n}), C(MolScript.core.math.tan, function (ctx, v) {\n  return Math.tan(v[0](ctx));\n}), C(MolScript.core.math.asin, function (ctx, v) {\n  return Math.asin(v[0](ctx));\n}), C(MolScript.core.math.acos, function (ctx, v) {\n  return Math.acos(v[0](ctx));\n}), C(MolScript.core.math.atan, function (ctx, v) {\n  return Math.atan(v[0](ctx));\n}), C(MolScript.core.math.sinh, function (ctx, v) {\n  return Math.sinh(v[0](ctx));\n}), C(MolScript.core.math.cosh, function (ctx, v) {\n  return Math.cosh(v[0](ctx));\n}), C(MolScript.core.math.tanh, function (ctx, v) {\n  return Math.tanh(v[0](ctx));\n}), C(MolScript.core.math.exp, function (ctx, v) {\n  return Math.exp(v[0](ctx));\n}), C(MolScript.core.math.log, function (ctx, v) {\n  return Math.log(v[0](ctx));\n}), C(MolScript.core.math.log10, function (ctx, v) {\n  return Math.log10(v[0](ctx));\n}), C(MolScript.core.math.atan2, function (ctx, v) {\n  return Math.atan2(v[0](ctx), v[1](ctx));\n}), // ============= STRING ================\nC(MolScript.core.str.match, function (ctx, v) {\n  return v[0](ctx).test(v[1](ctx));\n}), C(MolScript.core.str.concat, function (ctx, xs) {\n  var ret = [];\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret.push(xs[i](ctx).toString());\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret.push(xs[k](ctx).toString());\n    }\n  }\n\n  return ret.join('');\n}), // ============= LIST ================\nC(MolScript.core.list.getAt, function (ctx, v) {\n  return v[0](ctx)[v[1](ctx)];\n}), C(MolScript.core.list.equal, function (ctx, v) {\n  return arrayEqual(v[0](ctx), v[1](ctx));\n}), // ============= SET ================\nC(MolScript.core.set.has, function core_set_has(ctx, v) {\n  return v[0](ctx).has(v[1](ctx));\n}), C(MolScript.core.set.isSubset, function core_set_isSubset(ctx, v) {\n  return SetUtils.isSuperset(v[1](ctx), v[0](ctx));\n}), // ============= FLAGS ================\nC(MolScript.core.flags.hasAny, function (ctx, v) {\n  var test = v[1](ctx);\n  var tested = v[0](ctx);\n  if (!test) return !!tested;\n  return (tested & test) !== 0;\n}), C(MolScript.core.flags.hasAll, function (ctx, v) {\n  var test = v[1](ctx);\n  var tested = v[0](ctx);\n  if (!test) return !tested;\n  return (tested & test) === test;\n}), // Structure\n// ============= TYPES ================\nC(MolScript.structureQuery.type.elementSymbol, function (ctx, v) {\n  return ElementSymbol(v[0](ctx));\n}), C(MolScript.structureQuery.type.atomName, function (ctx, v) {\n  return upperCaseAny(v[0](ctx));\n}), C(MolScript.structureQuery.type.bondFlags, function (ctx, xs) {\n  var ret = 0\n  /* None */\n  ;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret = bondFlag(ret, xs[i](ctx));\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret = bondFlag(ret, xs[k](ctx));\n    }\n  }\n\n  return ret;\n}), C(MolScript.structureQuery.type.ringFingerprint, function (ctx, xs) {\n  return UnitRing.elementFingerprint(getArray(ctx, xs));\n}), C(MolScript.structureQuery.type.secondaryStructureFlags, function (ctx, xs) {\n  var ret = 0\n  /* None */\n  ;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret = secondaryStructureFlag(ret, xs[i](ctx));\n  } else {\n    for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\n      var k = _b[_a];\n      ret = secondaryStructureFlag(ret, xs[k](ctx));\n    }\n  }\n\n  return ret;\n}), // TODO:\n// C(MolScript.structureQuery.type.entityType, (ctx, v) => StructureRuntime.Common.entityType(v[0](ctx))),\n// C(MolScript.structureQuery.type.authResidueId, (ctx, v) => ResidueIdentifier.auth(v[0](ctx), v[1](ctx), v[2] && v[2](ctx))),\n// C(MolScript.structureQuery.type.labelResidueId, (ctx, v) => ResidueIdentifier.label(v[0](ctx), v[1](ctx), v[2](ctx), v[3] && v[3](ctx))),\n// ============= SLOTS ================\n// TODO: slots might not be needed after all: reducer simply pushes/pops current element\n// C(MolScript.structureQuery.slot.element, (ctx, _) => ctx_.element),\n// C(MolScript.structureQuery.slot.elementSetReduce, (ctx, _) => ctx_.element),\n// ============= FILTERS ================\nD(MolScript.structureQuery.filter.pick, function (ctx, xs) {\n  return Queries.filters.pick(xs[0], xs['test'])(ctx);\n}), D(MolScript.structureQuery.filter.first, function (ctx, xs) {\n  return Queries.filters.first(xs[0])(ctx);\n}), D(MolScript.structureQuery.filter.withSameAtomProperties, function (ctx, xs) {\n  return Queries.filters.withSameAtomProperties(xs[0], xs['source'], xs['property'])(ctx);\n}), D(MolScript.structureQuery.filter.intersectedBy, function (ctx, xs) {\n  return Queries.filters.areIntersectedBy(xs[0], xs['by'])(ctx);\n}), D(MolScript.structureQuery.filter.within, function (ctx, xs) {\n  return Queries.filters.within({\n    query: xs[0],\n    target: xs['target'],\n    minRadius: xs['min-radius'],\n    maxRadius: xs['max-radius'],\n    elementRadius: xs['atom-radius'],\n    invert: xs['invert']\n  })(ctx);\n}), D(MolScript.structureQuery.filter.isConnectedTo, function (ctx, xs) {\n  return Queries.filters.isConnectedTo({\n    query: xs[0],\n    target: xs['target'],\n    disjunct: xs['disjunct'],\n    invert: xs['invert'],\n    bondTest: xs['bond-test']\n  })(ctx);\n}), // ============= GENERATORS ================\nD(MolScript.structureQuery.generator.atomGroups, function structureQuery_generator_atomGroups(ctx, xs) {\n  return Queries.generators.atoms({\n    entityTest: xs['entity-test'],\n    chainTest: xs['chain-test'],\n    residueTest: xs['residue-test'],\n    atomTest: xs['atom-test'],\n    groupBy: xs['group-by']\n  })(ctx);\n}), D(MolScript.structureQuery.generator.all, function structureQuery_generator_all(ctx) {\n  return Queries.generators.all(ctx);\n}), D(MolScript.structureQuery.generator.empty, function structureQuery_generator_empty(ctx) {\n  return Queries.generators.none(ctx);\n}), D(MolScript.structureQuery.generator.bondedAtomicPairs, function structureQuery_generator_bondedAtomicPairs(ctx, xs) {\n  return Queries.generators.bondedAtomicPairs(xs && xs[0])(ctx);\n}), D(MolScript.structureQuery.generator.rings, function structureQuery_generator_rings(ctx, xs) {\n  var _a, _b;\n\n  return Queries.generators.rings((_a = xs === null || xs === void 0 ? void 0 : xs['fingerprint']) === null || _a === void 0 ? void 0 : _a.call(xs, ctx), (_b = xs === null || xs === void 0 ? void 0 : xs['only-aromatic']) === null || _b === void 0 ? void 0 : _b.call(xs, ctx))(ctx);\n}), // ============= MODIFIERS ================\nD(MolScript.structureQuery.modifier.includeSurroundings, function structureQuery_modifier_includeSurroundings(ctx, xs) {\n  return Queries.modifiers.includeSurroundings(xs[0], {\n    radius: xs['radius'](ctx),\n    wholeResidues: !!(xs['as-whole-residues'] && xs['as-whole-residues'](ctx)),\n    elementRadius: xs['atom-radius']\n  })(ctx);\n}), D(MolScript.structureQuery.modifier.surroundingLigands, function structureQuery_modifier_includeSurroundingLigands(ctx, xs) {\n  return Queries.modifiers.surroundingLigands({\n    query: xs[0],\n    radius: xs['radius'](ctx),\n    includeWater: !!(xs['include-water'] && xs['include-water'](ctx))\n  })(ctx);\n}), D(MolScript.structureQuery.modifier.wholeResidues, function structureQuery_modifier_wholeResidues(ctx, xs) {\n  return Queries.modifiers.wholeResidues(xs[0])(ctx);\n}), D(MolScript.structureQuery.modifier.union, function structureQuery_modifier_union(ctx, xs) {\n  return Queries.modifiers.union(xs[0])(ctx);\n}), D(MolScript.structureQuery.modifier.expandProperty, function structureQuery_modifier_expandProperty(ctx, xs) {\n  return Queries.modifiers.expandProperty(xs[0], xs['property'])(ctx);\n}), D(MolScript.structureQuery.modifier.exceptBy, function structureQuery_modifier_exceptBy(ctx, xs) {\n  return Queries.modifiers.exceptBy(xs[0], xs['by'])(ctx);\n}), D(MolScript.structureQuery.modifier.includeConnected, function structureQuery_modifier_includeConnected(ctx, xs) {\n  var _a, _b;\n\n  return Queries.modifiers.includeConnected({\n    query: xs[0],\n    bondTest: xs['bond-test'],\n    wholeResidues: !!(xs['as-whole-residues'] && xs['as-whole-residues'](ctx)),\n    layerCount: xs['layer-count'] && xs['layer-count'](ctx) || 1,\n    fixedPoint: (_b = (_a = xs['fixed-point']) === null || _a === void 0 ? void 0 : _a.call(xs, ctx)) !== null && _b !== void 0 ? _b : false\n  })(ctx);\n}), // ============= COMBINATORS ================\nD(MolScript.structureQuery.combinator.merge, function (ctx, xs) {\n  return Queries.combinators.merge(xs)(ctx);\n}), // ============= ATOM PROPERTIES ================\n// ~~~ CORE ~~~\nD(MolScript.structureQuery.atomProperty.core.elementSymbol, atomProp(StructureProperties.atom.type_symbol)), D(MolScript.structureQuery.atomProperty.core.vdw, function (ctx, xs) {\n  return VdwRadius(StructureProperties.atom.type_symbol(xs && xs[0] && xs[0](ctx) || ctx.element));\n}), D(MolScript.structureQuery.atomProperty.core.mass, function (ctx, xs) {\n  return AtomWeight(StructureProperties.atom.type_symbol(xs && xs[0] && xs[0](ctx) || ctx.element));\n}), D(MolScript.structureQuery.atomProperty.core.atomicNumber, function (ctx, xs) {\n  return AtomNumber(StructureProperties.atom.type_symbol(xs && xs[0] && xs[0](ctx) || ctx.element));\n}), D(MolScript.structureQuery.atomProperty.core.x, atomProp(StructureProperties.atom.x)), D(MolScript.structureQuery.atomProperty.core.y, atomProp(StructureProperties.atom.y)), D(MolScript.structureQuery.atomProperty.core.z, atomProp(StructureProperties.atom.z)), D(MolScript.structureQuery.atomProperty.core.sourceIndex, atomProp(StructureProperties.atom.sourceIndex)), D(MolScript.structureQuery.atomProperty.core.operatorName, atomProp(StructureProperties.unit.operator_name)), D(MolScript.structureQuery.atomProperty.core.modelIndex, atomProp(StructureProperties.unit.model_index)), D(MolScript.structureQuery.atomProperty.core.modelLabel, atomProp(StructureProperties.unit.model_label)), D(MolScript.structureQuery.atomProperty.core.atomKey, function (ctx, xs) {\n  var e = xs && xs[0] && xs[0](ctx) || ctx.element;\n  return cantorPairing(e.unit.id, e.element);\n}), // TODO:\n// D(MolScript.structureQuery.atomProperty.core.bondCount, (ctx, _) => ),\n// ~~~ TOPOLOGY ~~~\n// TODO\n// ~~~ MACROMOLECULAR ~~~\n// TODO:\n// // identifiers\n// labelResidueId: prop((env, v) => ResidueIdentifier.labelOfResidueIndex(env.context.model, getAddress(env, v).residue)),\n// authResidueId: prop((env, v) => ResidueIdentifier.authOfResidueIndex(env.context.model, getAddress(env, v).residue)),\n// keys\nD(MolScript.structureQuery.atomProperty.macromolecular.residueKey, function (ctx, xs) {\n  return StructureElement.residueIndex(xs && xs[0] && xs[0](ctx) || ctx.element);\n}), D(MolScript.structureQuery.atomProperty.macromolecular.chainKey, function (ctx, xs) {\n  return StructureElement.chainIndex(xs && xs[0] && xs[0](ctx) || ctx.element);\n}), D(MolScript.structureQuery.atomProperty.macromolecular.entityKey, function (ctx, xs) {\n  return StructureElement.entityIndex(xs && xs[0] && xs[0](ctx) || ctx.element);\n}), // mmCIF\nD(MolScript.structureQuery.atomProperty.macromolecular.id, atomProp(StructureProperties.atom.id)), D(MolScript.structureQuery.atomProperty.macromolecular.isHet, function (ctx, xs) {\n  return StructureProperties.residue.group_PDB(xs && xs[0] && xs[0](ctx) || ctx.element) !== 'ATOM';\n}), D(MolScript.structureQuery.atomProperty.macromolecular.label_atom_id, atomProp(StructureProperties.atom.label_atom_id)), D(MolScript.structureQuery.atomProperty.macromolecular.label_alt_id, atomProp(StructureProperties.atom.label_alt_id)), D(MolScript.structureQuery.atomProperty.macromolecular.label_comp_id, atomProp(StructureProperties.atom.label_comp_id)), D(MolScript.structureQuery.atomProperty.macromolecular.label_seq_id, atomProp(StructureProperties.residue.label_seq_id)), D(MolScript.structureQuery.atomProperty.macromolecular.label_asym_id, atomProp(StructureProperties.chain.label_asym_id)), D(MolScript.structureQuery.atomProperty.macromolecular.label_entity_id, atomProp(StructureProperties.entity.id)), D(MolScript.structureQuery.atomProperty.macromolecular.auth_atom_id, atomProp(StructureProperties.atom.auth_atom_id)), D(MolScript.structureQuery.atomProperty.macromolecular.auth_comp_id, atomProp(StructureProperties.atom.auth_comp_id)), D(MolScript.structureQuery.atomProperty.macromolecular.auth_seq_id, atomProp(StructureProperties.residue.auth_seq_id)), D(MolScript.structureQuery.atomProperty.macromolecular.auth_asym_id, atomProp(StructureProperties.chain.auth_asym_id)), D(MolScript.structureQuery.atomProperty.macromolecular.pdbx_PDB_ins_code, atomProp(StructureProperties.residue.pdbx_PDB_ins_code)), D(MolScript.structureQuery.atomProperty.macromolecular.pdbx_formal_charge, atomProp(StructureProperties.atom.pdbx_formal_charge)), D(MolScript.structureQuery.atomProperty.macromolecular.occupancy, atomProp(StructureProperties.atom.occupancy)), D(MolScript.structureQuery.atomProperty.macromolecular.B_iso_or_equiv, atomProp(StructureProperties.atom.B_iso_or_equiv)), D(MolScript.structureQuery.atomProperty.macromolecular.entityType, atomProp(StructureProperties.entity.type)), D(MolScript.structureQuery.atomProperty.macromolecular.entitySubtype, atomProp(StructureProperties.entity.subtype)), D(MolScript.structureQuery.atomProperty.macromolecular.entityPrdId, atomProp(StructureProperties.entity.prd_id)), D(MolScript.structureQuery.atomProperty.macromolecular.entityDescription, atomProp(StructureProperties.entity.pdbx_description)), D(MolScript.structureQuery.atomProperty.macromolecular.objectPrimitive, atomProp(StructureProperties.unit.object_primitive)), D(MolScript.structureQuery.atomProperty.macromolecular.isNonStandard, atomProp(StructureProperties.residue.isNonStandard)), D(MolScript.structureQuery.atomProperty.macromolecular.secondaryStructureKey, atomProp(StructureProperties.residue.secondary_structure_key)), D(MolScript.structureQuery.atomProperty.macromolecular.secondaryStructureFlags, atomProp(StructureProperties.residue.secondary_structure_type)), D(MolScript.structureQuery.atomProperty.macromolecular.chemCompType, atomProp(StructureProperties.residue.chem_comp_type)), // ============= BOND PROPERTIES ================\nD(MolScript.structureQuery.bondProperty.order, function (ctx, xs) {\n  return ctx.atomicBond.order;\n}), D(MolScript.structureQuery.bondProperty.flags, function (ctx, xs) {\n  return ctx.atomicBond.type;\n}), D(MolScript.structureQuery.bondProperty.atomA, function (ctx, xs) {\n  return ctx.atomicBond.a;\n}), D(MolScript.structureQuery.bondProperty.atomB, function (ctx, xs) {\n  return ctx.atomicBond.b;\n}), D(MolScript.structureQuery.bondProperty.length, function (ctx, xs) {\n  return ctx.atomicBond.length;\n}), // Internal\nD(MolScript.internal.generator.bundleElement, function internal_generator_bundleElement(ctx, xs) {\n  return bundleElementImpl(xs.groupedUnits(ctx), xs.ranges(ctx), xs.set(ctx));\n}), D(MolScript.internal.generator.bundle, function internal_generator_bundle(ctx, xs) {\n  return bundleGenerator(xs.elements(ctx))(ctx);\n}), D(MolScript.internal.generator.current, function internal_generator_current(ctx, xs) {\n  return ctx.tryGetCurrentSelection();\n})];\n\nfunction atomProp(p) {\n  return function (ctx, xs) {\n    return p(xs && xs[0] && xs[0](ctx) || ctx.element);\n  };\n}\n\nfunction bondFlag(current, f) {\n  return current | (BondType.isName(f) ? BondType.fromName(f) : 0\n  /* None */\n  );\n}\n\nfunction secondaryStructureFlag(current, f) {\n  switch (f.toLowerCase()) {\n    case 'helix':\n      return current | 2\n      /* Helix */\n      ;\n\n    case 'alpha':\n      return current | 2\n      /* Helix */\n      | 4096\n      /* HelixAlpha */\n      ;\n\n    case 'pi':\n      return current | 2\n      /* Helix */\n      | 32768\n      /* HelixPi */\n      ;\n\n    case '310':\n      return current | 2\n      /* Helix */\n      | 2048\n      /* Helix3Ten */\n      ;\n\n    case 'beta':\n      return current | 4\n      /* Beta */\n      ;\n\n    case 'strand':\n      return current | 4\n      /* Beta */\n      | 4194304\n      /* BetaStrand */\n      ;\n\n    case 'sheet':\n      return current | 4\n      /* Beta */\n      | 8388608\n      /* BetaSheet */\n      ;\n\n    case 'turn':\n      return current | 16\n      /* Turn */\n      ;\n\n    case 'bend':\n      return current | 8\n      /* Bend */\n      ;\n\n    case 'coil':\n      return current | 536870912\n      /* NA */\n      ;\n\n    default:\n      return current;\n  }\n}\n\nfunction getArray(ctx, xs) {\n  var ret = [];\n  if (!xs) return ret;\n\n  if (typeof xs.length === 'number') {\n    for (var i = 0, _i = xs.length; i < _i; i++) ret.push(xs[i](ctx));\n  } else {\n    var keys = Object.keys(xs);\n\n    for (var i = 1, _i = keys.length; i < _i; i++) ret.push(xs[keys[i]](ctx));\n  }\n\n  return ret;\n}\n\n(function () {\n  for (var _a = 0, symbols_1 = symbols; _a < symbols_1.length; _a++) {\n    var s = symbols_1[_a];\n    DefaultQueryRuntimeTable.addSymbol(s);\n  }\n})();","map":{"version":3,"sources":["../../../../src/mol-script/runtime/query/table.ts"],"names":[],"mappings":"AAAA;;;;;AAKG;AAEH,SAAS,oBAAoB,IAAI,SAAjC,QAAkD,6BAAlD;AACA,SAAS,wBAAT,EAAmC,kBAAnC,EAAuD,qBAAvD,QAAoF,QAApF;AACA,SAAS,OAAT,EAAkB,mBAAlB,EAAuC,gBAAvC,EAAuE,QAAvE,QAAuF,8BAAvF;AACA,SAAS,aAAT,EAAwB,QAAxB,QAAgE,0CAAhE;AACA,SAAS,QAAT,QAAyB,uBAAzB;AACA,SAAS,YAAT,QAA6B,0BAA7B;AACA,SAAS,SAAT,EAAoB,UAApB,EAAgC,UAAhC,QAAkD,sDAAlD;AACA,SAAS,aAAT,QAA8B,wBAA9B;AACA,SAAS,iBAAT,EAA4B,eAA5B,QAAmD,qDAAnD;AACA,SAAS,UAAT,QAA2B,yBAA3B;AAEA,IAAM,CAAC,GAAG,kBAAkB,CAAC,KAA7B;AACA,IAAM,CAAC,GAAG,kBAAkB,CAAC,OAA7B;AAEA,IAAM,OAAO,GAAG,CACZ;AAEA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,SAAS,cAAT,CAAwB,GAAxB,EAA6B,CAA7B,EAA8B;AAAI,SAAO,CAAC,CAAC,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAT;AAAqB,CAAlF,CAHW,EAIZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,SAAS,aAAT,CAAuB,GAAvB,EAA4B,CAA5B,EAA6B;AAAI,SAAO,CAAC,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAR;AAAoB,CAA/E,CAJW,EAKZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,SAAS,aAAT,CAAuB,GAAvB,EAA4B,CAA5B,EAA6B;AAAI,SAAO,KAAK,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAZ;AAAwB,CAAnF,CALW,EAMZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,SAAS,cAAT,CAAwB,GAAxB,EAA6B,EAA7B,EAA+B;AAAI,SAAO,qBAAqB,CAAC,WAAtB,CAAkC,EAAlC,EAAsC,GAAtC,EAA2C,UAAC,CAAD,EAAI,CAAJ,EAAO,IAAP,EAAW;AAAK,WAAA,IAAI,CAAC,CAAD,CAAJ,GAAA,CAAA;AAAW,GAAtE,EAAwE,EAAxE,CAAP;AAA8F,CAA5J,CANW,EAOZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,SAAS,aAAT,CAAuB,GAAvB,EAA4B,EAA5B,EAA8B;AAAI,SAAO,qBAAqB,CAAC,WAAtB,CAAkC,EAAlC,EAAsC,GAAtC,EAA2C,SAAS,qBAAT,CAA+B,CAA/B,EAAkC,CAAlC,EAAqC,GAArC,EAAwC;AAAI,WAAO,GAAG,CAAC,GAAJ,CAAQ,CAAR,CAAP;AAAoB,GAA3G,EAA6G,IAAI,GAAJ,EAA7G,CAAP;AAAsI,CAAlM,CAPW,EAQZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,KAArB,EAA4B,SAAS,eAAT,CAAyB,GAAzB,EAA8B,CAA9B,EAA+B;AAAI,SAAO,IAAI,MAAJ,CAAW,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAX,EAAuB,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAT,IAAuB,EAA7C,CAAP;AAA0D,CAAzH,CARW,EASZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,QAArB,EAA+B,SAAS,kBAAT,CAA4B,GAA5B,EAAiC,CAAjC,EAAkC;AAAI,SAAO,CAAC,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAR;AAAoB,CAAzF,CATW,EAUZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,YAArB,EAAmC,SAAS,sBAAT,CAAgC,GAAhC,EAAqC,EAArC,EAAuC;AAAI,SAAO,qBAAqB,CAAC,WAAtB,CAAkC,EAAlC,EAAsC,GAAtC,EAA2C,UAAC,CAAD,EAAI,CAAJ,EAAO,IAAP,EAAW;AAAK,WAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,KAAV,CAAA;AAAgB,GAA3E,EAA6E,EAA7E,EAA6F,IAA7F,CAAkG,GAAlG,CAAP;AAAgH,CAA9L,CAVW,EAYZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,KAAf,CAAqB,GAAtB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAC,CAAD,CAAD,CAAD,GAAC,CAAD;AAAU,CAAjD,CAbW,EAcZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,KAAf,CAAqB,GAAtB,EAA2B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAChC,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,IAAI,CAAC,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAL,EAAiB,OAAO,KAAP;AACjE,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,UAAI,CAAC,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAL,EAAiB,OAAO,KAAP;AAAa;AAClE;;AACD,SAAO,IAAP;AACH,CAPA,CAdW,EAsBZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,KAAf,CAAqB,EAAtB,EAA0B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC/B,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,IAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAJ,EAAgB,OAAO,IAAP;AAChE,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,UAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAJ,EAAgB,OAAO,IAAP;AAAY;AAChE;;AACD,SAAO,KAAP;AACH,CAPA,CAtBW,EA+BZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,EAApB,EAAwB,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,MAAc,CAAC,CAAC,CAAD,CAAD,CAAd,GAAc,CAAd;AAAuB,CAA3D,CAhCW,EAiCZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,GAApB,EAAyB,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,MAAc,CAAC,CAAC,CAAD,CAAD,CAAd,GAAc,CAAd;AAAuB,CAA5D,CAjCW,EAkCZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,EAApB,EAAwB,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,IAAY,CAAC,CAAC,CAAD,CAAD,CAAZ,GAAY,CAAZ;AAAqB,CAAzD,CAlCW,EAmCZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,GAApB,EAAyB,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,KAAa,CAAC,CAAC,CAAD,CAAD,CAAb,GAAa,CAAb;AAAsB,CAA3D,CAnCW,EAoCZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,EAApB,EAAwB,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,IAAY,CAAC,CAAC,CAAD,CAAD,CAAZ,GAAY,CAAZ;AAAqB,CAAzD,CApCW,EAqCZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,GAApB,EAAyB,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,KAAa,CAAC,CAAC,CAAD,CAAD,CAAb,GAAa,CAAb;AAAsB,CAA3D,CArCW,EAsCZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,OAApB,EAA6B,UAAC,GAAD,EAAM,CAAN,EAAO;AACjC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAV;AACA,SAAO,CAAC,IAAI,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAL,IAAkB,CAAC,IAAI,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAA9B;AACH,CAHA,CAtCW,EA2CZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC/B,MAAI,GAAG,GAAG,CAAV;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,IAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAP;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,IAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAP;AAAkB;AACtD;;AACD,SAAO,GAAP;AACH,CARA,CA5CW,EAqDZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC/B,MAAI,GAAG,GAAG,CAAV;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,QAAI,EAAE,CAAC,MAAH,KAAc,CAAlB,EAAqB,OAAO,CAAC,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAR;AACrB,IAAA,GAAG,GAAG,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,KAAc,CAApB;;AACA,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,IAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAP;AAChD,GAJD,MAIO;AACH,QAAM,IAAI,GAAG,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAb;AACA,QAAI,IAAI,CAAC,MAAL,KAAgB,CAApB,EAAuB,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAD,CAAL,CAAF,CAAY,GAAZ,CAAR;AACvB,IAAA,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,CAAD,CAAL,CAAF,CAAY,GAAZ,KAAoB,CAA1B;;AACA,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,IAAI,CAAC,MAA1B,EAAkC,CAAC,GAAG,EAAtC,EAA0C,CAAC,EAA3C,EAA+C,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,CAAD,CAAL,CAAF,CAAY,GAAZ,CAAP;AAClD;;AACD,SAAO,GAAP;AACH,CAbA,CArDW,EAmEZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAChC,MAAI,GAAG,GAAG,CAAV;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,IAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAP;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,IAAI,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAP;AAAkB;AACtD;;AACD,SAAO,GAAP;AACH,CARA,CAnEW,EA4EZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,IAAY,CAAC,CAAC,CAAD,CAAD,CAAZ,GAAY,CAAZ;AAAqB,CAA3D,CA5EW,EA6EZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAT,EAAoB,CAAC,CAAC,CAAD,CAAD,CAApB,GAAoB,CAApB,CAAA;AAA8B,CAApE,CA7EW,EA8EZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,IAAY,CAAC,CAAC,CAAD,CAAD,CAAZ,GAAY,CAAZ;AAAqB,CAA3D,CA9EW,EAgFZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC/B,MAAI,GAAG,GAAG,MAAM,CAAC,iBAAjB;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAT,EAAqB,GAArB,CAAN;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAT,EAAqB,GAArB,CAAN;AAAgC;AACpE;;AACD,SAAO,GAAP;AACH,CARA,CAhFW,EAyFZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC/B,MAAI,GAAG,GAAG,MAAM,CAAC,iBAAjB;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAT,EAAqB,GAArB,CAAN;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAT,EAAqB,GAArB,CAAN;AAAgC;AACpE;;AACD,SAAO,GAAP;AACH,CARA,CAzFW,EAmGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,KAArB,EAA4B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAD,CAAD,CAAX,GAAW,CAAX,CAAA;AAAqB,CAA7D,CAnGW,EAoGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CApGW,EAqGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,QAArB,EAA+B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAD,CAAD,CAAX,GAAW,CAAX,CAAA;AAAqB,CAAhE,CArGW,EAsGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAT,GAAS,CAAT,CAAA;AAAmB,CAAzD,CAtGW,EAuGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CAvGW,EAwGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CAxGW,EAyGZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAT,GAAS,CAAT,CAAA;AAAmB,CAAzD,CAzGW,EA0GZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAT,GAAS,CAAT,CAAA;AAAmB,CAAzD,CA1GW,EA2GZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAT,GAAS,CAAT,CAAA;AAAmB,CAAzD,CA3GW,EA4GZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CA5GW,EA6GZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CA7GW,EA8GZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CA9GW,EA+GZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CA/GW,EAgHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CAhHW,EAiHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,IAArB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA3D,CAjHW,EAkHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAT,GAAS,CAAT,CAAA;AAAmB,CAAzD,CAlHW,EAmHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,GAArB,EAA0B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAD,CAAT,GAAS,CAAT,CAAA;AAAmB,CAAzD,CAnHW,EAoHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,KAArB,EAA4B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAD,CAAD,CAAX,GAAW,CAAX,CAAA;AAAqB,CAA7D,CApHW,EAqHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,KAArB,EAA4B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAX,EAAsB,CAAC,CAAC,CAAD,CAAD,CAAtB,GAAsB,CAAtB,CAAA;AAAgC,CAAxE,CArHW,EAuHZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,KAApB,EAA2B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,EAAU,IAAV,CAAe,CAAC,CAAC,CAAD,CAAD,CAAf,GAAe,CAAf,CAAA;AAAyB,CAAhE,CAxHW,EAyHZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,MAApB,EAA4B,UAAC,GAAD,EAAM,EAAN,EAAQ;AACjC,MAAM,GAAG,GAAa,EAAtB;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,CAAC,IAAJ,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,EAAW,QAAX,EAAT;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,CAAC,IAAJ,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,EAAW,QAAX,EAAT;AAAgC;AACpE;;AACD,SAAO,GAAG,CAAC,IAAJ,CAAS,EAAT,CAAP;AACH,CARA,CAzHW,EAmIZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,KAArB,EAA4B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,EAAU,CAAC,CAAC,CAAD,CAAD,CAAV,GAAU,CAAV,CAAA;AAAoB,CAA5D,CApIW,EAqIZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,KAArB,EAA4B,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,UAAU,CAAC,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAD,EAAY,CAAC,CAAC,CAAD,CAAD,CAAtB,GAAsB,CAAZ,CAAV;AAAgC,CAAxE,CArIW,EAuIZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,GAApB,EAAyB,SAAS,YAAT,CAAsB,GAAtB,EAA2B,CAA3B,EAA4B;AAAI,SAAO,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,EAAU,GAAV,CAAc,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAd,CAAP;AAAkC,CAA3F,CAxIW,EAyIZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,GAAf,CAAmB,QAApB,EAA8B,SAAS,iBAAT,CAA2B,GAA3B,EAAgC,CAAhC,EAAiC;AAAI,SAAO,QAAQ,CAAC,UAAT,CAAoB,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAApB,EAA2C,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAA3C,CAAP;AAA2E,CAA9I,CAzIW,EA2IZ;AACA,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,KAAf,CAAqB,MAAtB,EAA8B,UAAC,GAAD,EAAM,CAAN,EAAO;AAClC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAb;AACA,MAAM,MAAM,GAAG,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAf;AACA,MAAI,CAAC,IAAL,EAAW,OAAO,CAAC,CAAC,MAAT;AACX,SAAO,CAAC,MAAM,GAAG,IAAV,MAAoB,CAA3B;AACH,CALA,CA5IW,EAkJZ,CAAC,CAAC,SAAS,CAAC,IAAV,CAAe,KAAf,CAAqB,MAAtB,EAA8B,UAAC,GAAD,EAAM,CAAN,EAAO;AAClC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAb;AACA,MAAM,MAAM,GAAG,CAAC,CAAC,CAAD,CAAD,CAAK,GAAL,CAAf;AACA,MAAI,CAAC,IAAL,EAAW,OAAO,CAAC,MAAR;AACX,SAAO,CAAC,MAAM,GAAG,IAAV,MAAoB,IAA3B;AACH,CALA,CAlJW,EAyJZ;AAEA;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAA8B,aAA/B,EAA8C,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,aAAa,CAAC,CAAC,CAAC,CAAD,CAAD,CAAd,GAAc,CAAD,CAAb;AAAwB,CAAlF,CA5JW,EA6JZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAA8B,QAA/B,EAAyC,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,SAAA,YAAY,CAAC,CAAC,CAAC,CAAD,CAAD,CAAb,GAAa,CAAD,CAAZ;AAAuB,CAA5E,CA7JW,EA8JZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAA8B,SAA/B,EAA0C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC/C,MAAI,GAAG,GAAA;AAAA;AAAP;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,GAAG,QAAQ,CAAC,GAAD,EAAM,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAN,CAAd;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,GAAG,QAAQ,CAAC,GAAD,EAAM,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAN,CAAd;AAAgC;AACpE;;AACD,SAAO,GAAP;AACH,CARA,CA9JW,EAuKZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAA8B,eAA/B,EAAgD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,QAAQ,CAAC,kBAAT,CAA4B,QAAQ,CAAC,GAAD,EAApC,EAAoC,CAApC,CAAA;AAA8C,CAA3G,CAvKW,EAwKZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAA8B,uBAA/B,EAAwD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC7D,MAAI,GAAG,GAAA;AAAA;AAAP;;AACA,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,GAAG,sBAAsB,CAAC,GAAD,EAAM,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAN,CAA5B;AAChD,GAFD,MAEO;AACH,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+B;AAA1B,UAAM,CAAC,GAAA,EAAA,CAAA,EAAA,CAAP;AAA4B,MAAA,GAAG,GAAG,sBAAsB,CAAC,GAAD,EAAM,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAN,CAA5B;AAA8C;AAClF;;AACD,SAAO,GAAP;AACH,CARA,CAxKW,EAkLZ;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,MAAzB,CAAgC,IAAjC,EAAuC,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAqB,EAAE,CAAC,CAAD,CAAvB,EAAmC,EAAE,CAAC,MAAD,CAArC,EAAA,GAAA,CAAA;AAAmD,CAAvG,CA9LW,EA+LZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,MAAzB,CAAgC,KAAjC,EAAwC,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAAsB,EAAE,CAAC,CAAD,CAAxB,EAAA,GAAA,CAAA;AAAwC,CAA7F,CA/LW,EAgMZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,MAAzB,CAAgC,sBAAjC,EAAyD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,OAAR,CAAgB,sBAAhB,CAAuC,EAAE,CAAC,CAAD,CAAzC,EAAqD,EAAE,CAAC,QAAD,CAAvD,EAA0E,EAAE,CAAC,UAAD,CAA5E,EAAA,GAAA,CAAA;AAAqG,CAA3K,CAhMW,EAiMZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,MAAzB,CAAgC,aAAjC,EAAgD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,OAAR,CAAgB,gBAAhB,CAAiC,EAAE,CAAC,CAAD,CAAnC,EAA+C,EAAE,CAAC,IAAD,CAAjD,EAAA,GAAA,CAAA;AAAoE,CAAjI,CAjMW,EAkMZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,MAAzB,CAAgC,MAAjC,EAAyC,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,OAAR,CAAgB,MAAhB,CAAuB;AAC1E,IAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CADiE;AAE1E,IAAA,MAAM,EAAE,EAAE,CAAC,QAAD,CAFgE;AAG1E,IAAA,SAAS,EAAE,EAAE,CAAC,YAAD,CAH6D;AAI1E,IAAA,SAAS,EAAE,EAAE,CAAC,YAAD,CAJ6D;AAK1E,IAAA,aAAa,EAAE,EAAE,CAAC,aAAD,CALyD;AAM1E,IAAA,MAAM,EAAE,EAAE,CAAC,QAAD;AANgE,GAAvB,EAAA,GAAA,CAAA;AAOhD,CAPN,CAlMW,EA0MZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,MAAzB,CAAgC,aAAjC,EAAgD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,OAAR,CAAgB,aAAhB,CAA8B;AACxF,IAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CAD+E;AAExF,IAAA,MAAM,EAAE,EAAE,CAAC,QAAD,CAF8E;AAGxF,IAAA,QAAQ,EAAE,EAAE,CAAC,UAAD,CAH4E;AAIxF,IAAA,MAAM,EAAE,EAAE,CAAC,QAAD,CAJ8E;AAKxF,IAAA,QAAQ,EAAE,EAAE,CAAC,WAAD;AAL4E,GAA9B,EAAA,GAAA,CAAA;AAMvD,CANN,CA1MW,EAkNZ;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,SAAzB,CAAmC,UAApC,EAAgD,SAAS,mCAAT,CAA6C,GAA7C,EAAkD,EAAlD,EAAoD;AACjG,SAAO,OAAO,CAAC,UAAR,CAAmB,KAAnB,CAAyB;AAC5B,IAAA,UAAU,EAAE,EAAE,CAAC,aAAD,CADc;AAE5B,IAAA,SAAS,EAAE,EAAE,CAAC,YAAD,CAFe;AAG5B,IAAA,WAAW,EAAE,EAAE,CAAC,cAAD,CAHa;AAI5B,IAAA,QAAQ,EAAE,EAAE,CAAC,WAAD,CAJgB;AAK5B,IAAA,OAAO,EAAE,EAAE,CAAC,UAAD;AALiB,GAAzB,EAMJ,GANI,CAAP;AAOH,CARA,CAnNW,EA6NZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,SAAzB,CAAmC,GAApC,EAAyC,SAAS,4BAAT,CAAsC,GAAtC,EAAyC;AAAI,SAAO,OAAO,CAAC,UAAR,CAAmB,GAAnB,CAAuB,GAAvB,CAAP;AAAqC,CAA3H,CA7NW,EA8NZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,SAAzB,CAAmC,KAApC,EAA2C,SAAS,8BAAT,CAAwC,GAAxC,EAA2C;AAAI,SAAO,OAAO,CAAC,UAAR,CAAmB,IAAnB,CAAwB,GAAxB,CAAP;AAAsC,CAAhI,CA9NW,EA+NZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,SAAzB,CAAmC,iBAApC,EAAuD,SAAS,0CAAT,CAAoD,GAApD,EAAyD,EAAzD,EAA2D;AAC/G,SAAO,OAAO,CAAC,UAAR,CAAmB,iBAAnB,CAAqC,EAAE,IAAI,EAAE,CAAC,CAAD,CAA7C,EAAkD,GAAlD,CAAP;AACH,CAFA,CA/NW,EAkOZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,SAAzB,CAAmC,KAApC,EAA2C,SAAS,8BAAT,CAAwC,GAAxC,EAA6C,EAA7C,EAA+C;;;AACvF,SAAO,OAAO,CAAC,UAAR,CAAmB,KAAnB,CAAyB,CAAA,EAAA,GAAA,EAAE,KAAA,IAAF,IAAA,EAAE,KAAA,KAAA,CAAF,GAAE,KAAA,CAAF,GAAA,EAAE,CAAG,aAAH,CAAF,MAAmB,IAAnB,IAAmB,EAAA,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAmB,EAAA,CAAA,IAAA,CAAnB,EAAmB,EAAG,GAAH,CAA5C,EAA4D,CAAA,EAAA,GAAA,EAAE,KAAA,IAAF,IAAA,EAAE,KAAA,KAAA,CAAF,GAAE,KAAA,CAAF,GAAA,EAAE,CAAG,eAAH,CAAF,MAAqB,IAArB,IAAqB,EAAA,KAAA,KAAA,CAArB,GAAqB,KAAA,CAArB,GAAqB,EAAA,CAAA,IAAA,CAArB,EAAqB,EAAG,GAAH,CAAjF,EAA0F,GAA1F,CAAP;AACH,CAFA,CAlOW,EAsOZ;AAEA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,mBAAnC,EAAwD,SAAS,2CAAT,CAAqD,GAArD,EAA0D,EAA1D,EAA4D;AACjH,SAAO,OAAO,CAAC,SAAR,CAAkB,mBAAlB,CAAsC,EAAE,CAAC,CAAD,CAAxC,EAAoD;AACvD,IAAA,MAAM,EAAE,EAAE,CAAC,QAAD,CAAF,CAAa,GAAb,CAD+C;AAEvD,IAAA,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC,mBAAD,CAAF,IAA2B,EAAE,CAAC,mBAAD,CAAF,CAAwB,GAAxB,CAA7B,CAFuC;AAGvD,IAAA,aAAa,EAAE,EAAE,CAAC,aAAD;AAHsC,GAApD,EAIJ,GAJI,CAAP;AAKH,CANA,CAxOW,EA+OZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,kBAAnC,EAAuD,SAAS,iDAAT,CAA2D,GAA3D,EAAgE,EAAhE,EAAkE;AACtH,SAAO,OAAO,CAAC,SAAR,CAAkB,kBAAlB,CAAqC;AACxC,IAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CAD+B;AAExC,IAAA,MAAM,EAAE,EAAE,CAAC,QAAD,CAAF,CAAa,GAAb,CAFgC;AAGxC,IAAA,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC,eAAD,CAAF,IAAuB,EAAE,CAAC,eAAD,CAAF,CAAoB,GAApB,CAAzB;AAHyB,GAArC,EAIJ,GAJI,CAAP;AAKH,CANA,CA/OW,EAsPZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,aAAnC,EAAkD,SAAS,qCAAT,CAA+C,GAA/C,EAAoD,EAApD,EAAsD;AAAI,SAAO,OAAO,CAAC,SAAR,CAAkB,aAAlB,CAAgC,EAAE,CAAC,CAAD,CAAlC,EAA8C,GAA9C,CAAP;AAA4D,CAAxK,CAtPW,EAuPZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,KAAnC,EAA0C,SAAS,6BAAT,CAAuC,GAAvC,EAA4C,EAA5C,EAA8C;AAAI,SAAO,OAAO,CAAC,SAAR,CAAkB,KAAlB,CAAwB,EAAE,CAAC,CAAD,CAA1B,EAAsC,GAAtC,CAAP;AAAoD,CAAhJ,CAvPW,EAwPZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,cAAnC,EAAmD,SAAS,sCAAT,CAAgD,GAAhD,EAAqD,EAArD,EAAuD;AAAI,SAAO,OAAO,CAAC,SAAR,CAAkB,cAAlB,CAAiC,EAAE,CAAC,CAAD,CAAnC,EAA+C,EAAE,CAAC,UAAD,CAAjD,EAA+D,GAA/D,CAAP;AAA6E,CAA3L,CAxPW,EAyPZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,QAAnC,EAA6C,SAAS,gCAAT,CAA0C,GAA1C,EAA+C,EAA/C,EAAiD;AAAI,SAAO,OAAO,CAAC,SAAR,CAAkB,QAAlB,CAA2B,EAAE,CAAC,CAAD,CAA7B,EAAyC,EAAE,CAAC,IAAD,CAA3C,EAA0D,GAA1D,CAAP;AAAwE,CAA1K,CAzPW,EA0PZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,QAAzB,CAAkC,gBAAnC,EAAqD,SAAS,wCAAT,CAAkD,GAAlD,EAAuD,EAAvD,EAAyD;;;AAC3G,SAAO,OAAO,CAAC,SAAR,CAAkB,gBAAlB,CAAmC;AACtC,IAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CAD6B;AAEtC,IAAA,QAAQ,EAAE,EAAE,CAAC,WAAD,CAF0B;AAGtC,IAAA,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC,mBAAD,CAAF,IAA2B,EAAE,CAAC,mBAAD,CAAF,CAAwB,GAAxB,CAA7B,CAHsB;AAItC,IAAA,UAAU,EAAG,EAAE,CAAC,aAAD,CAAF,IAAqB,EAAE,CAAC,aAAD,CAAF,CAAkB,GAAlB,CAAtB,IAAiD,CAJvB;AAKtC,IAAA,UAAU,EAAE,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,EAAE,CAAC,aAAD,CAAF,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAiB,EAAA,CAAA,IAAA,CAAjB,EAAiB,EAAG,GAAH,CAAjB,MAAwB,IAAxB,IAAwB,EAAA,KAAA,KAAA,CAAxB,GAAwB,EAAxB,GAA4B;AALF,GAAnC,EAMJ,GANI,CAAP;AAOH,CARA,CA1PW,EAoQZ;AAEA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,UAAzB,CAAoC,KAArC,EAA4C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,OAAO,CAAC,WAAR,CAAoB,KAApB,CAA0B,EAA1B,EAAA,GAAA,CAAA;AAAyC,CAAlG,CAtQW,EAwQZ;AAEA;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,aAA5C,EAA2D,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAA1B,CAAnE,CA3QW,EA4QZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,GAA5C,EAAiD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,SAAS,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAAzB,CAAsC,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAxF,OAAU,CAAD,CAAT;AAAkG,CAAhK,CA5QW,EA6QZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,IAA5C,EAAkD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,UAAU,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAAzB,CAAsC,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAzF,OAAW,CAAD,CAAV;AAAmG,CAAlK,CA7QW,EA8QZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,YAA5C,EAA0D,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,UAAU,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAAzB,CAAsC,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAzF,OAAW,CAAD,CAAV;AAAmG,CAA1K,CA9QW,EA+QZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,CAA5C,EAA+C,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,CAA1B,CAAvD,CA/QW,EAgRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,CAA5C,EAA+C,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,CAA1B,CAAvD,CAhRW,EAiRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,CAA5C,EAA+C,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,CAA1B,CAAvD,CAjRW,EAkRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,WAA5C,EAAyD,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAA1B,CAAjE,CAlRW,EAmRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,YAA5C,EAA0D,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,aAA1B,CAAlE,CAnRW,EAoRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,UAA5C,EAAwD,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAA1B,CAAhE,CApRW,EAqRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,UAA5C,EAAwD,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,WAA1B,CAAhE,CArRW,EAsRZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,IAAtC,CAA2C,OAA5C,EAAqD,UAAC,GAAD,EAAM,EAAN,EAAQ;AAC1D,MAAM,CAAC,GAAI,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAC,OAApD;AACA,SAAO,aAAa,CAAC,CAAC,CAAC,IAAF,CAAO,EAAR,EAAY,CAAC,CAAC,OAAd,CAApB;AACH,CAHA,CAtRW,EA2RZ;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,UAAtD,EAAkE,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,gBAAgB,CAAC,YAAjB,CAA+B,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAvE,OAAA,CAAA;AAAgF,CAA/J,CA1SW,EA2SZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,QAAtD,EAAgE,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,gBAAgB,CAAC,UAAjB,CAA6B,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAArE,OAAA,CAAA;AAA8E,CAA3J,CA3SW,EA4SZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,SAAtD,EAAiE,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,gBAAgB,CAAC,WAAjB,CAA8B,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAtE,OAAA,CAAA;AAA+E,CAA7J,CA5SW,EA8SZ;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,EAAtD,EAA0D,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,EAA1B,CAAlE,CA/SW,EAgTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,KAAtD,EAA6D,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,mBAAmB,CAAC,OAApB,CAA4B,SAA5B,CAAuC,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAAC,OAAhF,MAAA,MAAA;AAAmG,CAA7K,CAhTW,EAkTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,aAAtD,EAAqE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,aAA1B,CAA7E,CAlTW,EAmTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,YAAtD,EAAoE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,YAA1B,CAA5E,CAnTW,EAoTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,aAAtD,EAAqE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,aAA1B,CAA7E,CApTW,EAqTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,YAAtD,EAAoE,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,YAA7B,CAA5E,CArTW,EAsTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,aAAtD,EAAqE,QAAQ,CAAC,mBAAmB,CAAC,KAApB,CAA0B,aAA3B,CAA7E,CAtTW,EAuTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,eAAtD,EAAuE,QAAQ,CAAC,mBAAmB,CAAC,MAApB,CAA2B,EAA5B,CAA/E,CAvTW,EAyTZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,YAAtD,EAAoE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,YAA1B,CAA5E,CAzTW,EA0TZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,YAAtD,EAAoE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,YAA1B,CAA5E,CA1TW,EA2TZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,WAAtD,EAAmE,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,WAA7B,CAA3E,CA3TW,EA4TZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,YAAtD,EAAoE,QAAQ,CAAC,mBAAmB,CAAC,KAApB,CAA0B,YAA3B,CAA5E,CA5TW,EA8TZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,iBAAtD,EAAyE,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,iBAA7B,CAAjF,CA9TW,EA+TZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,kBAAtD,EAA0E,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,kBAA1B,CAAlF,CA/TW,EAgUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,SAAtD,EAAiE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,SAA1B,CAAzE,CAhUW,EAiUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,cAAtD,EAAsE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,cAA1B,CAA9E,CAjUW,EAmUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,UAAtD,EAAkE,QAAQ,CAAC,mBAAmB,CAAC,MAApB,CAA2B,IAA5B,CAA1E,CAnUW,EAoUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,aAAtD,EAAqE,QAAQ,CAAC,mBAAmB,CAAC,MAApB,CAA2B,OAA5B,CAA7E,CApUW,EAqUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,WAAtD,EAAmE,QAAQ,CAAC,mBAAmB,CAAC,MAApB,CAA2B,MAA5B,CAA3E,CArUW,EAsUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,iBAAtD,EAAyE,QAAQ,CAAC,mBAAmB,CAAC,MAApB,CAA2B,gBAA5B,CAAjF,CAtUW,EAuUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,eAAtD,EAAuE,QAAQ,CAAC,mBAAmB,CAAC,IAApB,CAAyB,gBAA1B,CAA/E,CAvUW,EAyUZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,aAAtD,EAAqE,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,aAA7B,CAA7E,CAzUW,EA0UZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,qBAAtD,EAA6E,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,uBAA7B,CAArF,CA1UW,EA2UZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,uBAAtD,EAA+E,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,wBAA7B,CAAvF,CA3UW,EA4UZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,cAAtC,CAAqD,YAAtD,EAAoE,QAAQ,CAAC,mBAAmB,CAAC,OAApB,CAA4B,cAA7B,CAA5E,CA5UW,EA8UZ;AACA,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,KAAvC,EAA8C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,GAAG,CAAC,UAAJ,CAAA,KAAA;AAAoB,CAA/E,CA/UW,EAgVZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,KAAvC,EAA8C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,GAAG,CAAC,UAAJ,CAAA,IAAA;AAAmB,CAA9E,CAhVW,EAiVZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,KAAvC,EAA8C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,GAAG,CAAC,UAAJ,CAAA,CAAA;AAAgB,CAA3E,CAjVW,EAkVZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,KAAvC,EAA8C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,GAAG,CAAC,UAAJ,CAAA,CAAA;AAAgB,CAA3E,CAlVW,EAmVZ,CAAC,CAAC,SAAS,CAAC,cAAV,CAAyB,YAAzB,CAAsC,MAAvC,EAA+C,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,SAAA,GAAG,CAAC,UAAJ,CAAA,MAAA;AAAqB,CAAjF,CAnVW,EAqVZ;AACA,CAAC,CAAC,SAAS,CAAC,QAAV,CAAmB,SAAnB,CAA6B,aAA9B,EAA6C,SAAS,gCAAT,CAA0C,GAA1C,EAA+C,EAA/C,EAAiD;AAAI,SAAO,iBAAiB,CAAC,EAAE,CAAC,YAAH,CAAgB,GAAhB,CAAD,EAAuB,EAAE,CAAC,MAAH,CAAU,GAAV,CAAvB,EAAuC,EAAE,CAAC,GAAH,CAAO,GAAP,CAAvC,CAAxB;AAA8E,CAAhL,CAtVW,EAuVZ,CAAC,CAAC,SAAS,CAAC,QAAV,CAAmB,SAAnB,CAA6B,MAA9B,EAAsC,SAAS,yBAAT,CAAmC,GAAnC,EAAwC,EAAxC,EAA0C;AAAI,SAAO,eAAe,CAAC,EAAE,CAAC,QAAH,CAAY,GAAZ,CAAD,CAAf,CAAkC,GAAlC,CAAP;AAAgD,CAApI,CAvVW,EAwVZ,CAAC,CAAC,SAAS,CAAC,QAAV,CAAmB,SAAnB,CAA6B,OAA9B,EAAuC,SAAS,0BAAT,CAAoC,GAApC,EAAyC,EAAzC,EAA2C;AAAI,SAAO,GAAG,CAAC,sBAAJ,EAAP;AAAsC,CAA5H,CAxVW,CAAhB;;AA2VA,SAAS,QAAT,CAAkB,CAAlB,EAA0D;AACtD,SAAO,UAAC,GAAD,EAAM,EAAN,EAAQ;AAAK,WAAA,CAAC,CAAE,EAAE,IAAI,EAAE,CAAC,CAAD,CAAR,IAAe,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAhB,IAAsC,GAAG,CAA3C,OAAC,CAAD;AAAoD,GAAxE;AACH;;AAED,SAAS,QAAT,CAAkB,OAAlB,EAAqC,CAArC,EAA8C;AAC1C,SAAO,OAAO,IAAI,QAAQ,CAAC,MAAT,CAAgB,CAAhB,IAAqB,QAAQ,CAAC,QAAT,CAAkB,CAAlB,CAArB,GAA2C;AAAA;AAA/C,GAAd;AACH;;AAED,SAAS,sBAAT,CAAgC,OAAhC,EAAiE,CAAjE,EAA0E;AACtE,UAAQ,CAAC,CAAC,WAAF,EAAR;AACI,SAAK,OAAL;AAAc,aAAO,OAAO,GAAA;AAAA;AAAd;;AACd,SAAK,OAAL;AAAc,aAAO,OAAO,GAAA;AAAA;AAAP,QAA2C;AAAA;AAAlD;;AACd,SAAK,IAAL;AAAW,aAAO,OAAO,GAAA;AAAA;AAAP,QAA2C;AAAA;AAAlD;;AACX,SAAK,KAAL;AAAY,aAAO,OAAO,GAAA;AAAA;AAAP,QAA2C;AAAA;AAAlD;;AACZ,SAAK,MAAL;AAAa,aAAO,OAAO,GAAA;AAAA;AAAd;;AACb,SAAK,QAAL;AAAe,aAAO,OAAO,GAAA;AAAA;AAAP,QAA0C;AAAA;AAAjD;;AACf,SAAK,OAAL;AAAc,aAAO,OAAO,GAAA;AAAA;AAAP,QAA0C;AAAA;AAAjD;;AACd,SAAK,MAAL;AAAa,aAAO,OAAO,GAAA;AAAA;AAAd;;AACb,SAAK,MAAL;AAAa,aAAO,OAAO,GAAA;AAAA;AAAd;;AACb,SAAK,MAAL;AAAa,aAAO,OAAO,GAAA;AAAA;AAAd;;AACb;AAAS,aAAO,OAAP;AAXb;AAaH;;AAED,SAAS,QAAT,CAA2B,GAA3B,EAA8C,EAA9C,EAAqD;AACjD,MAAM,GAAG,GAAQ,EAAjB;AACA,MAAI,CAAC,EAAL,EAAS,OAAO,GAAP;;AACT,MAAI,OAAO,EAAE,CAAC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,EAAE,CAAC,MAAxB,EAAgC,CAAC,GAAG,EAApC,EAAwC,CAAC,EAAzC,EAA6C,GAAG,CAAC,IAAJ,CAAS,EAAE,CAAC,CAAD,CAAF,CAAM,GAAN,CAAT;AAChD,GAFD,MAEO;AACH,QAAM,IAAI,GAAG,MAAM,CAAC,IAAP,CAAY,EAAZ,CAAb;;AACA,SAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,IAAI,CAAC,MAA1B,EAAkC,CAAC,GAAG,EAAtC,EAA0C,CAAC,EAA3C,EAA+C,GAAG,CAAC,IAAJ,CAAS,EAAE,CAAC,IAAI,CAAC,CAAD,CAAL,CAAF,CAAY,GAAZ,CAAT;AAClD;;AACD,SAAO,GAAP;AACH;;AAED,CAAC,YAAA;AACG,OAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,SAAA,GAAA,OAAhB,EAAgB,EAAA,GAAA,SAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAAyB;AAApB,QAAM,CAAC,GAAA,SAAA,CAAA,EAAA,CAAP;AACD,IAAA,wBAAwB,CAAC,SAAzB,CAAmC,CAAnC;AACH;AACJ,CAJD","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2018-2019 Mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { MolScriptSymbolTable as MolScript } from '../../language/symbol-table';\r\nimport { DefaultQueryRuntimeTable, QuerySymbolRuntime, QueryRuntimeArguments } from './base';\r\nimport { Queries, StructureProperties, StructureElement, UnitRing } from '../../../mol-model/structure';\r\nimport { ElementSymbol, BondType } from '../../../mol-model/structure/model/types';\r\nimport { SetUtils } from '../../../mol-util/set';\r\nimport { upperCaseAny } from '../../../mol-util/string';\r\nimport { VdwRadius, AtomWeight, AtomNumber } from '../../../mol-model/structure/model/properties/atomic';\r\nimport { cantorPairing } from '../../../mol-data/util';\r\nimport { bundleElementImpl, bundleGenerator } from '../../../mol-model/structure/query/queries/internal';\r\nimport { arrayEqual } from '../../../mol-util/array';\r\nvar C = QuerySymbolRuntime.Const;\r\nvar D = QuerySymbolRuntime.Dynamic;\r\nvar symbols = [\r\n    // ============= TYPES =============\r\n    C(MolScript.core.type.bool, function core_type_bool(ctx, v) { return !!v[0](ctx); }),\r\n    C(MolScript.core.type.num, function core_type_num(ctx, v) { return +v[0](ctx); }),\r\n    C(MolScript.core.type.str, function core_type_str(ctx, v) { return '' + v[0](ctx); }),\r\n    C(MolScript.core.type.list, function core_type_list(ctx, xs) { return QueryRuntimeArguments.forEachEval(xs, ctx, function (v, i, list) { return list[i] = v; }, []); }),\r\n    C(MolScript.core.type.set, function core_type_set(ctx, xs) { return QueryRuntimeArguments.forEachEval(xs, ctx, function core_type_set_argEval(v, i, set) { return set.add(v); }, new Set()); }),\r\n    C(MolScript.core.type.regex, function core_type_regex(ctx, v) { return new RegExp(v[0](ctx), (v[1] && v[1](ctx)) || ''); }),\r\n    C(MolScript.core.type.bitflags, function core_type_bitflags(ctx, v) { return +v[0](ctx); }),\r\n    C(MolScript.core.type.compositeKey, function core_type_compositeKey(ctx, xs) { return QueryRuntimeArguments.forEachEval(xs, ctx, function (v, i, list) { return list[i] = '' + v; }, []).join('-'); }),\r\n    // ============= LOGIC ================\r\n    C(MolScript.core.logic.not, function (ctx, v) { return !v[0](ctx); }),\r\n    C(MolScript.core.logic.and, function (ctx, xs) {\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                if (!xs[i](ctx))\r\n                    return false;\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                if (!xs[k](ctx))\r\n                    return false;\r\n            }\r\n        }\r\n        return true;\r\n    }),\r\n    C(MolScript.core.logic.or, function (ctx, xs) {\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                if (xs[i](ctx))\r\n                    return true;\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                if (xs[k](ctx))\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n    }),\r\n    // ============= RELATIONAL ================\r\n    C(MolScript.core.rel.eq, function (ctx, v) { return v[0](ctx) === v[1](ctx); }),\r\n    C(MolScript.core.rel.neq, function (ctx, v) { return v[0](ctx) !== v[1](ctx); }),\r\n    C(MolScript.core.rel.lt, function (ctx, v) { return v[0](ctx) < v[1](ctx); }),\r\n    C(MolScript.core.rel.lte, function (ctx, v) { return v[0](ctx) <= v[1](ctx); }),\r\n    C(MolScript.core.rel.gr, function (ctx, v) { return v[0](ctx) > v[1](ctx); }),\r\n    C(MolScript.core.rel.gre, function (ctx, v) { return v[0](ctx) >= v[1](ctx); }),\r\n    C(MolScript.core.rel.inRange, function (ctx, v) {\r\n        var x = v[0](ctx);\r\n        return x >= v[1](ctx) && x <= v[2](ctx);\r\n    }),\r\n    // ============= ARITHMETIC ================\r\n    C(MolScript.core.math.add, function (ctx, xs) {\r\n        var ret = 0;\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret += xs[i](ctx);\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret += xs[k](ctx);\r\n            }\r\n        }\r\n        return ret;\r\n    }),\r\n    C(MolScript.core.math.sub, function (ctx, xs) {\r\n        var ret = 0;\r\n        if (typeof xs.length === 'number') {\r\n            if (xs.length === 1)\r\n                return -xs[0](ctx);\r\n            ret = xs[0](ctx) || 0;\r\n            for (var i = 1, _i = xs.length; i < _i; i++)\r\n                ret -= xs[i](ctx);\r\n        }\r\n        else {\r\n            var keys = Object.keys(xs);\r\n            if (keys.length === 1)\r\n                return -xs[keys[0]](ctx);\r\n            ret = xs[keys[0]](ctx) || 0;\r\n            for (var i = 1, _i = keys.length; i < _i; i++)\r\n                ret -= xs[keys[i]](ctx);\r\n        }\r\n        return ret;\r\n    }),\r\n    C(MolScript.core.math.mult, function (ctx, xs) {\r\n        var ret = 1;\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret *= xs[i](ctx);\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret *= xs[k](ctx);\r\n            }\r\n        }\r\n        return ret;\r\n    }),\r\n    C(MolScript.core.math.div, function (ctx, v) { return v[0](ctx) / v[1](ctx); }),\r\n    C(MolScript.core.math.pow, function (ctx, v) { return Math.pow(v[0](ctx), v[1](ctx)); }),\r\n    C(MolScript.core.math.mod, function (ctx, v) { return v[0](ctx) % v[1](ctx); }),\r\n    C(MolScript.core.math.min, function (ctx, xs) {\r\n        var ret = Number.POSITIVE_INFINITY;\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret = Math.min(xs[i](ctx), ret);\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret = Math.min(xs[k](ctx), ret);\r\n            }\r\n        }\r\n        return ret;\r\n    }),\r\n    C(MolScript.core.math.max, function (ctx, xs) {\r\n        var ret = Number.NEGATIVE_INFINITY;\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret = Math.max(xs[i](ctx), ret);\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret = Math.max(xs[k](ctx), ret);\r\n            }\r\n        }\r\n        return ret;\r\n    }),\r\n    C(MolScript.core.math.floor, function (ctx, v) { return Math.floor(v[0](ctx)); }),\r\n    C(MolScript.core.math.ceil, function (ctx, v) { return Math.ceil(v[0](ctx)); }),\r\n    C(MolScript.core.math.roundInt, function (ctx, v) { return Math.round(v[0](ctx)); }),\r\n    C(MolScript.core.math.abs, function (ctx, v) { return Math.abs(v[0](ctx)); }),\r\n    C(MolScript.core.math.sqrt, function (ctx, v) { return Math.sqrt(v[0](ctx)); }),\r\n    C(MolScript.core.math.cbrt, function (ctx, v) { return Math.cbrt(v[0](ctx)); }),\r\n    C(MolScript.core.math.sin, function (ctx, v) { return Math.sin(v[0](ctx)); }),\r\n    C(MolScript.core.math.cos, function (ctx, v) { return Math.cos(v[0](ctx)); }),\r\n    C(MolScript.core.math.tan, function (ctx, v) { return Math.tan(v[0](ctx)); }),\r\n    C(MolScript.core.math.asin, function (ctx, v) { return Math.asin(v[0](ctx)); }),\r\n    C(MolScript.core.math.acos, function (ctx, v) { return Math.acos(v[0](ctx)); }),\r\n    C(MolScript.core.math.atan, function (ctx, v) { return Math.atan(v[0](ctx)); }),\r\n    C(MolScript.core.math.sinh, function (ctx, v) { return Math.sinh(v[0](ctx)); }),\r\n    C(MolScript.core.math.cosh, function (ctx, v) { return Math.cosh(v[0](ctx)); }),\r\n    C(MolScript.core.math.tanh, function (ctx, v) { return Math.tanh(v[0](ctx)); }),\r\n    C(MolScript.core.math.exp, function (ctx, v) { return Math.exp(v[0](ctx)); }),\r\n    C(MolScript.core.math.log, function (ctx, v) { return Math.log(v[0](ctx)); }),\r\n    C(MolScript.core.math.log10, function (ctx, v) { return Math.log10(v[0](ctx)); }),\r\n    C(MolScript.core.math.atan2, function (ctx, v) { return Math.atan2(v[0](ctx), v[1](ctx)); }),\r\n    // ============= STRING ================\r\n    C(MolScript.core.str.match, function (ctx, v) { return v[0](ctx).test(v[1](ctx)); }),\r\n    C(MolScript.core.str.concat, function (ctx, xs) {\r\n        var ret = [];\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret.push(xs[i](ctx).toString());\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret.push(xs[k](ctx).toString());\r\n            }\r\n        }\r\n        return ret.join('');\r\n    }),\r\n    // ============= LIST ================\r\n    C(MolScript.core.list.getAt, function (ctx, v) { return v[0](ctx)[v[1](ctx)]; }),\r\n    C(MolScript.core.list.equal, function (ctx, v) { return arrayEqual(v[0](ctx), v[1](ctx)); }),\r\n    // ============= SET ================\r\n    C(MolScript.core.set.has, function core_set_has(ctx, v) { return v[0](ctx).has(v[1](ctx)); }),\r\n    C(MolScript.core.set.isSubset, function core_set_isSubset(ctx, v) { return SetUtils.isSuperset(v[1](ctx), v[0](ctx)); }),\r\n    // ============= FLAGS ================\r\n    C(MolScript.core.flags.hasAny, function (ctx, v) {\r\n        var test = v[1](ctx);\r\n        var tested = v[0](ctx);\r\n        if (!test)\r\n            return !!tested;\r\n        return (tested & test) !== 0;\r\n    }),\r\n    C(MolScript.core.flags.hasAll, function (ctx, v) {\r\n        var test = v[1](ctx);\r\n        var tested = v[0](ctx);\r\n        if (!test)\r\n            return !tested;\r\n        return (tested & test) === test;\r\n    }),\r\n    // Structure\r\n    // ============= TYPES ================\r\n    C(MolScript.structureQuery.type.elementSymbol, function (ctx, v) { return ElementSymbol(v[0](ctx)); }),\r\n    C(MolScript.structureQuery.type.atomName, function (ctx, v) { return upperCaseAny(v[0](ctx)); }),\r\n    C(MolScript.structureQuery.type.bondFlags, function (ctx, xs) {\r\n        var ret = 0 /* None */;\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret = bondFlag(ret, xs[i](ctx));\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret = bondFlag(ret, xs[k](ctx));\r\n            }\r\n        }\r\n        return ret;\r\n    }),\r\n    C(MolScript.structureQuery.type.ringFingerprint, function (ctx, xs) { return UnitRing.elementFingerprint(getArray(ctx, xs)); }),\r\n    C(MolScript.structureQuery.type.secondaryStructureFlags, function (ctx, xs) {\r\n        var ret = 0 /* None */;\r\n        if (typeof xs.length === 'number') {\r\n            for (var i = 0, _i = xs.length; i < _i; i++)\r\n                ret = secondaryStructureFlag(ret, xs[i](ctx));\r\n        }\r\n        else {\r\n            for (var _a = 0, _b = Object.keys(xs); _a < _b.length; _a++) {\r\n                var k = _b[_a];\r\n                ret = secondaryStructureFlag(ret, xs[k](ctx));\r\n            }\r\n        }\r\n        return ret;\r\n    }),\r\n    // TODO:\r\n    // C(MolScript.structureQuery.type.entityType, (ctx, v) => StructureRuntime.Common.entityType(v[0](ctx))),\r\n    // C(MolScript.structureQuery.type.authResidueId, (ctx, v) => ResidueIdentifier.auth(v[0](ctx), v[1](ctx), v[2] && v[2](ctx))),\r\n    // C(MolScript.structureQuery.type.labelResidueId, (ctx, v) => ResidueIdentifier.label(v[0](ctx), v[1](ctx), v[2](ctx), v[3] && v[3](ctx))),\r\n    // ============= SLOTS ================\r\n    // TODO: slots might not be needed after all: reducer simply pushes/pops current element\r\n    // C(MolScript.structureQuery.slot.element, (ctx, _) => ctx_.element),\r\n    // C(MolScript.structureQuery.slot.elementSetReduce, (ctx, _) => ctx_.element),\r\n    // ============= FILTERS ================\r\n    D(MolScript.structureQuery.filter.pick, function (ctx, xs) { return Queries.filters.pick(xs[0], xs['test'])(ctx); }),\r\n    D(MolScript.structureQuery.filter.first, function (ctx, xs) { return Queries.filters.first(xs[0])(ctx); }),\r\n    D(MolScript.structureQuery.filter.withSameAtomProperties, function (ctx, xs) { return Queries.filters.withSameAtomProperties(xs[0], xs['source'], xs['property'])(ctx); }),\r\n    D(MolScript.structureQuery.filter.intersectedBy, function (ctx, xs) { return Queries.filters.areIntersectedBy(xs[0], xs['by'])(ctx); }),\r\n    D(MolScript.structureQuery.filter.within, function (ctx, xs) { return Queries.filters.within({\r\n        query: xs[0],\r\n        target: xs['target'],\r\n        minRadius: xs['min-radius'],\r\n        maxRadius: xs['max-radius'],\r\n        elementRadius: xs['atom-radius'],\r\n        invert: xs['invert']\r\n    })(ctx); }),\r\n    D(MolScript.structureQuery.filter.isConnectedTo, function (ctx, xs) { return Queries.filters.isConnectedTo({\r\n        query: xs[0],\r\n        target: xs['target'],\r\n        disjunct: xs['disjunct'],\r\n        invert: xs['invert'],\r\n        bondTest: xs['bond-test']\r\n    })(ctx); }),\r\n    // ============= GENERATORS ================\r\n    D(MolScript.structureQuery.generator.atomGroups, function structureQuery_generator_atomGroups(ctx, xs) {\r\n        return Queries.generators.atoms({\r\n            entityTest: xs['entity-test'],\r\n            chainTest: xs['chain-test'],\r\n            residueTest: xs['residue-test'],\r\n            atomTest: xs['atom-test'],\r\n            groupBy: xs['group-by']\r\n        })(ctx);\r\n    }),\r\n    D(MolScript.structureQuery.generator.all, function structureQuery_generator_all(ctx) { return Queries.generators.all(ctx); }),\r\n    D(MolScript.structureQuery.generator.empty, function structureQuery_generator_empty(ctx) { return Queries.generators.none(ctx); }),\r\n    D(MolScript.structureQuery.generator.bondedAtomicPairs, function structureQuery_generator_bondedAtomicPairs(ctx, xs) {\r\n        return Queries.generators.bondedAtomicPairs(xs && xs[0])(ctx);\r\n    }),\r\n    D(MolScript.structureQuery.generator.rings, function structureQuery_generator_rings(ctx, xs) {\r\n        var _a, _b;\r\n        return Queries.generators.rings((_a = xs === null || xs === void 0 ? void 0 : xs['fingerprint']) === null || _a === void 0 ? void 0 : _a.call(xs, ctx), (_b = xs === null || xs === void 0 ? void 0 : xs['only-aromatic']) === null || _b === void 0 ? void 0 : _b.call(xs, ctx))(ctx);\r\n    }),\r\n    // ============= MODIFIERS ================\r\n    D(MolScript.structureQuery.modifier.includeSurroundings, function structureQuery_modifier_includeSurroundings(ctx, xs) {\r\n        return Queries.modifiers.includeSurroundings(xs[0], {\r\n            radius: xs['radius'](ctx),\r\n            wholeResidues: !!(xs['as-whole-residues'] && xs['as-whole-residues'](ctx)),\r\n            elementRadius: xs['atom-radius']\r\n        })(ctx);\r\n    }),\r\n    D(MolScript.structureQuery.modifier.surroundingLigands, function structureQuery_modifier_includeSurroundingLigands(ctx, xs) {\r\n        return Queries.modifiers.surroundingLigands({\r\n            query: xs[0],\r\n            radius: xs['radius'](ctx),\r\n            includeWater: !!(xs['include-water'] && xs['include-water'](ctx)),\r\n        })(ctx);\r\n    }),\r\n    D(MolScript.structureQuery.modifier.wholeResidues, function structureQuery_modifier_wholeResidues(ctx, xs) { return Queries.modifiers.wholeResidues(xs[0])(ctx); }),\r\n    D(MolScript.structureQuery.modifier.union, function structureQuery_modifier_union(ctx, xs) { return Queries.modifiers.union(xs[0])(ctx); }),\r\n    D(MolScript.structureQuery.modifier.expandProperty, function structureQuery_modifier_expandProperty(ctx, xs) { return Queries.modifiers.expandProperty(xs[0], xs['property'])(ctx); }),\r\n    D(MolScript.structureQuery.modifier.exceptBy, function structureQuery_modifier_exceptBy(ctx, xs) { return Queries.modifiers.exceptBy(xs[0], xs['by'])(ctx); }),\r\n    D(MolScript.structureQuery.modifier.includeConnected, function structureQuery_modifier_includeConnected(ctx, xs) {\r\n        var _a, _b;\r\n        return Queries.modifiers.includeConnected({\r\n            query: xs[0],\r\n            bondTest: xs['bond-test'],\r\n            wholeResidues: !!(xs['as-whole-residues'] && xs['as-whole-residues'](ctx)),\r\n            layerCount: (xs['layer-count'] && xs['layer-count'](ctx)) || 1,\r\n            fixedPoint: (_b = (_a = xs['fixed-point']) === null || _a === void 0 ? void 0 : _a.call(xs, ctx)) !== null && _b !== void 0 ? _b : false\r\n        })(ctx);\r\n    }),\r\n    // ============= COMBINATORS ================\r\n    D(MolScript.structureQuery.combinator.merge, function (ctx, xs) { return Queries.combinators.merge(xs)(ctx); }),\r\n    // ============= ATOM PROPERTIES ================\r\n    // ~~~ CORE ~~~\r\n    D(MolScript.structureQuery.atomProperty.core.elementSymbol, atomProp(StructureProperties.atom.type_symbol)),\r\n    D(MolScript.structureQuery.atomProperty.core.vdw, function (ctx, xs) { return VdwRadius(StructureProperties.atom.type_symbol((xs && xs[0] && xs[0](ctx)) || ctx.element)); }),\r\n    D(MolScript.structureQuery.atomProperty.core.mass, function (ctx, xs) { return AtomWeight(StructureProperties.atom.type_symbol((xs && xs[0] && xs[0](ctx)) || ctx.element)); }),\r\n    D(MolScript.structureQuery.atomProperty.core.atomicNumber, function (ctx, xs) { return AtomNumber(StructureProperties.atom.type_symbol((xs && xs[0] && xs[0](ctx)) || ctx.element)); }),\r\n    D(MolScript.structureQuery.atomProperty.core.x, atomProp(StructureProperties.atom.x)),\r\n    D(MolScript.structureQuery.atomProperty.core.y, atomProp(StructureProperties.atom.y)),\r\n    D(MolScript.structureQuery.atomProperty.core.z, atomProp(StructureProperties.atom.z)),\r\n    D(MolScript.structureQuery.atomProperty.core.sourceIndex, atomProp(StructureProperties.atom.sourceIndex)),\r\n    D(MolScript.structureQuery.atomProperty.core.operatorName, atomProp(StructureProperties.unit.operator_name)),\r\n    D(MolScript.structureQuery.atomProperty.core.modelIndex, atomProp(StructureProperties.unit.model_index)),\r\n    D(MolScript.structureQuery.atomProperty.core.modelLabel, atomProp(StructureProperties.unit.model_label)),\r\n    D(MolScript.structureQuery.atomProperty.core.atomKey, function (ctx, xs) {\r\n        var e = (xs && xs[0] && xs[0](ctx)) || ctx.element;\r\n        return cantorPairing(e.unit.id, e.element);\r\n    }),\r\n    // TODO:\r\n    // D(MolScript.structureQuery.atomProperty.core.bondCount, (ctx, _) => ),\r\n    // ~~~ TOPOLOGY ~~~\r\n    // TODO\r\n    // ~~~ MACROMOLECULAR ~~~\r\n    // TODO:\r\n    // // identifiers\r\n    // labelResidueId: prop((env, v) => ResidueIdentifier.labelOfResidueIndex(env.context.model, getAddress(env, v).residue)),\r\n    // authResidueId: prop((env, v) => ResidueIdentifier.authOfResidueIndex(env.context.model, getAddress(env, v).residue)),\r\n    // keys\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.residueKey, function (ctx, xs) { return StructureElement.residueIndex((xs && xs[0] && xs[0](ctx)) || ctx.element); }),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.chainKey, function (ctx, xs) { return StructureElement.chainIndex((xs && xs[0] && xs[0](ctx)) || ctx.element); }),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.entityKey, function (ctx, xs) { return StructureElement.entityIndex((xs && xs[0] && xs[0](ctx)) || ctx.element); }),\r\n    // mmCIF\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.id, atomProp(StructureProperties.atom.id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.isHet, function (ctx, xs) { return StructureProperties.residue.group_PDB((xs && xs[0] && xs[0](ctx)) || ctx.element) !== 'ATOM'; }),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.label_atom_id, atomProp(StructureProperties.atom.label_atom_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.label_alt_id, atomProp(StructureProperties.atom.label_alt_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.label_comp_id, atomProp(StructureProperties.atom.label_comp_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.label_seq_id, atomProp(StructureProperties.residue.label_seq_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.label_asym_id, atomProp(StructureProperties.chain.label_asym_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.label_entity_id, atomProp(StructureProperties.entity.id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.auth_atom_id, atomProp(StructureProperties.atom.auth_atom_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.auth_comp_id, atomProp(StructureProperties.atom.auth_comp_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.auth_seq_id, atomProp(StructureProperties.residue.auth_seq_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.auth_asym_id, atomProp(StructureProperties.chain.auth_asym_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.pdbx_PDB_ins_code, atomProp(StructureProperties.residue.pdbx_PDB_ins_code)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.pdbx_formal_charge, atomProp(StructureProperties.atom.pdbx_formal_charge)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.occupancy, atomProp(StructureProperties.atom.occupancy)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.B_iso_or_equiv, atomProp(StructureProperties.atom.B_iso_or_equiv)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.entityType, atomProp(StructureProperties.entity.type)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.entitySubtype, atomProp(StructureProperties.entity.subtype)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.entityPrdId, atomProp(StructureProperties.entity.prd_id)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.entityDescription, atomProp(StructureProperties.entity.pdbx_description)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.objectPrimitive, atomProp(StructureProperties.unit.object_primitive)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.isNonStandard, atomProp(StructureProperties.residue.isNonStandard)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.secondaryStructureKey, atomProp(StructureProperties.residue.secondary_structure_key)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.secondaryStructureFlags, atomProp(StructureProperties.residue.secondary_structure_type)),\r\n    D(MolScript.structureQuery.atomProperty.macromolecular.chemCompType, atomProp(StructureProperties.residue.chem_comp_type)),\r\n    // ============= BOND PROPERTIES ================\r\n    D(MolScript.structureQuery.bondProperty.order, function (ctx, xs) { return ctx.atomicBond.order; }),\r\n    D(MolScript.structureQuery.bondProperty.flags, function (ctx, xs) { return ctx.atomicBond.type; }),\r\n    D(MolScript.structureQuery.bondProperty.atomA, function (ctx, xs) { return ctx.atomicBond.a; }),\r\n    D(MolScript.structureQuery.bondProperty.atomB, function (ctx, xs) { return ctx.atomicBond.b; }),\r\n    D(MolScript.structureQuery.bondProperty.length, function (ctx, xs) { return ctx.atomicBond.length; }),\r\n    // Internal\r\n    D(MolScript.internal.generator.bundleElement, function internal_generator_bundleElement(ctx, xs) { return bundleElementImpl(xs.groupedUnits(ctx), xs.ranges(ctx), xs.set(ctx)); }),\r\n    D(MolScript.internal.generator.bundle, function internal_generator_bundle(ctx, xs) { return bundleGenerator(xs.elements(ctx))(ctx); }),\r\n    D(MolScript.internal.generator.current, function internal_generator_current(ctx, xs) { return ctx.tryGetCurrentSelection(); }),\r\n];\r\nfunction atomProp(p) {\r\n    return function (ctx, xs) { return p((xs && xs[0] && xs[0](ctx)) || ctx.element); };\r\n}\r\nfunction bondFlag(current, f) {\r\n    return current | (BondType.isName(f) ? BondType.fromName(f) : 0 /* None */);\r\n}\r\nfunction secondaryStructureFlag(current, f) {\r\n    switch (f.toLowerCase()) {\r\n        case 'helix': return current | 2 /* Helix */;\r\n        case 'alpha': return current | 2 /* Helix */ | 4096 /* HelixAlpha */;\r\n        case 'pi': return current | 2 /* Helix */ | 32768 /* HelixPi */;\r\n        case '310': return current | 2 /* Helix */ | 2048 /* Helix3Ten */;\r\n        case 'beta': return current | 4 /* Beta */;\r\n        case 'strand': return current | 4 /* Beta */ | 4194304 /* BetaStrand */;\r\n        case 'sheet': return current | 4 /* Beta */ | 8388608 /* BetaSheet */;\r\n        case 'turn': return current | 16 /* Turn */;\r\n        case 'bend': return current | 8 /* Bend */;\r\n        case 'coil': return current | 536870912 /* NA */;\r\n        default: return current;\r\n    }\r\n}\r\nfunction getArray(ctx, xs) {\r\n    var ret = [];\r\n    if (!xs)\r\n        return ret;\r\n    if (typeof xs.length === 'number') {\r\n        for (var i = 0, _i = xs.length; i < _i; i++)\r\n            ret.push(xs[i](ctx));\r\n    }\r\n    else {\r\n        var keys = Object.keys(xs);\r\n        for (var i = 1, _i = keys.length; i < _i; i++)\r\n            ret.push(xs[keys[i]](ctx));\r\n    }\r\n    return ret;\r\n}\r\n(function () {\r\n    for (var _a = 0, symbols_1 = symbols; _a < symbols_1.length; _a++) {\r\n        var s = symbols_1[_a];\r\n        DefaultQueryRuntimeTable.addSymbol(s);\r\n    }\r\n})();\r\n//# sourceMappingURL=table.js.map"]},"metadata":{},"sourceType":"module"}