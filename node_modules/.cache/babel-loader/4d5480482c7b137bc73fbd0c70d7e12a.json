{"ast":null,"code":"/**\r\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\nexport function getArrayBounds(rowCount, params) {\n  var start = params && typeof params.start !== 'undefined' ? Math.max(Math.min(params.start, rowCount - 1), 0) : 0;\n  var end = params && typeof params.end !== 'undefined' ? Math.min(params.end, rowCount) : rowCount;\n  return {\n    start: start,\n    end: end\n  };\n}\nexport function createArray(rowCount, params) {\n  var c = params && typeof params.array !== 'undefined' ? params.array : Array;\n\n  var _a = getArrayBounds(rowCount, params),\n      start = _a.start,\n      end = _a.end;\n\n  return {\n    array: new c(end - start),\n    start: start,\n    end: end\n  };\n}\nexport function fillArrayValues(value, target, start) {\n  for (var i = 0, _e = target.length; i < _e; i++) target[i] = value(start + i);\n\n  return target;\n}\nexport function createAndFillArray(rowCount, value, params) {\n  var _a = createArray(rowCount, params),\n      array = _a.array,\n      start = _a.start;\n\n  return fillArrayValues(value, array, start);\n}\nexport function isTypedArray(data) {\n  return !!data.buffer && typeof data.byteLength === 'number' && typeof data.BYTES_PER_ELEMENT === 'number';\n}\nexport function typedArrayWindow(data, params) {\n  var constructor = data.constructor,\n      buffer = data.buffer,\n      length = data.length,\n      byteOffset = data.byteOffset,\n      BYTES_PER_ELEMENT = data.BYTES_PER_ELEMENT;\n\n  var _a = getArrayBounds(length, params),\n      start = _a.start,\n      end = _a.end;\n\n  if (start === 0 && end === length) return data;\n  return new constructor(buffer, byteOffset + BYTES_PER_ELEMENT * start, Math.min(length, end - start));\n}","map":{"version":3,"sources":["../../../src/mol-data/db/column-helpers.ts"],"names":[],"mappings":"AAAA;;;;AAIG;AAIH,OAAM,SAAU,cAAV,CAAyB,QAAzB,EAA2C,MAA3C,EAA6E;AAC/E,MAAM,KAAK,GAAG,MAAM,IAAI,OAAO,MAAM,CAAC,KAAd,KAAwB,WAAlC,GAAgD,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,KAAhB,EAAuB,QAAQ,GAAG,CAAlC,CAAT,EAA+C,CAA/C,CAAhD,GAAoG,CAAlH;AACA,MAAM,GAAG,GAAG,MAAM,IAAI,OAAO,MAAM,CAAC,GAAd,KAAsB,WAAhC,GAA8C,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,GAAhB,EAAqB,QAArB,CAA9C,GAA+E,QAA3F;AACA,SAAO;AAAE,IAAA,KAAK,EAAA,KAAP;AAAS,IAAA,GAAG,EAAA;AAAZ,GAAP;AACH;AAED,OAAM,SAAU,WAAV,CAAsB,QAAtB,EAAwC,MAAxC,EAA0E;AAC5E,MAAM,CAAC,GAAG,MAAM,IAAI,OAAO,MAAM,CAAC,KAAd,KAAwB,WAAlC,GAAgD,MAAM,CAAC,KAAvD,GAA+D,KAAzE;;AACM,MAAA,EAAA,GAAiB,cAAc,CAAC,QAAD,EAAW,MAAX,CAA/B;AAAA,MAAE,KAAK,GAAA,EAAA,CAAA,KAAP;AAAA,MAAS,GAAG,GAAA,EAAA,CAAA,GAAZ;;AACN,SAAO;AAAE,IAAA,KAAK,EAAE,IAAI,CAAJ,CAAM,GAAG,GAAG,KAAZ,CAAT;AAAsC,IAAA,KAAK,EAAA,KAA3C;AAA6C,IAAA,GAAG,EAAA;AAAhD,GAAP;AACH;AAED,OAAM,SAAU,eAAV,CAA0B,KAA1B,EAAuD,MAAvD,EAAsE,KAAtE,EAAmF;AACrF,OAAK,IAAI,CAAC,GAAG,CAAR,EAAW,EAAE,GAAG,MAAM,CAAC,MAA5B,EAAoC,CAAC,GAAG,EAAxC,EAA4C,CAAC,EAA7C,EAAiD,MAAM,CAAC,CAAD,CAAN,GAAY,KAAK,CAAC,KAAK,GAAG,CAAT,CAAjB;;AACjD,SAAO,MAAP;AACH;AAED,OAAM,SAAU,kBAAV,CAA6B,QAA7B,EAA+C,KAA/C,EAA4E,MAA5E,EAA8G;AAC1G,MAAA,EAAA,GAAmB,WAAW,CAAC,QAAD,EAAW,MAAX,CAA9B;AAAA,MAAE,KAAK,GAAA,EAAA,CAAA,KAAP;AAAA,MAAS,KAAK,GAAA,EAAA,CAAA,KAAd;;AACN,SAAO,eAAe,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAtB;AACH;AAED,OAAM,SAAU,YAAV,CAAuB,IAAvB,EAAgC;AAClC,SAAO,CAAC,CAAC,IAAI,CAAC,MAAP,IAAiB,OAAO,IAAI,CAAC,UAAZ,KAA2B,QAA5C,IAAwD,OAAO,IAAI,CAAC,iBAAZ,KAAkC,QAAjG;AACH;AAED,OAAM,SAAU,gBAAV,CAA2B,IAA3B,EAAsC,MAAtC,EAAwE;AAClE,MAAA,WAAW,GAAoD,IAAI,CAAxD,WAAX;AAAA,MAAa,MAAM,GAA4C,IAAI,CAAhD,MAAnB;AAAA,MAAqB,MAAM,GAAoC,IAAI,CAAxC,MAA3B;AAAA,MAA6B,UAAU,GAAwB,IAAI,CAA5B,UAAvC;AAAA,MAAyC,iBAAiB,GAAK,IAAI,CAAT,iBAA1D;;AACF,MAAA,EAAA,GAAiB,cAAc,CAAC,MAAD,EAAS,MAAT,CAA/B;AAAA,MAAE,KAAK,GAAA,EAAA,CAAA,KAAP;AAAA,MAAS,GAAG,GAAA,EAAA,CAAA,GAAZ;;AACN,MAAI,KAAK,KAAK,CAAV,IAAe,GAAG,KAAK,MAA3B,EAAmC,OAAO,IAAP;AACnC,SAAO,IAAI,WAAJ,CAAgB,MAAhB,EAAwB,UAAU,GAAG,iBAAiB,GAAG,KAAzD,EAAgE,IAAI,CAAC,GAAL,CAAS,MAAT,EAAiB,GAAG,GAAG,KAAvB,CAAhE,CAAP;AACH","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nexport function getArrayBounds(rowCount, params) {\r\n    var start = params && typeof params.start !== 'undefined' ? Math.max(Math.min(params.start, rowCount - 1), 0) : 0;\r\n    var end = params && typeof params.end !== 'undefined' ? Math.min(params.end, rowCount) : rowCount;\r\n    return { start: start, end: end };\r\n}\r\nexport function createArray(rowCount, params) {\r\n    var c = params && typeof params.array !== 'undefined' ? params.array : Array;\r\n    var _a = getArrayBounds(rowCount, params), start = _a.start, end = _a.end;\r\n    return { array: new c(end - start), start: start, end: end };\r\n}\r\nexport function fillArrayValues(value, target, start) {\r\n    for (var i = 0, _e = target.length; i < _e; i++)\r\n        target[i] = value(start + i);\r\n    return target;\r\n}\r\nexport function createAndFillArray(rowCount, value, params) {\r\n    var _a = createArray(rowCount, params), array = _a.array, start = _a.start;\r\n    return fillArrayValues(value, array, start);\r\n}\r\nexport function isTypedArray(data) {\r\n    return !!data.buffer && typeof data.byteLength === 'number' && typeof data.BYTES_PER_ELEMENT === 'number';\r\n}\r\nexport function typedArrayWindow(data, params) {\r\n    var constructor = data.constructor, buffer = data.buffer, length = data.length, byteOffset = data.byteOffset, BYTES_PER_ELEMENT = data.BYTES_PER_ELEMENT;\r\n    var _a = getArrayBounds(length, params), start = _a.start, end = _a.end;\r\n    if (start === 0 && end === length)\r\n        return data;\r\n    return new constructor(buffer, byteOffset + BYTES_PER_ELEMENT * start, Math.min(length, end - start));\r\n}\r\n//# sourceMappingURL=column-helpers.js.map"]},"metadata":{},"sourceType":"module"}