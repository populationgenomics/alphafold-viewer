{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\n/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\n\nimport * as React from 'react';\nimport { Color } from '../../mol-util/color';\nimport { Icon, ArrowRightSvg, ArrowDropDownSvg, RemoveSvg, AddSvg } from './icons';\n\nvar ControlGroup =\n/** @class */\nfunction (_super) {\n  __extends(ControlGroup, _super);\n\n  function ControlGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isExpanded: !!_this.props.initialExpanded\n    };\n\n    _this.headerClicked = function () {\n      if (_this.props.onHeaderClick) {\n        _this.props.onHeaderClick();\n      } else {\n        _this.setState({\n          isExpanded: !_this.state.isExpanded\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  ControlGroup.prototype.render = function () {\n    var groupClassName = this.props.hideOffset ? 'msp-control-group-children' : 'msp-control-group-children msp-control-offset';\n    if (this.props.childrenClassName) groupClassName += ' ' + this.props.childrenClassName; // TODO: customize header style (bg color, togle button etc)\n\n    return _jsxs(\"div\", __assign({\n      className: 'msp-control-group-wrapper',\n      style: {\n        position: 'relative',\n        marginTop: this.props.noTopMargin ? 0 : void 0\n      }\n    }, {\n      children: [_jsx(\"div\", __assign({\n        className: 'msp-control-group-header',\n        style: {\n          marginLeft: this.props.headerLeftMargin\n        },\n        title: this.props.title\n      }, {\n        children: _jsxs(Button, __assign({\n          onClick: this.headerClicked\n        }, {\n          children: [!this.props.hideExpander && _jsx(Icon, {\n            svg: this.state.isExpanded ? ArrowRightSvg : ArrowDropDownSvg\n          }, void 0), this.props.topRightIcon && _jsx(Icon, {\n            svg: this.props.topRightIcon,\n            style: {\n              position: 'absolute',\n              right: '2px',\n              top: 0\n            }\n          }, void 0), _jsx(\"b\", {\n            children: this.props.header\n          }, void 0)]\n        }), void 0)\n      }), void 0), this.state.isExpanded && _jsx(\"div\", __assign({\n        className: groupClassName,\n        style: {\n          display: this.state.isExpanded ? 'block' : 'none',\n          maxHeight: this.props.maxHeight,\n          overflow: 'hidden',\n          overflowY: 'auto'\n        }\n      }, {\n        children: this.props.children\n      }), void 0)]\n    }), void 0);\n  };\n\n  return ControlGroup;\n}(React.Component);\n\nexport { ControlGroup };\n\nfunction _id(x) {\n  return x;\n}\n\nvar TextInput =\n/** @class */\nfunction (_super) {\n  __extends(TextInput, _super);\n\n  function TextInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.input = React.createRef();\n    _this.delayHandle = void 0;\n    _this.pendingValue = void 0;\n    _this.state = {\n      originalValue: '',\n      value: ''\n    };\n\n    _this.onBlur = function () {\n      _this.setState({\n        value: '' + _this.state.originalValue\n      });\n\n      if (_this.props.onBlur) _this.props.onBlur();\n    };\n\n    _this.raiseOnChange = function () {\n      if (_this.pendingValue === void 0) return;\n\n      _this.props.onChange(_this.pendingValue);\n\n      _this.pendingValue = void 0;\n    };\n\n    _this.onChange = function (e) {\n      var value = e.target.value;\n      var isInvalid = _this.props.isValid && !_this.props.isValid(value) || _this.props.numeric && Number.isNaN(+value);\n\n      if (isInvalid) {\n        _this.clearTimeout();\n\n        _this.setState({\n          value: value\n        });\n\n        return;\n      }\n\n      if (_this.props.numeric) {\n        _this.setState({\n          value: value\n        }, function () {\n          return _this.triggerChanged(value, +value);\n        });\n      } else {\n        var converted_1 = (_this.props.toValue || _id)(value);\n\n        var formatted_1 = (_this.props.fromValue || _id)(converted_1);\n\n        _this.setState({\n          value: formatted_1\n        }, function () {\n          return _this.triggerChanged(formatted_1, converted_1);\n        });\n      }\n    };\n\n    _this.onKeyUp = function (e) {\n      if (e.charCode === 27 || e.keyCode === 27 || e.key === 'Escape') {\n        if (_this.props.blurOnEscape && _this.input.current) {\n          _this.input.current.blur();\n        }\n      }\n    };\n\n    _this.onKeyPress = function (e) {\n      if (e.keyCode === 13 || e.charCode === 13 || e.key === 'Enter') {\n        if (_this.isPending) {\n          _this.clearTimeout();\n\n          _this.raiseOnChange();\n        }\n\n        if (_this.props.blurOnEnter && _this.input.current) {\n          _this.input.current.blur();\n        }\n\n        if (_this.props.onEnter) _this.props.onEnter();\n      }\n\n      e.stopPropagation();\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(TextInput.prototype, \"isPending\", {\n    get: function () {\n      return typeof this.delayHandle !== 'undefined';\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  TextInput.prototype.clearTimeout = function () {\n    if (this.isPending) {\n      clearTimeout(this.delayHandle);\n      this.delayHandle = void 0;\n    }\n  };\n\n  TextInput.prototype.triggerChanged = function (formatted, converted) {\n    this.clearTimeout();\n    if (formatted === this.state.originalValue) return;\n\n    if (this.props.delayMs) {\n      this.pendingValue = converted;\n      this.delayHandle = setTimeout(this.raiseOnChange, this.props.delayMs);\n    } else {\n      this.props.onChange(converted);\n    }\n  };\n\n  TextInput.getDerivedStateFromProps = function (props, state) {\n    var value = props.fromValue ? props.fromValue(props.value) : props.value;\n    if (value === state.originalValue) return null;\n    return {\n      originalValue: value,\n      value: value\n    };\n  };\n\n  TextInput.prototype.render = function () {\n    return _jsx(\"input\", {\n      type: 'text',\n      className: this.props.className,\n      style: this.props.style,\n      ref: this.input,\n      onBlur: this.onBlur,\n      value: this.state.value,\n      placeholder: this.props.placeholder,\n      onChange: this.onChange,\n      onKeyPress: this.props.onEnter || this.props.blurOnEnter || this.props.blurOnEscape ? this.onKeyPress : void 0,\n      onKeyDown: this.props.blurOnEscape ? this.onKeyUp : void 0,\n      disabled: !!this.props.isDisabled\n    }, void 0);\n  };\n\n  return TextInput;\n}(React.PureComponent);\n\nexport { TextInput };\n\nvar ExpandableControlRow =\n/** @class */\nfunction (_super) {\n  __extends(ExpandableControlRow, _super);\n\n  function ExpandableControlRow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isExpanded: false\n    };\n\n    _this.toggleExpanded = function () {\n      return _this.setState({\n        isExpanded: !_this.state.isExpanded\n      });\n    };\n\n    return _this;\n  }\n\n  ExpandableControlRow.prototype.render = function () {\n    var _a = this.props,\n        label = _a.label,\n        pivot = _a.pivot,\n        controls = _a.controls; // TODO: fix the inline CSS\n\n    return _jsxs(_Fragment, {\n      children: [_jsx(ControlRow, __assign({\n        label: _jsxs(_Fragment, {\n          children: [label, _jsx(\"button\", __assign({\n            className: 'msp-btn-link msp-btn-icon msp-control-group-expander',\n            onClick: this.toggleExpanded,\n            title: (this.state.isExpanded ? 'Less' : 'More') + \" options\",\n            style: {\n              background: 'transparent',\n              textAlign: 'left',\n              padding: '0'\n            }\n          }, {\n            children: _jsx(Icon, {\n              svg: this.state.isExpanded ? RemoveSvg : AddSvg,\n              style: {\n                display: 'inline-block'\n              }\n            }, void 0)\n          }), void 0)]\n        }, void 0),\n        control: pivot\n      }, {\n        children: this.props.colorStripe && _jsx(\"div\", {\n          className: 'msp-expandable-group-color-stripe',\n          style: {\n            backgroundColor: Color.toStyle(this.props.colorStripe)\n          }\n        }, void 0)\n      }), void 0), this.state.isExpanded && _jsx(\"div\", __assign({\n        className: 'msp-control-offset'\n      }, {\n        children: controls\n      }), void 0)]\n    }, void 0);\n  };\n\n  return ExpandableControlRow;\n}(React.Component);\n\nexport { ExpandableControlRow };\nexport function SectionHeader(props) {\n  return _jsxs(\"div\", __assign({\n    className: \"msp-section-header\" + (props.accent ? ' msp-transform-header-brand-' + props.accent : '')\n  }, {\n    children: [props.icon && _jsx(Icon, {\n      svg: props.icon\n    }, void 0), props.title, \" \", _jsx(\"small\", {\n      children: props.desc\n    }, void 0)]\n  }), void 0);\n}\nexport function Button(props) {\n  var className = 'msp-btn';\n  if (!props.inline) className += ' msp-btn-block';\n  if (props.noOverflow) className += ' msp-no-overflow';\n  if (props.flex) className += ' msp-flex-item';\n  if (props.commit === 'on' || props.commit) className += ' msp-btn-commit msp-btn-commit-on';\n  if (props.commit === 'off') className += ' msp-btn-commit msp-btn-commit-off';\n  if (!props.children) className += ' msp-btn-childless';\n  if (props.className) className += ' ' + props.className;\n  var style = void 0;\n\n  if (props.flex) {\n    if (typeof props.flex === 'number') style = {\n      flex: \"0 0 \" + props.flex + \"px\",\n      padding: 0,\n      maxWidth: props.flex + \"px\"\n    };else if (typeof props.flex === 'string') style = {\n      flex: \"0 0 \" + props.flex,\n      padding: 0,\n      maxWidth: props.flex\n    };\n  }\n\n  if (props.style) {\n    if (style) Object.assign(style, props.style);else style = props.style;\n  }\n\n  return _jsxs(\"button\", __assign({\n    onClick: props.onClick,\n    title: props.title,\n    disabled: props.disabled,\n    style: style,\n    className: className,\n    \"data-id\": props['data-id'],\n    \"data-color\": props['data-color'],\n    onContextMenu: props.onContextMenu,\n    onMouseEnter: props.onMouseEnter,\n    onMouseLeave: props.onMouseLeave\n  }, {\n    children: [props.icon && _jsx(Icon, {\n      svg: props.icon\n    }, void 0), props.children]\n  }), void 0);\n}\nexport function IconButton(props) {\n  var className = \"msp-btn msp-btn-icon\" + (props.small ? '-small' : '') + (props.className ? ' ' + props.className : '');\n\n  if (typeof props.toggleState !== 'undefined') {\n    className += \" msp-btn-link-toggle-\" + (props.toggleState ? 'on' : 'off');\n  }\n\n  if (props.transparent) {\n    className += ' msp-transparent-bg';\n  }\n\n  var style = void 0;\n\n  if (props.flex) {\n    if (typeof props.flex === 'boolean') style = {\n      flex: '0 0 32px',\n      padding: 0\n    };else if (typeof props.flex === 'number') style = {\n      flex: \"0 0 \" + props.flex + \"px\",\n      padding: 0,\n      maxWidth: props.flex + \"px\"\n    };else style = {\n      flex: \"0 0 \" + props.flex,\n      padding: 0,\n      maxWidth: props.flex\n    };\n  }\n\n  if (props.style) {\n    if (style) Object.assign(style, props.style);else style = props.style;\n  }\n\n  return _jsxs(\"button\", __assign({\n    className: className,\n    onClick: props.onClick,\n    title: props.title,\n    disabled: props.disabled,\n    \"data-id\": props['data-id'],\n    style: style\n  }, {\n    children: [props.svg && _jsx(Icon, {\n      svg: props.svg\n    }, void 0), props.extraContent]\n  }), void 0);\n}\n\nvar ToggleButton =\n/** @class */\nfunction (_super) {\n  __extends(ToggleButton, _super);\n\n  function ToggleButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.onClick = function (e) {\n      e.currentTarget.blur();\n\n      _this.props.toggle();\n    };\n\n    return _this;\n  }\n\n  ToggleButton.prototype.render = function () {\n    var props = this.props;\n    var label = props.label;\n    var className = props.isSelected ? (props.className || '') + \" msp-control-current\" : props.className;\n    return _jsx(Button, __assign({\n      icon: this.props.icon,\n      onClick: this.onClick,\n      title: this.props.title,\n      inline: this.props.inline,\n      disabled: props.disabled,\n      style: props.style,\n      className: className\n    }, {\n      children: label && this.props.isSelected ? _jsx(\"b\", {\n        children: label\n      }, void 0) : label\n    }), void 0);\n  };\n\n  return ToggleButton;\n}(React.PureComponent);\n\nexport { ToggleButton };\n\nvar ExpandGroup =\n/** @class */\nfunction (_super) {\n  __extends(ExpandGroup, _super);\n\n  function ExpandGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isExpanded: !!_this.props.initiallyExpanded\n    };\n\n    _this.toggleExpanded = function () {\n      return _this.setState({\n        isExpanded: !_this.state.isExpanded\n      });\n    };\n\n    return _this;\n  }\n\n  ExpandGroup.prototype.render = function () {\n    return _jsxs(_Fragment, {\n      children: [_jsx(\"div\", __assign({\n        className: 'msp-control-group-header',\n        style: {\n          marginTop: this.props.marginTop !== void 0 ? this.props.marginTop : '1px',\n          marginLeft: this.props.headerLeftMargin\n        }\n      }, {\n        children: _jsxs(\"button\", __assign({\n          className: 'msp-btn msp-form-control msp-btn-block',\n          onClick: this.toggleExpanded,\n          style: this.props.headerStyle\n        }, {\n          children: [_jsx(Icon, {\n            svg: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg\n          }, void 0), this.props.header]\n        }), void 0)\n      }), void 0), this.state.isExpanded && (this.props.noOffset ? this.props.children : _jsx(\"div\", __assign({\n        className: this.props.accent ? 'msp-accent-offset' : 'msp-control-offset'\n      }, {\n        children: this.props.children\n      }), void 0))]\n    }, void 0);\n  };\n\n  return ExpandGroup;\n}(React.PureComponent);\n\nexport { ExpandGroup };\nexport function ControlRow(props) {\n  var className = 'msp-control-row';\n  if (props.className) className += ' ' + props.className;\n  return _jsxs(\"div\", __assign({\n    className: className\n  }, {\n    children: [_jsx(\"span\", __assign({\n      className: 'msp-control-row-label',\n      title: props.title\n    }, {\n      children: props.label\n    }), void 0), _jsx(\"div\", __assign({\n      className: 'msp-control-row-ctrl'\n    }, {\n      children: props.control\n    }), void 0), props.children]\n  }), void 0);\n}","map":{"version":3,"sources":["../../../src/mol-plugin-ui/controls/common.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\r\n/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nimport * as React from 'react';\r\nimport { Color } from '../../mol-util/color';\r\nimport { Icon, ArrowRightSvg, ArrowDropDownSvg, RemoveSvg, AddSvg } from './icons';\r\nvar ControlGroup = /** @class */ (function (_super) {\r\n    __extends(ControlGroup, _super);\r\n    function ControlGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { isExpanded: !!_this.props.initialExpanded };\r\n        _this.headerClicked = function () {\r\n            if (_this.props.onHeaderClick) {\r\n                _this.props.onHeaderClick();\r\n            }\r\n            else {\r\n                _this.setState({ isExpanded: !_this.state.isExpanded });\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    ControlGroup.prototype.render = function () {\r\n        var groupClassName = this.props.hideOffset ? 'msp-control-group-children' : 'msp-control-group-children msp-control-offset';\r\n        if (this.props.childrenClassName)\r\n            groupClassName += ' ' + this.props.childrenClassName;\r\n        // TODO: customize header style (bg color, togle button etc)\r\n        return _jsxs(\"div\", __assign({ className: 'msp-control-group-wrapper', style: { position: 'relative', marginTop: this.props.noTopMargin ? 0 : void 0 } }, { children: [_jsx(\"div\", __assign({ className: 'msp-control-group-header', style: { marginLeft: this.props.headerLeftMargin }, title: this.props.title }, { children: _jsxs(Button, __assign({ onClick: this.headerClicked }, { children: [!this.props.hideExpander && _jsx(Icon, { svg: this.state.isExpanded ? ArrowRightSvg : ArrowDropDownSvg }, void 0), this.props.topRightIcon && _jsx(Icon, { svg: this.props.topRightIcon, style: { position: 'absolute', right: '2px', top: 0 } }, void 0), _jsx(\"b\", { children: this.props.header }, void 0)] }), void 0) }), void 0), this.state.isExpanded && _jsx(\"div\", __assign({ className: groupClassName, style: { display: this.state.isExpanded ? 'block' : 'none', maxHeight: this.props.maxHeight, overflow: 'hidden', overflowY: 'auto' } }, { children: this.props.children }), void 0)] }), void 0);\r\n    };\r\n    return ControlGroup;\r\n}(React.Component));\r\nexport { ControlGroup };\r\nfunction _id(x) { return x; }\r\nvar TextInput = /** @class */ (function (_super) {\r\n    __extends(TextInput, _super);\r\n    function TextInput() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.input = React.createRef();\r\n        _this.delayHandle = void 0;\r\n        _this.pendingValue = void 0;\r\n        _this.state = { originalValue: '', value: '' };\r\n        _this.onBlur = function () {\r\n            _this.setState({ value: '' + _this.state.originalValue });\r\n            if (_this.props.onBlur)\r\n                _this.props.onBlur();\r\n        };\r\n        _this.raiseOnChange = function () {\r\n            if (_this.pendingValue === void 0)\r\n                return;\r\n            _this.props.onChange(_this.pendingValue);\r\n            _this.pendingValue = void 0;\r\n        };\r\n        _this.onChange = function (e) {\r\n            var value = e.target.value;\r\n            var isInvalid = (_this.props.isValid && !_this.props.isValid(value)) || (_this.props.numeric && Number.isNaN(+value));\r\n            if (isInvalid) {\r\n                _this.clearTimeout();\r\n                _this.setState({ value: value });\r\n                return;\r\n            }\r\n            if (_this.props.numeric) {\r\n                _this.setState({ value: value }, function () { return _this.triggerChanged(value, +value); });\r\n            }\r\n            else {\r\n                var converted_1 = (_this.props.toValue || _id)(value);\r\n                var formatted_1 = (_this.props.fromValue || _id)(converted_1);\r\n                _this.setState({ value: formatted_1 }, function () { return _this.triggerChanged(formatted_1, converted_1); });\r\n            }\r\n        };\r\n        _this.onKeyUp = function (e) {\r\n            if (e.charCode === 27 || e.keyCode === 27 || e.key === 'Escape') {\r\n                if (_this.props.blurOnEscape && _this.input.current) {\r\n                    _this.input.current.blur();\r\n                }\r\n            }\r\n        };\r\n        _this.onKeyPress = function (e) {\r\n            if (e.keyCode === 13 || e.charCode === 13 || e.key === 'Enter') {\r\n                if (_this.isPending) {\r\n                    _this.clearTimeout();\r\n                    _this.raiseOnChange();\r\n                }\r\n                if (_this.props.blurOnEnter && _this.input.current) {\r\n                    _this.input.current.blur();\r\n                }\r\n                if (_this.props.onEnter)\r\n                    _this.props.onEnter();\r\n            }\r\n            e.stopPropagation();\r\n        };\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TextInput.prototype, \"isPending\", {\r\n        get: function () { return typeof this.delayHandle !== 'undefined'; },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TextInput.prototype.clearTimeout = function () {\r\n        if (this.isPending) {\r\n            clearTimeout(this.delayHandle);\r\n            this.delayHandle = void 0;\r\n        }\r\n    };\r\n    TextInput.prototype.triggerChanged = function (formatted, converted) {\r\n        this.clearTimeout();\r\n        if (formatted === this.state.originalValue)\r\n            return;\r\n        if (this.props.delayMs) {\r\n            this.pendingValue = converted;\r\n            this.delayHandle = setTimeout(this.raiseOnChange, this.props.delayMs);\r\n        }\r\n        else {\r\n            this.props.onChange(converted);\r\n        }\r\n    };\r\n    TextInput.getDerivedStateFromProps = function (props, state) {\r\n        var value = props.fromValue ? props.fromValue(props.value) : props.value;\r\n        if (value === state.originalValue)\r\n            return null;\r\n        return { originalValue: value, value: value };\r\n    };\r\n    TextInput.prototype.render = function () {\r\n        return _jsx(\"input\", { type: 'text', className: this.props.className, style: this.props.style, ref: this.input, onBlur: this.onBlur, value: this.state.value, placeholder: this.props.placeholder, onChange: this.onChange, onKeyPress: this.props.onEnter || this.props.blurOnEnter || this.props.blurOnEscape ? this.onKeyPress : void 0, onKeyDown: this.props.blurOnEscape ? this.onKeyUp : void 0, disabled: !!this.props.isDisabled }, void 0);\r\n    };\r\n    return TextInput;\r\n}(React.PureComponent));\r\nexport { TextInput };\r\nvar ExpandableControlRow = /** @class */ (function (_super) {\r\n    __extends(ExpandableControlRow, _super);\r\n    function ExpandableControlRow() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { isExpanded: false };\r\n        _this.toggleExpanded = function () { return _this.setState({ isExpanded: !_this.state.isExpanded }); };\r\n        return _this;\r\n    }\r\n    ExpandableControlRow.prototype.render = function () {\r\n        var _a = this.props, label = _a.label, pivot = _a.pivot, controls = _a.controls;\r\n        // TODO: fix the inline CSS\r\n        return _jsxs(_Fragment, { children: [_jsx(ControlRow, __assign({ label: _jsxs(_Fragment, { children: [label, _jsx(\"button\", __assign({ className: 'msp-btn-link msp-btn-icon msp-control-group-expander', onClick: this.toggleExpanded, title: (this.state.isExpanded ? 'Less' : 'More') + \" options\", style: { background: 'transparent', textAlign: 'left', padding: '0' } }, { children: _jsx(Icon, { svg: this.state.isExpanded ? RemoveSvg : AddSvg, style: { display: 'inline-block' } }, void 0) }), void 0)] }, void 0), control: pivot }, { children: this.props.colorStripe && _jsx(\"div\", { className: 'msp-expandable-group-color-stripe', style: { backgroundColor: Color.toStyle(this.props.colorStripe) } }, void 0) }), void 0), this.state.isExpanded && _jsx(\"div\", __assign({ className: 'msp-control-offset' }, { children: controls }), void 0)] }, void 0);\r\n    };\r\n    return ExpandableControlRow;\r\n}(React.Component));\r\nexport { ExpandableControlRow };\r\nexport function SectionHeader(props) {\r\n    return _jsxs(\"div\", __assign({ className: \"msp-section-header\" + (props.accent ? ' msp-transform-header-brand-' + props.accent : '') }, { children: [props.icon && _jsx(Icon, { svg: props.icon }, void 0), props.title, \" \", _jsx(\"small\", { children: props.desc }, void 0)] }), void 0);\r\n}\r\nexport function Button(props) {\r\n    var className = 'msp-btn';\r\n    if (!props.inline)\r\n        className += ' msp-btn-block';\r\n    if (props.noOverflow)\r\n        className += ' msp-no-overflow';\r\n    if (props.flex)\r\n        className += ' msp-flex-item';\r\n    if (props.commit === 'on' || props.commit)\r\n        className += ' msp-btn-commit msp-btn-commit-on';\r\n    if (props.commit === 'off')\r\n        className += ' msp-btn-commit msp-btn-commit-off';\r\n    if (!props.children)\r\n        className += ' msp-btn-childless';\r\n    if (props.className)\r\n        className += ' ' + props.className;\r\n    var style = void 0;\r\n    if (props.flex) {\r\n        if (typeof props.flex === 'number')\r\n            style = { flex: \"0 0 \" + props.flex + \"px\", padding: 0, maxWidth: props.flex + \"px\" };\r\n        else if (typeof props.flex === 'string')\r\n            style = { flex: \"0 0 \" + props.flex, padding: 0, maxWidth: props.flex };\r\n    }\r\n    if (props.style) {\r\n        if (style)\r\n            Object.assign(style, props.style);\r\n        else\r\n            style = props.style;\r\n    }\r\n    return _jsxs(\"button\", __assign({ onClick: props.onClick, title: props.title, disabled: props.disabled, style: style, className: className, \"data-id\": props['data-id'], \"data-color\": props['data-color'], onContextMenu: props.onContextMenu, onMouseEnter: props.onMouseEnter, onMouseLeave: props.onMouseLeave }, { children: [props.icon && _jsx(Icon, { svg: props.icon }, void 0), props.children] }), void 0);\r\n}\r\nexport function IconButton(props) {\r\n    var className = \"msp-btn msp-btn-icon\" + (props.small ? '-small' : '') + (props.className ? ' ' + props.className : '');\r\n    if (typeof props.toggleState !== 'undefined') {\r\n        className += \" msp-btn-link-toggle-\" + (props.toggleState ? 'on' : 'off');\r\n    }\r\n    if (props.transparent) {\r\n        className += ' msp-transparent-bg';\r\n    }\r\n    var style = void 0;\r\n    if (props.flex) {\r\n        if (typeof props.flex === 'boolean')\r\n            style = { flex: '0 0 32px', padding: 0 };\r\n        else if (typeof props.flex === 'number')\r\n            style = { flex: \"0 0 \" + props.flex + \"px\", padding: 0, maxWidth: props.flex + \"px\" };\r\n        else\r\n            style = { flex: \"0 0 \" + props.flex, padding: 0, maxWidth: props.flex };\r\n    }\r\n    if (props.style) {\r\n        if (style)\r\n            Object.assign(style, props.style);\r\n        else\r\n            style = props.style;\r\n    }\r\n    return _jsxs(\"button\", __assign({ className: className, onClick: props.onClick, title: props.title, disabled: props.disabled, \"data-id\": props['data-id'], style: style }, { children: [props.svg && _jsx(Icon, { svg: props.svg }, void 0), props.extraContent] }), void 0);\r\n}\r\nvar ToggleButton = /** @class */ (function (_super) {\r\n    __extends(ToggleButton, _super);\r\n    function ToggleButton() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.onClick = function (e) {\r\n            e.currentTarget.blur();\r\n            _this.props.toggle();\r\n        };\r\n        return _this;\r\n    }\r\n    ToggleButton.prototype.render = function () {\r\n        var props = this.props;\r\n        var label = props.label;\r\n        var className = props.isSelected ? (props.className || '') + \" msp-control-current\" : props.className;\r\n        return _jsx(Button, __assign({ icon: this.props.icon, onClick: this.onClick, title: this.props.title, inline: this.props.inline, disabled: props.disabled, style: props.style, className: className }, { children: label && this.props.isSelected ? _jsx(\"b\", { children: label }, void 0) : label }), void 0);\r\n    };\r\n    return ToggleButton;\r\n}(React.PureComponent));\r\nexport { ToggleButton };\r\nvar ExpandGroup = /** @class */ (function (_super) {\r\n    __extends(ExpandGroup, _super);\r\n    function ExpandGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { isExpanded: !!_this.props.initiallyExpanded };\r\n        _this.toggleExpanded = function () { return _this.setState({ isExpanded: !_this.state.isExpanded }); };\r\n        return _this;\r\n    }\r\n    ExpandGroup.prototype.render = function () {\r\n        return _jsxs(_Fragment, { children: [_jsx(\"div\", __assign({ className: 'msp-control-group-header', style: { marginTop: this.props.marginTop !== void 0 ? this.props.marginTop : '1px', marginLeft: this.props.headerLeftMargin } }, { children: _jsxs(\"button\", __assign({ className: 'msp-btn msp-form-control msp-btn-block', onClick: this.toggleExpanded, style: this.props.headerStyle }, { children: [_jsx(Icon, { svg: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg }, void 0), this.props.header] }), void 0) }), void 0), this.state.isExpanded &&\r\n                    (this.props.noOffset\r\n                        ? this.props.children\r\n                        : _jsx(\"div\", __assign({ className: this.props.accent ? 'msp-accent-offset' : 'msp-control-offset' }, { children: this.props.children }), void 0))] }, void 0);\r\n    };\r\n    return ExpandGroup;\r\n}(React.PureComponent));\r\nexport { ExpandGroup };\r\nexport function ControlRow(props) {\r\n    var className = 'msp-control-row';\r\n    if (props.className)\r\n        className += ' ' + props.className;\r\n    return _jsxs(\"div\", __assign({ className: className }, { children: [_jsx(\"span\", __assign({ className: 'msp-control-row-label', title: props.title }, { children: props.label }), void 0), _jsx(\"div\", __assign({ className: 'msp-control-row-ctrl' }, { children: props.control }), void 0), props.children] }), void 0);\r\n}\r\n//# sourceMappingURL=common.js.map"]},"metadata":{},"sourceType":"module"}