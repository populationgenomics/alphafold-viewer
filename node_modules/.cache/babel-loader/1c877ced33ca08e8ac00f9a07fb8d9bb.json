{"ast":null,"code":"/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\nimport { ChunkedArray } from '../../../mol-data/util';\nimport { Points } from './points'; // avoiding namespace lookup improved performance in Chrome (Aug 2020)\n\nvar caAdd3 = ChunkedArray.add3;\nvar caAdd = ChunkedArray.add;\nexport var PointsBuilder;\n\n(function (PointsBuilder) {\n  function create(initialCount, chunkSize, points) {\n    if (initialCount === void 0) {\n      initialCount = 2048;\n    }\n\n    if (chunkSize === void 0) {\n      chunkSize = 1024;\n    }\n\n    var centers = ChunkedArray.create(Float32Array, 3, chunkSize, points ? points.centerBuffer.ref.value : initialCount);\n    var groups = ChunkedArray.create(Float32Array, 1, chunkSize, points ? points.groupBuffer.ref.value : initialCount);\n    return {\n      add: function (x, y, z, group) {\n        caAdd3(centers, x, y, z);\n        caAdd(groups, group);\n      },\n      getPoints: function () {\n        var cb = ChunkedArray.compact(centers, true);\n        var gb = ChunkedArray.compact(groups, true);\n        return Points.create(cb, gb, centers.elementCount, points);\n      }\n    };\n  }\n\n  PointsBuilder.create = create;\n})(PointsBuilder || (PointsBuilder = {}));","map":{"version":3,"sources":["../../../../src/mol-geo/geometry/points/points-builder.ts"],"names":[],"mappings":"AAAA;;;;AAIG;AAEH,SAAS,YAAT,QAA6B,wBAA7B;AACA,SAAS,MAAT,QAAuB,UAAvB,C,CAEA;;AACA,IAAM,MAAM,GAAG,YAAY,CAAC,IAA5B;AACA,IAAM,KAAK,GAAG,YAAY,CAAC,GAA3B;AAOA,OAAM,IAAW,aAAX;;AAAN,CAAA,UAAiB,aAAjB,EAA8B;AAC1B,WAAgB,MAAhB,CAAuB,YAAvB,EAA4C,SAA5C,EAA8D,MAA9D,EAA6E;AAAtD,QAAA,YAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,YAAA,GAAA,IAAA;AAAmB;;AAAE,QAAA,SAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,SAAA,GAAA,IAAA;AAAgB;;AACxD,QAAM,OAAO,GAAG,YAAY,CAAC,MAAb,CAAoB,YAApB,EAAkC,CAAlC,EAAqC,SAArC,EAAgD,MAAM,GAAG,MAAM,CAAC,YAAP,CAAoB,GAApB,CAAwB,KAA3B,GAAmC,YAAzF,CAAhB;AACA,QAAM,MAAM,GAAG,YAAY,CAAC,MAAb,CAAoB,YAApB,EAAkC,CAAlC,EAAqC,SAArC,EAAgD,MAAM,GAAG,MAAM,CAAC,WAAP,CAAmB,GAAnB,CAAuB,KAA1B,GAAkC,YAAxF,CAAf;AAEA,WAAO;AACH,MAAA,GAAG,EAAE,UAAC,CAAD,EAAY,CAAZ,EAAuB,CAAvB,EAAkC,KAAlC,EAA+C;AAChD,QAAA,MAAM,CAAC,OAAD,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAN;AACA,QAAA,KAAK,CAAC,MAAD,EAAS,KAAT,CAAL;AACH,OAJE;AAKH,MAAA,SAAS,EAAE,YAAA;AACP,YAAM,EAAE,GAAG,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,IAA9B,CAAX;AACA,YAAM,EAAE,GAAG,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAA7B,CAAX;AACA,eAAO,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,EAAlB,EAAsB,OAAO,CAAC,YAA9B,EAA4C,MAA5C,CAAP;AACH;AATE,KAAP;AAWH;;AAfe,EAAA,aAAA,CAAA,MAAA,GAAM,MAAN;AAgBnB,CAjBD,EAAiB,aAAa,KAAb,aAAa,GAAA,EAAA,CAA9B","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { ChunkedArray } from '../../../mol-data/util';\r\nimport { Points } from './points';\r\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\r\nvar caAdd3 = ChunkedArray.add3;\r\nvar caAdd = ChunkedArray.add;\r\nexport var PointsBuilder;\r\n(function (PointsBuilder) {\r\n    function create(initialCount, chunkSize, points) {\r\n        if (initialCount === void 0) { initialCount = 2048; }\r\n        if (chunkSize === void 0) { chunkSize = 1024; }\r\n        var centers = ChunkedArray.create(Float32Array, 3, chunkSize, points ? points.centerBuffer.ref.value : initialCount);\r\n        var groups = ChunkedArray.create(Float32Array, 1, chunkSize, points ? points.groupBuffer.ref.value : initialCount);\r\n        return {\r\n            add: function (x, y, z, group) {\r\n                caAdd3(centers, x, y, z);\r\n                caAdd(groups, group);\r\n            },\r\n            getPoints: function () {\r\n                var cb = ChunkedArray.compact(centers, true);\r\n                var gb = ChunkedArray.compact(groups, true);\r\n                return Points.create(cb, gb, centers.elementCount, points);\r\n            }\r\n        };\r\n    }\r\n    PointsBuilder.create = create;\r\n})(PointsBuilder || (PointsBuilder = {}));\r\n//# sourceMappingURL=points-builder.js.map"]},"metadata":{},"sourceType":"module"}