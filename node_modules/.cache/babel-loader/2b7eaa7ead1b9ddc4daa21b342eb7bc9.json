{"ast":null,"code":"/**\r\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\nvar ArrayIteratorImpl =\n/** @class */\nfunction () {\n  function ArrayIteratorImpl(xs) {\n    this.xs = [];\n    this.index = -1;\n    this.length = 0;\n    this.hasNext = false;\n    this.length = xs.length;\n    this.hasNext = xs.length > 0;\n    this.xs = xs;\n    this.index = -1; // try to avoid deoptimization with undefined values\n\n    this.lastValue = xs.length > 0 ? xs[0] : void 0;\n  }\n\n  ArrayIteratorImpl.prototype.move = function () {\n    ++this.index;\n    this.lastValue = this.xs[this.index];\n    this.hasNext = this.index < this.length - 1;\n    return this.lastValue;\n  };\n\n  return ArrayIteratorImpl;\n}();\n\nvar RangeIteratorImpl =\n/** @class */\nfunction () {\n  function RangeIteratorImpl(min, max) {\n    this.max = max;\n    this.value = 0;\n    this.hasNext = false;\n    this.value = min - 1;\n    this.hasNext = max >= min;\n  }\n\n  RangeIteratorImpl.prototype.move = function () {\n    ++this.value;\n    this.hasNext = this.value < this.max;\n    return this.value;\n  };\n\n  return RangeIteratorImpl;\n}();\n\nvar ValueIterator =\n/** @class */\nfunction () {\n  function ValueIterator(value) {\n    this.value = value;\n    this.hasNext = true;\n  }\n\n  ValueIterator.prototype.move = function () {\n    this.hasNext = false;\n    return this.value;\n  };\n\n  return ValueIterator;\n}();\n\nvar MapIteratorImpl =\n/** @class */\nfunction () {\n  function MapIteratorImpl(base, f) {\n    this.base = base;\n    this.f = f;\n    this.hasNext = false;\n    this.hasNext = base.hasNext;\n  }\n\n  MapIteratorImpl.prototype.move = function () {\n    var v = this.f(this.base.move());\n    this.hasNext = this.base.hasNext;\n    return v;\n  };\n\n  return MapIteratorImpl;\n}();\n\nvar FilterIteratorImpl =\n/** @class */\nfunction () {\n  function FilterIteratorImpl(base, p) {\n    this.base = base;\n    this.p = p;\n    this.hasNext = this.findNext();\n  }\n\n  FilterIteratorImpl.prototype.move = function () {\n    var ret = this.next;\n    this.hasNext = this.findNext();\n    return ret;\n  };\n\n  FilterIteratorImpl.prototype.findNext = function () {\n    while (this.base.hasNext) {\n      this.next = this.base.move();\n      if (this.p(this.next)) return true;\n    }\n\n    return false;\n  };\n\n  return FilterIteratorImpl;\n}();\n\nvar Iterator;\n\n(function (Iterator) {\n  Iterator.Empty = new RangeIteratorImpl(0, -1);\n\n  function Array(xs) {\n    return new ArrayIteratorImpl(xs);\n  }\n\n  Iterator.Array = Array;\n\n  function Value(value) {\n    return new ValueIterator(value);\n  }\n\n  Iterator.Value = Value;\n\n  function Range(min, max) {\n    return new RangeIteratorImpl(min, max);\n  }\n\n  Iterator.Range = Range;\n\n  function map(base, f) {\n    return new MapIteratorImpl(base, f);\n  }\n\n  Iterator.map = map;\n\n  function filter(base, p) {\n    return new FilterIteratorImpl(base, p);\n  }\n\n  Iterator.filter = filter; // Iterate until first truthy value is returned.\n\n  function forEach(it, f, ctx) {\n    while (it.hasNext) {\n      var c = f(it.move(), ctx);\n      if (c) return ctx;\n    }\n\n    return ctx;\n  }\n\n  Iterator.forEach = forEach;\n})(Iterator || (Iterator = {}));\n\nexport { Iterator };","map":{"version":3,"sources":["../../src/mol-data/iterator.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nvar ArrayIteratorImpl = /** @class */ (function () {\r\n    function ArrayIteratorImpl(xs) {\r\n        this.xs = [];\r\n        this.index = -1;\r\n        this.length = 0;\r\n        this.hasNext = false;\r\n        this.length = xs.length;\r\n        this.hasNext = xs.length > 0;\r\n        this.xs = xs;\r\n        this.index = -1;\r\n        // try to avoid deoptimization with undefined values\r\n        this.lastValue = xs.length > 0 ? xs[0] : void 0;\r\n    }\r\n    ArrayIteratorImpl.prototype.move = function () {\r\n        ++this.index;\r\n        this.lastValue = this.xs[this.index];\r\n        this.hasNext = this.index < this.length - 1;\r\n        return this.lastValue;\r\n    };\r\n    return ArrayIteratorImpl;\r\n}());\r\nvar RangeIteratorImpl = /** @class */ (function () {\r\n    function RangeIteratorImpl(min, max) {\r\n        this.max = max;\r\n        this.value = 0;\r\n        this.hasNext = false;\r\n        this.value = min - 1;\r\n        this.hasNext = max >= min;\r\n    }\r\n    RangeIteratorImpl.prototype.move = function () {\r\n        ++this.value;\r\n        this.hasNext = this.value < this.max;\r\n        return this.value;\r\n    };\r\n    return RangeIteratorImpl;\r\n}());\r\nvar ValueIterator = /** @class */ (function () {\r\n    function ValueIterator(value) {\r\n        this.value = value;\r\n        this.hasNext = true;\r\n    }\r\n    ValueIterator.prototype.move = function () { this.hasNext = false; return this.value; };\r\n    return ValueIterator;\r\n}());\r\nvar MapIteratorImpl = /** @class */ (function () {\r\n    function MapIteratorImpl(base, f) {\r\n        this.base = base;\r\n        this.f = f;\r\n        this.hasNext = false;\r\n        this.hasNext = base.hasNext;\r\n    }\r\n    MapIteratorImpl.prototype.move = function () {\r\n        var v = this.f(this.base.move());\r\n        this.hasNext = this.base.hasNext;\r\n        return v;\r\n    };\r\n    return MapIteratorImpl;\r\n}());\r\nvar FilterIteratorImpl = /** @class */ (function () {\r\n    function FilterIteratorImpl(base, p) {\r\n        this.base = base;\r\n        this.p = p;\r\n        this.hasNext = this.findNext();\r\n    }\r\n    FilterIteratorImpl.prototype.move = function () {\r\n        var ret = this.next;\r\n        this.hasNext = this.findNext();\r\n        return ret;\r\n    };\r\n    FilterIteratorImpl.prototype.findNext = function () {\r\n        while (this.base.hasNext) {\r\n            this.next = this.base.move();\r\n            if (this.p(this.next))\r\n                return true;\r\n        }\r\n        return false;\r\n    };\r\n    return FilterIteratorImpl;\r\n}());\r\nvar Iterator;\r\n(function (Iterator) {\r\n    Iterator.Empty = new RangeIteratorImpl(0, -1);\r\n    function Array(xs) { return new ArrayIteratorImpl(xs); }\r\n    Iterator.Array = Array;\r\n    function Value(value) { return new ValueIterator(value); }\r\n    Iterator.Value = Value;\r\n    function Range(min, max) { return new RangeIteratorImpl(min, max); }\r\n    Iterator.Range = Range;\r\n    function map(base, f) { return new MapIteratorImpl(base, f); }\r\n    Iterator.map = map;\r\n    function filter(base, p) { return new FilterIteratorImpl(base, p); }\r\n    Iterator.filter = filter;\r\n    // Iterate until first truthy value is returned.\r\n    function forEach(it, f, ctx) {\r\n        while (it.hasNext) {\r\n            var c = f(it.move(), ctx);\r\n            if (c)\r\n                return ctx;\r\n        }\r\n        return ctx;\r\n    }\r\n    Iterator.forEach = forEach;\r\n})(Iterator || (Iterator = {}));\r\nexport { Iterator };\r\n//# sourceMappingURL=iterator.js.map"]},"metadata":{},"sourceType":"module"}