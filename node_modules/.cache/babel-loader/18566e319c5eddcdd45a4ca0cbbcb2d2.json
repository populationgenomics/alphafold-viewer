{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\r\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\n\nimport { PluginUIComponent } from '../base';\nimport { ParameterControls } from '../controls/parameters';\nimport { Button } from '../controls/common';\nimport { PlayArrowSvg } from '../controls/icons';\n\nvar AnimationControls =\n/** @class */\nfunction (_super) {\n  __extends(AnimationControls, _super);\n\n  function AnimationControls() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.updateParams = function (p) {\n      var _a;\n\n      _this.plugin.managers.animation.updateParams((_a = {}, _a[p.name] = p.value, _a));\n    };\n\n    _this.updateCurrentParams = function (p) {\n      var _a;\n\n      _this.plugin.managers.animation.updateCurrentParams((_a = {}, _a[p.name] = p.value, _a));\n    };\n\n    _this.startOrStop = function () {\n      var anim = _this.plugin.managers.animation;\n      if (anim.state.animationState === 'playing') anim.stop();else {\n        if (_this.props.onStart) _this.props.onStart();\n        anim.start();\n      }\n    };\n\n    return _this;\n  }\n\n  AnimationControls.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.managers.animation.events.updated, function () {\n      return _this.forceUpdate();\n    });\n  };\n\n  AnimationControls.prototype.render = function () {\n    var _a, _b;\n\n    var anim = this.plugin.managers.animation;\n    if (anim.isEmpty) return null;\n    var isDisabled = anim.state.animationState === 'playing';\n    var canApply = (_b = (_a = anim.current.anim).canApply) === null || _b === void 0 ? void 0 : _b.call(_a, this.plugin);\n    return _jsxs(_Fragment, {\n      children: [_jsx(ParameterControls, {\n        params: anim.getParams(),\n        values: anim.state.params,\n        onChange: this.updateParams,\n        isDisabled: isDisabled\n      }, void 0), _jsx(ParameterControls, {\n        params: anim.current.params,\n        values: anim.current.paramValues,\n        onChange: this.updateCurrentParams,\n        isDisabled: isDisabled\n      }, void 0), _jsx(\"div\", __assign({\n        className: 'msp-flex-row'\n      }, {\n        children: _jsx(Button, __assign({\n          icon: anim.state.animationState !== 'playing' ? void 0 : PlayArrowSvg,\n          onClick: this.startOrStop,\n          disabled: canApply !== void 0 && canApply.canApply === false\n        }, {\n          children: anim.state.animationState === 'playing' ? 'Stop' : canApply === void 0 || canApply.canApply ? 'Start' : canApply.reason || 'Start'\n        }), void 0)\n      }), void 0)]\n    }, void 0);\n  };\n\n  return AnimationControls;\n}(PluginUIComponent);\n\nexport { AnimationControls };","map":{"version":3,"sources":["../../../src/mol-plugin-ui/state/animation.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\r\n/**\r\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nimport { PluginUIComponent } from '../base';\r\nimport { ParameterControls } from '../controls/parameters';\r\nimport { Button } from '../controls/common';\r\nimport { PlayArrowSvg } from '../controls/icons';\r\nvar AnimationControls = /** @class */ (function (_super) {\r\n    __extends(AnimationControls, _super);\r\n    function AnimationControls() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.updateParams = function (p) {\r\n            var _a;\r\n            _this.plugin.managers.animation.updateParams((_a = {}, _a[p.name] = p.value, _a));\r\n        };\r\n        _this.updateCurrentParams = function (p) {\r\n            var _a;\r\n            _this.plugin.managers.animation.updateCurrentParams((_a = {}, _a[p.name] = p.value, _a));\r\n        };\r\n        _this.startOrStop = function () {\r\n            var anim = _this.plugin.managers.animation;\r\n            if (anim.state.animationState === 'playing')\r\n                anim.stop();\r\n            else {\r\n                if (_this.props.onStart)\r\n                    _this.props.onStart();\r\n                anim.start();\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    AnimationControls.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.managers.animation.events.updated, function () { return _this.forceUpdate(); });\r\n    };\r\n    AnimationControls.prototype.render = function () {\r\n        var _a, _b;\r\n        var anim = this.plugin.managers.animation;\r\n        if (anim.isEmpty)\r\n            return null;\r\n        var isDisabled = anim.state.animationState === 'playing';\r\n        var canApply = (_b = (_a = anim.current.anim).canApply) === null || _b === void 0 ? void 0 : _b.call(_a, this.plugin);\r\n        return _jsxs(_Fragment, { children: [_jsx(ParameterControls, { params: anim.getParams(), values: anim.state.params, onChange: this.updateParams, isDisabled: isDisabled }, void 0), _jsx(ParameterControls, { params: anim.current.params, values: anim.current.paramValues, onChange: this.updateCurrentParams, isDisabled: isDisabled }, void 0), _jsx(\"div\", __assign({ className: 'msp-flex-row' }, { children: _jsx(Button, __assign({ icon: anim.state.animationState !== 'playing' ? void 0 : PlayArrowSvg, onClick: this.startOrStop, disabled: canApply !== void 0 && canApply.canApply === false }, { children: anim.state.animationState === 'playing' ? 'Stop' : canApply === void 0 || canApply.canApply ? 'Start' : canApply.reason || 'Start' }), void 0) }), void 0)] }, void 0);\r\n    };\r\n    return AnimationControls;\r\n}(PluginUIComponent));\r\nexport { AnimationControls };\r\n//# sourceMappingURL=animation.js.map"]},"metadata":{},"sourceType":"module"}