{"ast":null,"code":"/**\r\n * Copyright (c) 2020-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\nimport { __assign } from \"tslib\";\nimport produce from 'immer';\nimport { Interval } from '../../mol-data/int/interval';\nimport { addCylinder } from '../../mol-geo/geometry/mesh/builder/cylinder';\nimport { addSphere } from '../../mol-geo/geometry/mesh/builder/sphere';\nimport { Mesh } from '../../mol-geo/geometry/mesh/mesh';\nimport { MeshBuilder } from '../../mol-geo/geometry/mesh/mesh-builder';\nimport { Scene } from '../../mol-gl/scene';\nimport { Sphere3D } from '../../mol-math/geometry';\nimport { Mat4, Vec3 } from '../../mol-math/linear-algebra';\nimport { DataLoci, EmptyLoci } from '../../mol-model/loci';\nimport { Shape } from '../../mol-model/shape';\nimport { Visual } from '../../mol-repr/visual';\nimport { ColorNames } from '../../mol-util/color/names';\nimport { MarkerActions } from '../../mol-util/marker-action';\nimport { ParamDefinition as PD } from '../../mol-util/param-definition';\nimport { Camera } from '../camera'; // TODO add scale line/grid\n\nvar AxesParams = __assign(__assign({}, Mesh.Params), {\n  alpha: __assign(__assign({}, Mesh.Params.alpha), {\n    defaultValue: 0.51\n  }),\n  ignoreLight: __assign(__assign({}, Mesh.Params.ignoreLight), {\n    defaultValue: true\n  }),\n  colorX: PD.Color(ColorNames.red, {\n    isEssential: true\n  }),\n  colorY: PD.Color(ColorNames.green, {\n    isEssential: true\n  }),\n  colorZ: PD.Color(ColorNames.blue, {\n    isEssential: true\n  }),\n  scale: PD.Numeric(0.33, {\n    min: 0.1,\n    max: 2,\n    step: 0.1\n  }, {\n    isEssential: true\n  })\n});\n\nexport var CameraHelperParams = {\n  axes: PD.MappedStatic('on', {\n    on: PD.Group(AxesParams),\n    off: PD.Group({})\n  }, {\n    cycle: true,\n    description: 'Show camera orientation axes'\n  })\n};\n\nvar CameraHelper =\n/** @class */\nfunction () {\n  function CameraHelper(webgl, props) {\n    var _this = this;\n\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.webgl = webgl;\n    this.props = {\n      axes: {\n        name: 'off',\n        params: {}\n      }\n    };\n\n    this.eachGroup = function (loci, apply) {\n      if (!_this.renderObject) return false;\n      if (!isCameraAxesLoci(loci)) return false;\n      var changed = false;\n      var groupCount = _this.renderObject.values.uGroupCount.ref.value;\n      var elements = loci.elements;\n\n      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var _a = elements_1[_i],\n            groupId = _a.groupId,\n            instanceId = _a.instanceId;\n        var idx = instanceId * groupCount + groupId;\n        if (apply(Interval.ofSingleton(idx))) changed = true;\n      }\n\n      return changed;\n    };\n\n    this.scene = Scene.create(webgl);\n    this.camera = new Camera();\n    Vec3.set(this.camera.up, 0, 1, 0);\n    Vec3.set(this.camera.target, 0, 0, 0);\n    this.setProps(props);\n  }\n\n  CameraHelper.prototype.setProps = function (props) {\n    var _this = this;\n\n    this.props = produce(this.props, function (p) {\n      if (props.axes !== undefined) {\n        p.axes.name = props.axes.name;\n\n        if (props.axes.name === 'on') {\n          _this.scene.clear();\n\n          var params = __assign(__assign({}, props.axes.params), {\n            scale: props.axes.params.scale * _this.webgl.pixelRatio\n          });\n\n          _this.renderObject = createAxesRenderObject(params);\n          _this.renderObject.state.noClip = true;\n\n          _this.scene.add(_this.renderObject);\n\n          _this.scene.commit();\n\n          Vec3.set(_this.camera.position, 0, 0, params.scale * 200);\n          Mat4.lookAt(_this.camera.view, _this.camera.position, _this.camera.target, _this.camera.up);\n          p.axes.params = __assign({}, props.axes.params);\n        }\n      }\n    });\n  };\n\n  Object.defineProperty(CameraHelper.prototype, \"isEnabled\", {\n    get: function () {\n      return this.props.axes.name === 'on';\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CameraHelper.prototype.getLoci = function (pickingId) {\n    var objectId = pickingId.objectId,\n        groupId = pickingId.groupId,\n        instanceId = pickingId.instanceId;\n    if (!this.renderObject || objectId !== this.renderObject.id || groupId === 0\n    /* None */\n    ) return EmptyLoci;\n    return CameraAxesLoci(this, groupId, instanceId);\n  };\n\n  CameraHelper.prototype.mark = function (loci, action) {\n    if (!MarkerActions.is(MarkerActions.Highlighting, action)) return false;\n    if (!isCameraAxesLoci(loci)) return false;\n    if (loci.data !== this) return false;\n    return Visual.mark(this.renderObject, loci, action, this.eachGroup);\n  };\n\n  CameraHelper.prototype.update = function (camera) {\n    if (!this.renderObject) return;\n    updateCamera(this.camera, camera.viewport, camera.viewOffset);\n    Mat4.extractRotation(this.scene.view, camera.view);\n    var r = this.renderObject.values.boundingSphere.ref.value.radius;\n    Mat4.setTranslation(this.scene.view, Vec3.create(-camera.viewport.width / 2 + r, -camera.viewport.height / 2 + r, 0));\n  };\n\n  return CameraHelper;\n}();\n\nexport { CameraHelper };\n\nfunction getAxisLabel(axis) {\n  switch (axis) {\n    case 1\n    /* X */\n    :\n      return 'X Axis';\n\n    case 2\n    /* Y */\n    :\n      return 'Y Axis';\n\n    case 3\n    /* Z */\n    :\n      return 'Z Axis';\n\n    case 4\n    /* XY */\n    :\n      return 'XY Plane';\n\n    case 5\n    /* XZ */\n    :\n      return 'XZ Plane';\n\n    case 6\n    /* YZ */\n    :\n      return 'YZ Plane';\n\n    default:\n      return 'Axes';\n  }\n}\n\nfunction CameraAxesLoci(cameraHelper, groupId, instanceId) {\n  return DataLoci('camera-axes', cameraHelper, [{\n    groupId: groupId,\n    instanceId: instanceId\n  }], void 0\n  /** bounding sphere */\n  , function () {\n    return getAxisLabel(groupId);\n  });\n}\n\nexport function isCameraAxesLoci(x) {\n  return x.kind === 'data-loci' && x.tag === 'camera-axes';\n}\n\nfunction updateCamera(camera, viewport, viewOffset) {\n  var near = camera.near,\n      far = camera.far;\n  var fullLeft = -viewport.width / 2;\n  var fullRight = viewport.width / 2;\n  var fullTop = viewport.height / 2;\n  var fullBottom = -viewport.height / 2;\n  var dx = (fullRight - fullLeft) / 2;\n  var dy = (fullTop - fullBottom) / 2;\n  var cx = (fullRight + fullLeft) / 2;\n  var cy = (fullTop + fullBottom) / 2;\n  var left = cx - dx;\n  var right = cx + dx;\n  var top = cy + dy;\n  var bottom = cy - dy;\n\n  if (viewOffset.enabled) {\n    var scaleW = (fullRight - fullLeft) / viewOffset.width;\n    var scaleH = (fullTop - fullBottom) / viewOffset.height;\n    left += scaleW * viewOffset.offsetX;\n    right = left + scaleW * viewOffset.width;\n    top -= scaleH * viewOffset.offsetY;\n    bottom = top - scaleH * viewOffset.height;\n  }\n\n  Mat4.ortho(camera.projection, left, right, top, bottom, near, far);\n}\n\nfunction createAxesMesh(scale, mesh) {\n  var state = MeshBuilder.createState(512, 256, mesh);\n  var radius = 0.075 * scale;\n  var x = Vec3.scale(Vec3(), Vec3.unitX, scale);\n  var y = Vec3.scale(Vec3(), Vec3.unitY, scale);\n  var z = Vec3.scale(Vec3(), Vec3.unitZ, scale);\n  var cylinderProps = {\n    radiusTop: radius,\n    radiusBottom: radius,\n    radialSegments: 32\n  };\n  state.currentGroup = 0\n  /* None */\n  ;\n  addSphere(state, Vec3.origin, radius, 2);\n  state.currentGroup = 1\n  /* X */\n  ;\n  addSphere(state, x, radius, 2);\n  addCylinder(state, Vec3.origin, x, 1, cylinderProps);\n  state.currentGroup = 2\n  /* Y */\n  ;\n  addSphere(state, y, radius, 2);\n  addCylinder(state, Vec3.origin, y, 1, cylinderProps);\n  state.currentGroup = 3\n  /* Z */\n  ;\n  addSphere(state, z, radius, 2);\n  addCylinder(state, Vec3.origin, z, 1, cylinderProps);\n  Vec3.scale(x, x, 0.5);\n  Vec3.scale(y, y, 0.5);\n  Vec3.scale(z, z, 0.5);\n  state.currentGroup = 4\n  /* XY */\n  ;\n  MeshBuilder.addTriangle(state, Vec3.origin, x, y);\n  MeshBuilder.addTriangle(state, Vec3.origin, y, x);\n  var xy = Vec3.add(Vec3(), x, y);\n  MeshBuilder.addTriangle(state, xy, x, y);\n  MeshBuilder.addTriangle(state, xy, y, x);\n  state.currentGroup = 5\n  /* XZ */\n  ;\n  MeshBuilder.addTriangle(state, Vec3.origin, x, z);\n  MeshBuilder.addTriangle(state, Vec3.origin, z, x);\n  var xz = Vec3.add(Vec3(), x, z);\n  MeshBuilder.addTriangle(state, xz, x, z);\n  MeshBuilder.addTriangle(state, xz, z, x);\n  state.currentGroup = 6\n  /* YZ */\n  ;\n  MeshBuilder.addTriangle(state, Vec3.origin, y, z);\n  MeshBuilder.addTriangle(state, Vec3.origin, z, y);\n  var yz = Vec3.add(Vec3(), y, z);\n  MeshBuilder.addTriangle(state, yz, y, z);\n  MeshBuilder.addTriangle(state, yz, z, y);\n  return MeshBuilder.getMesh(state);\n}\n\nfunction getAxesShape(props, shape) {\n  var scale = 100 * props.scale;\n  var mesh = createAxesMesh(scale, shape === null || shape === void 0 ? void 0 : shape.geometry);\n  mesh.setBoundingSphere(Sphere3D.create(Vec3.create(scale / 2, scale / 2, scale / 2), scale + scale / 4));\n\n  var getColor = function (groupId) {\n    switch (groupId) {\n      case 1:\n        return props.colorX;\n\n      case 2:\n        return props.colorY;\n\n      case 3:\n        return props.colorZ;\n\n      default:\n        return ColorNames.grey;\n    }\n  };\n\n  return Shape.create('axes', {}, mesh, getColor, function () {\n    return 1;\n  }, function () {\n    return '';\n  });\n}\n\nfunction createAxesRenderObject(props) {\n  var shape = getAxesShape(props);\n  return Shape.createRenderObject(shape, props);\n}","map":{"version":3,"sources":["../../../src/mol-canvas3d/helper/camera-helper.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2020-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { __assign } from \"tslib\";\r\nimport produce from 'immer';\r\nimport { Interval } from '../../mol-data/int/interval';\r\nimport { addCylinder } from '../../mol-geo/geometry/mesh/builder/cylinder';\r\nimport { addSphere } from '../../mol-geo/geometry/mesh/builder/sphere';\r\nimport { Mesh } from '../../mol-geo/geometry/mesh/mesh';\r\nimport { MeshBuilder } from '../../mol-geo/geometry/mesh/mesh-builder';\r\nimport { Scene } from '../../mol-gl/scene';\r\nimport { Sphere3D } from '../../mol-math/geometry';\r\nimport { Mat4, Vec3 } from '../../mol-math/linear-algebra';\r\nimport { DataLoci, EmptyLoci } from '../../mol-model/loci';\r\nimport { Shape } from '../../mol-model/shape';\r\nimport { Visual } from '../../mol-repr/visual';\r\nimport { ColorNames } from '../../mol-util/color/names';\r\nimport { MarkerActions } from '../../mol-util/marker-action';\r\nimport { ParamDefinition as PD } from '../../mol-util/param-definition';\r\nimport { Camera } from '../camera';\r\n// TODO add scale line/grid\r\nvar AxesParams = __assign(__assign({}, Mesh.Params), { alpha: __assign(__assign({}, Mesh.Params.alpha), { defaultValue: 0.51 }), ignoreLight: __assign(__assign({}, Mesh.Params.ignoreLight), { defaultValue: true }), colorX: PD.Color(ColorNames.red, { isEssential: true }), colorY: PD.Color(ColorNames.green, { isEssential: true }), colorZ: PD.Color(ColorNames.blue, { isEssential: true }), scale: PD.Numeric(0.33, { min: 0.1, max: 2, step: 0.1 }, { isEssential: true }) });\r\nexport var CameraHelperParams = {\r\n    axes: PD.MappedStatic('on', {\r\n        on: PD.Group(AxesParams),\r\n        off: PD.Group({})\r\n    }, { cycle: true, description: 'Show camera orientation axes' }),\r\n};\r\nvar CameraHelper = /** @class */ (function () {\r\n    function CameraHelper(webgl, props) {\r\n        var _this = this;\r\n        if (props === void 0) { props = {}; }\r\n        this.webgl = webgl;\r\n        this.props = {\r\n            axes: { name: 'off', params: {} }\r\n        };\r\n        this.eachGroup = function (loci, apply) {\r\n            if (!_this.renderObject)\r\n                return false;\r\n            if (!isCameraAxesLoci(loci))\r\n                return false;\r\n            var changed = false;\r\n            var groupCount = _this.renderObject.values.uGroupCount.ref.value;\r\n            var elements = loci.elements;\r\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\r\n                var _a = elements_1[_i], groupId = _a.groupId, instanceId = _a.instanceId;\r\n                var idx = instanceId * groupCount + groupId;\r\n                if (apply(Interval.ofSingleton(idx)))\r\n                    changed = true;\r\n            }\r\n            return changed;\r\n        };\r\n        this.scene = Scene.create(webgl);\r\n        this.camera = new Camera();\r\n        Vec3.set(this.camera.up, 0, 1, 0);\r\n        Vec3.set(this.camera.target, 0, 0, 0);\r\n        this.setProps(props);\r\n    }\r\n    CameraHelper.prototype.setProps = function (props) {\r\n        var _this = this;\r\n        this.props = produce(this.props, function (p) {\r\n            if (props.axes !== undefined) {\r\n                p.axes.name = props.axes.name;\r\n                if (props.axes.name === 'on') {\r\n                    _this.scene.clear();\r\n                    var params = __assign(__assign({}, props.axes.params), { scale: props.axes.params.scale * _this.webgl.pixelRatio });\r\n                    _this.renderObject = createAxesRenderObject(params);\r\n                    _this.renderObject.state.noClip = true;\r\n                    _this.scene.add(_this.renderObject);\r\n                    _this.scene.commit();\r\n                    Vec3.set(_this.camera.position, 0, 0, params.scale * 200);\r\n                    Mat4.lookAt(_this.camera.view, _this.camera.position, _this.camera.target, _this.camera.up);\r\n                    p.axes.params = __assign({}, props.axes.params);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(CameraHelper.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return this.props.axes.name === 'on';\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CameraHelper.prototype.getLoci = function (pickingId) {\r\n        var objectId = pickingId.objectId, groupId = pickingId.groupId, instanceId = pickingId.instanceId;\r\n        if (!this.renderObject || objectId !== this.renderObject.id || groupId === 0 /* None */)\r\n            return EmptyLoci;\r\n        return CameraAxesLoci(this, groupId, instanceId);\r\n    };\r\n    CameraHelper.prototype.mark = function (loci, action) {\r\n        if (!MarkerActions.is(MarkerActions.Highlighting, action))\r\n            return false;\r\n        if (!isCameraAxesLoci(loci))\r\n            return false;\r\n        if (loci.data !== this)\r\n            return false;\r\n        return Visual.mark(this.renderObject, loci, action, this.eachGroup);\r\n    };\r\n    CameraHelper.prototype.update = function (camera) {\r\n        if (!this.renderObject)\r\n            return;\r\n        updateCamera(this.camera, camera.viewport, camera.viewOffset);\r\n        Mat4.extractRotation(this.scene.view, camera.view);\r\n        var r = this.renderObject.values.boundingSphere.ref.value.radius;\r\n        Mat4.setTranslation(this.scene.view, Vec3.create(-camera.viewport.width / 2 + r, -camera.viewport.height / 2 + r, 0));\r\n    };\r\n    return CameraHelper;\r\n}());\r\nexport { CameraHelper };\r\nfunction getAxisLabel(axis) {\r\n    switch (axis) {\r\n        case 1 /* X */: return 'X Axis';\r\n        case 2 /* Y */: return 'Y Axis';\r\n        case 3 /* Z */: return 'Z Axis';\r\n        case 4 /* XY */: return 'XY Plane';\r\n        case 5 /* XZ */: return 'XZ Plane';\r\n        case 6 /* YZ */: return 'YZ Plane';\r\n        default: return 'Axes';\r\n    }\r\n}\r\nfunction CameraAxesLoci(cameraHelper, groupId, instanceId) {\r\n    return DataLoci('camera-axes', cameraHelper, [{ groupId: groupId, instanceId: instanceId }], void 0 /** bounding sphere */, function () { return getAxisLabel(groupId); });\r\n}\r\nexport function isCameraAxesLoci(x) {\r\n    return x.kind === 'data-loci' && x.tag === 'camera-axes';\r\n}\r\nfunction updateCamera(camera, viewport, viewOffset) {\r\n    var near = camera.near, far = camera.far;\r\n    var fullLeft = -viewport.width / 2;\r\n    var fullRight = viewport.width / 2;\r\n    var fullTop = viewport.height / 2;\r\n    var fullBottom = -viewport.height / 2;\r\n    var dx = (fullRight - fullLeft) / 2;\r\n    var dy = (fullTop - fullBottom) / 2;\r\n    var cx = (fullRight + fullLeft) / 2;\r\n    var cy = (fullTop + fullBottom) / 2;\r\n    var left = cx - dx;\r\n    var right = cx + dx;\r\n    var top = cy + dy;\r\n    var bottom = cy - dy;\r\n    if (viewOffset.enabled) {\r\n        var scaleW = (fullRight - fullLeft) / viewOffset.width;\r\n        var scaleH = (fullTop - fullBottom) / viewOffset.height;\r\n        left += scaleW * viewOffset.offsetX;\r\n        right = left + scaleW * viewOffset.width;\r\n        top -= scaleH * viewOffset.offsetY;\r\n        bottom = top - scaleH * viewOffset.height;\r\n    }\r\n    Mat4.ortho(camera.projection, left, right, top, bottom, near, far);\r\n}\r\nfunction createAxesMesh(scale, mesh) {\r\n    var state = MeshBuilder.createState(512, 256, mesh);\r\n    var radius = 0.075 * scale;\r\n    var x = Vec3.scale(Vec3(), Vec3.unitX, scale);\r\n    var y = Vec3.scale(Vec3(), Vec3.unitY, scale);\r\n    var z = Vec3.scale(Vec3(), Vec3.unitZ, scale);\r\n    var cylinderProps = { radiusTop: radius, radiusBottom: radius, radialSegments: 32 };\r\n    state.currentGroup = 0 /* None */;\r\n    addSphere(state, Vec3.origin, radius, 2);\r\n    state.currentGroup = 1 /* X */;\r\n    addSphere(state, x, radius, 2);\r\n    addCylinder(state, Vec3.origin, x, 1, cylinderProps);\r\n    state.currentGroup = 2 /* Y */;\r\n    addSphere(state, y, radius, 2);\r\n    addCylinder(state, Vec3.origin, y, 1, cylinderProps);\r\n    state.currentGroup = 3 /* Z */;\r\n    addSphere(state, z, radius, 2);\r\n    addCylinder(state, Vec3.origin, z, 1, cylinderProps);\r\n    Vec3.scale(x, x, 0.5);\r\n    Vec3.scale(y, y, 0.5);\r\n    Vec3.scale(z, z, 0.5);\r\n    state.currentGroup = 4 /* XY */;\r\n    MeshBuilder.addTriangle(state, Vec3.origin, x, y);\r\n    MeshBuilder.addTriangle(state, Vec3.origin, y, x);\r\n    var xy = Vec3.add(Vec3(), x, y);\r\n    MeshBuilder.addTriangle(state, xy, x, y);\r\n    MeshBuilder.addTriangle(state, xy, y, x);\r\n    state.currentGroup = 5 /* XZ */;\r\n    MeshBuilder.addTriangle(state, Vec3.origin, x, z);\r\n    MeshBuilder.addTriangle(state, Vec3.origin, z, x);\r\n    var xz = Vec3.add(Vec3(), x, z);\r\n    MeshBuilder.addTriangle(state, xz, x, z);\r\n    MeshBuilder.addTriangle(state, xz, z, x);\r\n    state.currentGroup = 6 /* YZ */;\r\n    MeshBuilder.addTriangle(state, Vec3.origin, y, z);\r\n    MeshBuilder.addTriangle(state, Vec3.origin, z, y);\r\n    var yz = Vec3.add(Vec3(), y, z);\r\n    MeshBuilder.addTriangle(state, yz, y, z);\r\n    MeshBuilder.addTriangle(state, yz, z, y);\r\n    return MeshBuilder.getMesh(state);\r\n}\r\nfunction getAxesShape(props, shape) {\r\n    var scale = 100 * props.scale;\r\n    var mesh = createAxesMesh(scale, shape === null || shape === void 0 ? void 0 : shape.geometry);\r\n    mesh.setBoundingSphere(Sphere3D.create(Vec3.create(scale / 2, scale / 2, scale / 2), scale + scale / 4));\r\n    var getColor = function (groupId) {\r\n        switch (groupId) {\r\n            case 1: return props.colorX;\r\n            case 2: return props.colorY;\r\n            case 3: return props.colorZ;\r\n            default: return ColorNames.grey;\r\n        }\r\n    };\r\n    return Shape.create('axes', {}, mesh, getColor, function () { return 1; }, function () { return ''; });\r\n}\r\nfunction createAxesRenderObject(props) {\r\n    var shape = getAxesShape(props);\r\n    return Shape.createRenderObject(shape, props);\r\n}\r\n//# sourceMappingURL=camera-helper.js.map"]},"metadata":{},"sourceType":"module"}