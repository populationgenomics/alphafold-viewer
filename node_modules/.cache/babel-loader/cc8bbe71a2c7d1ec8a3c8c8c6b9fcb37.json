{"ast":null,"code":"/**\r\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\nimport { Column } from '../../../../mol-data/db';\nimport { CifWriter } from '../../../../mol-io/writer/cif';\nimport { getModelMmCifCategory, getUniqueEntityIdsFromStructures } from './utils';\nvar CifCategory = CifWriter.Category;\nexport var _struct_asym = createCategory('struct_asym');\nexport var _entity_poly = createCategory('entity_poly');\nexport var _entity_poly_seq = createCategory('entity_poly_seq');\n\nfunction createCategory(categoryName) {\n  return {\n    name: categoryName,\n    instance: function (_a) {\n      var structures = _a.structures,\n          cache = _a.cache;\n      return getCategoryInstance(structures, categoryName, cache);\n    }\n  };\n}\n\nfunction getCategoryInstance(structures, categoryName, cache) {\n  var category = getModelMmCifCategory(structures[0].model, categoryName);\n  if (!category) return CifCategory.Empty;\n  var entity_id = category.entity_id;\n  var names = cache.uniqueEntityIds || (cache.uniqueEntityIds = getUniqueEntityIdsFromStructures(structures));\n  var indices = Column.indicesOf(entity_id, function (id) {\n    return names.has(id);\n  });\n  return CifCategory.ofTable(category, indices);\n}","map":{"version":3,"sources":["../../../../../src/mol-model/structure/export/categories/sequence.ts"],"names":[],"mappings":"AAAA;;;;AAIG;AAEH,SAAS,MAAT,QAAuB,yBAAvB;AACA,SAAS,SAAT,QAA0B,+BAA1B;AAGA,SAAS,qBAAT,EAAgC,gCAAhC,QAAwE,SAAxE;AACA,IAAO,WAAW,GAAG,SAAS,CAAC,QAA/B;AAEA,OAAO,IAAM,YAAY,GAAkC,cAAc,CAAC,aAAD,CAAlE;AACP,OAAO,IAAM,YAAY,GAAkC,cAAc,CAAC,aAAD,CAAlE;AACP,OAAO,IAAM,gBAAgB,GAAkC,cAAc,CAAC,iBAAD,CAAtE;;AAEP,SAAS,cAAT,CAAwB,YAAxB,EAAuF;AACnF,SAAO;AACH,IAAA,IAAI,EAAE,YADH;AAEH,IAAA,QAAQ,EAAA,UAAC,EAAD,EAAsB;UAAnB,UAAU,GAAA,EAAA,CAAA,U;UAAE,KAAK,GAAA,EAAA,CAAA,K;AACxB,aAAO,mBAAmB,CAAC,UAAD,EAAa,YAAb,EAA2B,KAA3B,CAA1B;AACH;AAJE,GAAP;AAMH;;AAED,SAAS,mBAAT,CAA6B,UAA7B,EAAsD,YAAtD,EAAuH,KAAvH,EAAiI;AAC7H,MAAM,QAAQ,GAAG,qBAAqB,CAAC,UAAU,CAAC,CAAD,CAAV,CAAc,KAAf,EAAsB,YAAtB,CAAtC;AACA,MAAI,CAAC,QAAL,EAAe,OAAO,WAAW,CAAC,KAAnB;AACP,MAAA,SAAS,GAAK,QAAQ,CAAb,SAAT;AACR,MAAM,KAAK,GAAG,KAAK,CAAC,eAAN,KAA0B,KAAK,CAAC,eAAN,GAAwB,gCAAgC,CAAC,UAAD,CAAlF,CAAd;AACA,MAAM,OAAO,GAAG,MAAM,CAAC,SAAP,CAAiB,SAAjB,EAA4B,UAAA,EAAA,EAAE;AAAI,WAAA,KAAK,CAAC,GAAN,CAAA,EAAA,CAAA;AAAa,GAA/C,CAAhB;AACA,SAAO,WAAW,CAAC,OAAZ,CAAoB,QAApB,EAA8B,OAA9B,CAAP;AAEH","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nimport { Column } from '../../../../mol-data/db';\r\nimport { CifWriter } from '../../../../mol-io/writer/cif';\r\nimport { getModelMmCifCategory, getUniqueEntityIdsFromStructures } from './utils';\r\nvar CifCategory = CifWriter.Category;\r\nexport var _struct_asym = createCategory('struct_asym');\r\nexport var _entity_poly = createCategory('entity_poly');\r\nexport var _entity_poly_seq = createCategory('entity_poly_seq');\r\nfunction createCategory(categoryName) {\r\n    return {\r\n        name: categoryName,\r\n        instance: function (_a) {\r\n            var structures = _a.structures, cache = _a.cache;\r\n            return getCategoryInstance(structures, categoryName, cache);\r\n        }\r\n    };\r\n}\r\nfunction getCategoryInstance(structures, categoryName, cache) {\r\n    var category = getModelMmCifCategory(structures[0].model, categoryName);\r\n    if (!category)\r\n        return CifCategory.Empty;\r\n    var entity_id = category.entity_id;\r\n    var names = cache.uniqueEntityIds || (cache.uniqueEntityIds = getUniqueEntityIdsFromStructures(structures));\r\n    var indices = Column.indicesOf(entity_id, function (id) { return names.has(id); });\r\n    return CifCategory.ofTable(category, indices);\r\n}\r\n//# sourceMappingURL=sequence.js.map"]},"metadata":{},"sourceType":"module"}