{"ast":null,"code":"/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\nvar emptyArray = [];\n\nfunction getPairKey(indexA, unitA, indexB, unitB) {\n  return indexA + \"|\" + unitA.id + \"|\" + indexB + \"|\" + unitB.id;\n}\n\nvar PairRestraints =\n/** @class */\nfunction () {\n  function PairRestraints(pairs) {\n    this.pairs = pairs;\n    var pairKeyIndices = new Map();\n    this.pairs.forEach(function (p, i) {\n      var key = getPairKey(p.indexA, p.unitA, p.indexB, p.unitB);\n      var indices = pairKeyIndices.get(key);\n      if (indices) indices.push(i);else pairKeyIndices.set(key, [i]);\n    });\n    this.count = pairs.length;\n    this.pairKeyIndices = pairKeyIndices;\n  }\n  /** Indices into this.pairs */\n\n\n  PairRestraints.prototype.getPairIndices = function (indexA, unitA, indexB, unitB) {\n    var key = getPairKey(indexA, unitA, indexB, unitB);\n    return this.pairKeyIndices.get(key) || emptyArray;\n  };\n\n  PairRestraints.prototype.getPairs = function (indexA, unitA, indexB, unitB) {\n    var _this = this;\n\n    var indices = this.getPairIndices(indexA, unitA, indexB, unitB);\n    return indices.map(function (idx) {\n      return _this.pairs[idx];\n    });\n  };\n\n  return PairRestraints;\n}();\n\nexport { PairRestraints };","map":{"version":3,"sources":["../../../src/mol-model-props/integrative/pair-restraints.ts"],"names":[],"mappings":"AAAA;;;;AAIG;AAIH,IAAM,UAAU,GAAa,EAA7B;;AASA,SAAS,UAAT,CAAoB,MAApB,EAAwD,KAAxD,EAAqE,MAArE,EAAyG,KAAzG,EAAoH;AAChH,SAAU,MAAM,GAAA,GAAN,GAAU,KAAK,CAAC,EAAhB,GAAkB,GAAlB,GAAsB,MAAtB,GAA4B,GAA5B,GAAgC,KAAK,CAAC,EAAhD;AACH;;AAED,IAAA,cAAA;AAAA;AAAA,YAAA;AAeI,WAAA,cAAA,CAAmB,KAAnB,EAA0C;AAAvB,SAAA,KAAA,GAAA,KAAA;AACf,QAAM,cAAc,GAAG,IAAI,GAAJ,EAAvB;AACA,SAAK,KAAL,CAAW,OAAX,CAAmB,UAAC,CAAD,EAAI,CAAJ,EAAK;AACpB,UAAM,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC,MAAH,EAAW,CAAC,CAAC,KAAb,EAAoB,CAAC,CAAC,MAAtB,EAA8B,CAAC,CAAC,KAAhC,CAAtB;AACA,UAAM,OAAO,GAAG,cAAc,CAAC,GAAf,CAAmB,GAAnB,CAAhB;AACA,UAAI,OAAJ,EAAa,OAAO,CAAC,IAAR,CAAa,CAAb,EAAb,KACK,cAAc,CAAC,GAAf,CAAmB,GAAnB,EAAwB,CAAC,CAAD,CAAxB;AACR,KALD;AAOA,SAAK,KAAL,GAAa,KAAK,CAAC,MAAnB;AACA,SAAK,cAAL,GAAsB,cAAtB;AACH;AAtBD;;;AACA,EAAA,cAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,MAAf,EAAmD,KAAnD,EAAgE,MAAhE,EAAoG,KAApG,EAA+G;AAC3G,QAAM,GAAG,GAAG,UAAU,CAAC,MAAD,EAAS,KAAT,EAAgB,MAAhB,EAAwB,KAAxB,CAAtB;AACA,WAAO,KAAK,cAAL,CAAoB,GAApB,CAAwB,GAAxB,KAAgC,UAAvC;AACH,GAHD;;AAKA,EAAA,cAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,MAAT,EAA6C,KAA7C,EAA0D,MAA1D,EAA8F,KAA9F,EAAyG;AAAzG,QAAA,KAAA,GAAA,IAAA;;AACI,QAAM,OAAO,GAAG,KAAK,cAAL,CAAoB,MAApB,EAA4B,KAA5B,EAAmC,MAAnC,EAA2C,KAA3C,CAAhB;AACA,WAAO,OAAO,CAAC,GAAR,CAAY,UAAA,GAAA,EAAG;AAAI,aAAA,KAAI,CAAC,KAAL,CAAA,GAAA,CAAA;AAAe,KAAlC,CAAP;AACH,GAHD;;AAiBJ,SAAA,cAAA;AAAC,CA3BD,EAAA","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nvar emptyArray = [];\r\nfunction getPairKey(indexA, unitA, indexB, unitB) {\r\n    return indexA + \"|\" + unitA.id + \"|\" + indexB + \"|\" + unitB.id;\r\n}\r\nvar PairRestraints = /** @class */ (function () {\r\n    function PairRestraints(pairs) {\r\n        this.pairs = pairs;\r\n        var pairKeyIndices = new Map();\r\n        this.pairs.forEach(function (p, i) {\r\n            var key = getPairKey(p.indexA, p.unitA, p.indexB, p.unitB);\r\n            var indices = pairKeyIndices.get(key);\r\n            if (indices)\r\n                indices.push(i);\r\n            else\r\n                pairKeyIndices.set(key, [i]);\r\n        });\r\n        this.count = pairs.length;\r\n        this.pairKeyIndices = pairKeyIndices;\r\n    }\r\n    /** Indices into this.pairs */\r\n    PairRestraints.prototype.getPairIndices = function (indexA, unitA, indexB, unitB) {\r\n        var key = getPairKey(indexA, unitA, indexB, unitB);\r\n        return this.pairKeyIndices.get(key) || emptyArray;\r\n    };\r\n    PairRestraints.prototype.getPairs = function (indexA, unitA, indexB, unitB) {\r\n        var _this = this;\r\n        var indices = this.getPairIndices(indexA, unitA, indexB, unitB);\r\n        return indices.map(function (idx) { return _this.pairs[idx]; });\r\n    };\r\n    return PairRestraints;\r\n}());\r\nexport { PairRestraints };\r\n//# sourceMappingURL=pair-restraints.js.map"]},"metadata":{},"sourceType":"module"}