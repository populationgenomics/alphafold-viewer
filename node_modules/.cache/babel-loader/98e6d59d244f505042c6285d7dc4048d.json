{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { memoizeLatest } from '../../mol-util/memoize';\nimport { StateTransformParameters, TransformControlBase } from './common';\nimport { PluginUIComponent } from '../base';\nexport { UpdateTransformControl, TransformUpdaterControl };\n\nvar UpdateTransformControl =\n/** @class */\nfunction (_super) {\n  __extends(UpdateTransformControl, _super);\n\n  function UpdateTransformControl() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._getInfo = memoizeLatest(function (t) {\n      return StateTransformParameters.infoFromTransform(_this.plugin, _this.props.state, t);\n    });\n    _this.state = {\n      error: void 0,\n      isInitial: true,\n      params: _this.getInfo().initialValues,\n      busy: false,\n      isCollapsed: _this.props.initiallyCollapsed\n    };\n    return _this;\n  }\n\n  UpdateTransformControl.prototype.applyAction = function () {\n    if (this.props.customUpdate) return this.props.customUpdate(this.state.params);\n    return this.plugin.state.updateTransform(this.props.state, this.props.transform.ref, this.state.params);\n  };\n\n  UpdateTransformControl.prototype.getInfo = function () {\n    return this._getInfo(this.props.transform);\n  };\n\n  UpdateTransformControl.prototype.getTransformerId = function () {\n    return this.props.transform.transformer.id;\n  };\n\n  UpdateTransformControl.prototype.getHeader = function () {\n    return this.props.customHeader || this.props.transform.transformer.definition.display;\n  };\n\n  UpdateTransformControl.prototype.canApply = function () {\n    var state = this.props.state;\n    var cell = state.cells.get(this.props.transform.ref);\n    if (!cell) return false;\n\n    if (cell.status === 'error') {\n      var parent_1 = state.cells.get(this.props.transform.parent);\n      if (!parent_1) return false;\n      return parent_1.status === 'ok';\n    }\n\n    return !this.state.error && !this.state.busy && !this.state.isInitial;\n  };\n\n  UpdateTransformControl.prototype.applyText = function () {\n    return this.canApply() ? 'Update' : 'Nothing to Update';\n  };\n\n  UpdateTransformControl.prototype.isUpdate = function () {\n    return true;\n  };\n\n  UpdateTransformControl.prototype.getSourceAndTarget = function () {\n    var bCell = this.props.state.cells.get(this.props.transform.ref);\n    return {\n      a: this.props.state.cells.get(this.props.transform.parent).obj,\n      b: bCell === null || bCell === void 0 ? void 0 : bCell.obj,\n      bCell: bCell\n    };\n  };\n\n  UpdateTransformControl.prototype.canAutoApply = function (newParams) {\n    var autoUpdate = this.props.transform.transformer.definition.canAutoUpdate;\n    if (!autoUpdate) return false;\n    var state = this.props.state;\n    var cell = state.cells.get(this.props.transform.ref);\n    if (!cell || !cell.sourceRef || cell.status !== 'ok') return false;\n    var parentCell = state.cells.get(cell.sourceRef);\n    return autoUpdate({\n      a: parentCell.obj,\n      b: cell.obj,\n      oldParams: this.getInfo().initialValues,\n      newParams: newParams\n    }, this.plugin);\n  };\n\n  UpdateTransformControl.prototype.componentDidMount = function () {\n    var _this = this;\n\n    _super.prototype.componentDidMount.call(this);\n\n    if (this.props.toggleCollapsed) this.subscribe(this.props.toggleCollapsed, function () {\n      return _this.setState({\n        isCollapsed: !_this.state.isCollapsed\n      });\n    });\n    this.subscribe(this.plugin.state.events.object.updated, function (_a) {\n      var ref = _a.ref,\n          state = _a.state;\n      if (_this.props.transform.ref !== ref || _this.props.state !== state) return;\n\n      if (_this.state.params !== _this.props.transform.params) {\n        _this._getInfo = memoizeLatest(function (t) {\n          return StateTransformParameters.infoFromTransform(_this.plugin, _this.props.state, t);\n        });\n\n        _this.setState({\n          params: _this.props.transform.params,\n          isInitial: true\n        });\n      }\n    });\n  };\n\n  UpdateTransformControl.prototype.componentDidUpdate = function (prevProps) {\n    var _a;\n\n    if (this.props.transform !== prevProps.transform) {\n      var cell = this.props.state.cells.get(this.props.transform.ref);\n      this.setState({\n        params: ((_a = cell.params) === null || _a === void 0 ? void 0 : _a.values) || {},\n        isInitial: true,\n        error: void 0,\n        simpleOnly: this.state.simpleOnly\n      });\n    }\n  };\n\n  return UpdateTransformControl;\n}(TransformControlBase);\n\nvar TransformUpdaterControl =\n/** @class */\nfunction (_super) {\n  __extends(TransformUpdaterControl, _super);\n\n  function TransformUpdaterControl() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TransformUpdaterControl.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.state.events.object.updated, function (_a) {\n      var ref = _a.ref,\n          state = _a.state;\n      if (_this.props.nodeRef !== ref || _this.plugin.state.data !== state) return;\n\n      _this.forceUpdate();\n    });\n  };\n\n  TransformUpdaterControl.prototype.render = function () {\n    var state = this.plugin.state.data;\n    var ref = this.props.nodeRef;\n    var cell = state.cells.get(ref);\n    if (!cell || cell.status !== 'ok' && cell.status !== 'error') return null;\n    var transform = cell.transform;\n    return _jsx(UpdateTransformControl, {\n      state: state,\n      transform: transform,\n      initiallyCollapsed: this.props.initiallyCollapsed,\n      customHeader: this.props.header\n    }, void 0);\n  };\n\n  return TransformUpdaterControl;\n}(PluginUIComponent);","map":{"version":3,"sources":["../../../src/mol-plugin-ui/state/update-transform.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\r\nimport { jsx as _jsx } from \"react/jsx-runtime\";\r\nimport { memoizeLatest } from '../../mol-util/memoize';\r\nimport { StateTransformParameters, TransformControlBase } from './common';\r\nimport { PluginUIComponent } from '../base';\r\nexport { UpdateTransformControl, TransformUpdaterControl };\r\nvar UpdateTransformControl = /** @class */ (function (_super) {\r\n    __extends(UpdateTransformControl, _super);\r\n    function UpdateTransformControl() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._getInfo = memoizeLatest(function (t) { return StateTransformParameters.infoFromTransform(_this.plugin, _this.props.state, t); });\r\n        _this.state = { error: void 0, isInitial: true, params: _this.getInfo().initialValues, busy: false, isCollapsed: _this.props.initiallyCollapsed };\r\n        return _this;\r\n    }\r\n    UpdateTransformControl.prototype.applyAction = function () {\r\n        if (this.props.customUpdate)\r\n            return this.props.customUpdate(this.state.params);\r\n        return this.plugin.state.updateTransform(this.props.state, this.props.transform.ref, this.state.params);\r\n    };\r\n    UpdateTransformControl.prototype.getInfo = function () { return this._getInfo(this.props.transform); };\r\n    UpdateTransformControl.prototype.getTransformerId = function () { return this.props.transform.transformer.id; };\r\n    UpdateTransformControl.prototype.getHeader = function () { return this.props.customHeader || this.props.transform.transformer.definition.display; };\r\n    UpdateTransformControl.prototype.canApply = function () {\r\n        var state = this.props.state;\r\n        var cell = state.cells.get(this.props.transform.ref);\r\n        if (!cell)\r\n            return false;\r\n        if (cell.status === 'error') {\r\n            var parent_1 = state.cells.get(this.props.transform.parent);\r\n            if (!parent_1)\r\n                return false;\r\n            return parent_1.status === 'ok';\r\n        }\r\n        return !this.state.error && !this.state.busy && !this.state.isInitial;\r\n    };\r\n    UpdateTransformControl.prototype.applyText = function () { return this.canApply() ? 'Update' : 'Nothing to Update'; };\r\n    UpdateTransformControl.prototype.isUpdate = function () { return true; };\r\n    UpdateTransformControl.prototype.getSourceAndTarget = function () {\r\n        var bCell = this.props.state.cells.get(this.props.transform.ref);\r\n        return {\r\n            a: this.props.state.cells.get(this.props.transform.parent).obj,\r\n            b: bCell === null || bCell === void 0 ? void 0 : bCell.obj,\r\n            bCell: bCell\r\n        };\r\n    };\r\n    UpdateTransformControl.prototype.canAutoApply = function (newParams) {\r\n        var autoUpdate = this.props.transform.transformer.definition.canAutoUpdate;\r\n        if (!autoUpdate)\r\n            return false;\r\n        var state = this.props.state;\r\n        var cell = state.cells.get(this.props.transform.ref);\r\n        if (!cell || !cell.sourceRef || cell.status !== 'ok')\r\n            return false;\r\n        var parentCell = state.cells.get(cell.sourceRef);\r\n        return autoUpdate({ a: parentCell.obj, b: cell.obj, oldParams: this.getInfo().initialValues, newParams: newParams }, this.plugin);\r\n    };\r\n    UpdateTransformControl.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        _super.prototype.componentDidMount.call(this);\r\n        if (this.props.toggleCollapsed)\r\n            this.subscribe(this.props.toggleCollapsed, function () { return _this.setState({ isCollapsed: !_this.state.isCollapsed }); });\r\n        this.subscribe(this.plugin.state.events.object.updated, function (_a) {\r\n            var ref = _a.ref, state = _a.state;\r\n            if (_this.props.transform.ref !== ref || _this.props.state !== state)\r\n                return;\r\n            if (_this.state.params !== _this.props.transform.params) {\r\n                _this._getInfo = memoizeLatest(function (t) { return StateTransformParameters.infoFromTransform(_this.plugin, _this.props.state, t); });\r\n                _this.setState({ params: _this.props.transform.params, isInitial: true });\r\n            }\r\n        });\r\n    };\r\n    UpdateTransformControl.prototype.componentDidUpdate = function (prevProps) {\r\n        var _a;\r\n        if (this.props.transform !== prevProps.transform) {\r\n            var cell = this.props.state.cells.get(this.props.transform.ref);\r\n            this.setState({\r\n                params: ((_a = cell.params) === null || _a === void 0 ? void 0 : _a.values) || {},\r\n                isInitial: true,\r\n                error: void 0,\r\n                simpleOnly: this.state.simpleOnly\r\n            });\r\n        }\r\n    };\r\n    return UpdateTransformControl;\r\n}(TransformControlBase));\r\nvar TransformUpdaterControl = /** @class */ (function (_super) {\r\n    __extends(TransformUpdaterControl, _super);\r\n    function TransformUpdaterControl() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TransformUpdaterControl.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.state.events.object.updated, function (_a) {\r\n            var ref = _a.ref, state = _a.state;\r\n            if (_this.props.nodeRef !== ref || _this.plugin.state.data !== state)\r\n                return;\r\n            _this.forceUpdate();\r\n        });\r\n    };\r\n    TransformUpdaterControl.prototype.render = function () {\r\n        var state = this.plugin.state.data;\r\n        var ref = this.props.nodeRef;\r\n        var cell = state.cells.get(ref);\r\n        if (!cell || (cell.status !== 'ok' && cell.status !== 'error'))\r\n            return null;\r\n        var transform = cell.transform;\r\n        return _jsx(UpdateTransformControl, { state: state, transform: transform, initiallyCollapsed: this.props.initiallyCollapsed, customHeader: this.props.header }, void 0);\r\n    };\r\n    return TransformUpdaterControl;\r\n}(PluginUIComponent));\r\n//# sourceMappingURL=update-transform.js.map"]},"metadata":{},"sourceType":"module"}