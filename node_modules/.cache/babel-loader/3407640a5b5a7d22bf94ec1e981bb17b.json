{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\n/**\r\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\n\nimport * as React from 'react';\nimport { Binding } from '../../mol-util/binding';\nimport { PluginUIComponent } from '../base';\nimport { StateSelection } from '../../mol-state';\nimport { SelectLoci } from '../../mol-plugin/behavior/dynamic/representation';\nimport { FocusLoci } from '../../mol-plugin/behavior/dynamic/representation';\nimport { Icon, ArrowDropDownSvg, ArrowRightSvg, CameraSvg } from '../controls/icons';\nimport { Button } from '../controls/common';\n\nfunction getBindingsList(bindings) {\n  return Object.keys(bindings).map(function (k) {\n    return [k, bindings[k]];\n  });\n}\n\nvar BindingsHelp =\n/** @class */\nfunction (_super) {\n  __extends(BindingsHelp, _super);\n\n  function BindingsHelp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BindingsHelp.prototype.getBindingComponents = function () {\n    var bindingsList = getBindingsList(this.props.bindings);\n    return _jsx(_Fragment, {\n      children: bindingsList.map(function (value) {\n        var name = value[0],\n            binding = value[1];\n        return !Binding.isEmpty(binding) ? _jsxs(\"div\", __assign({\n          style: {\n            marginBottom: '6px'\n          }\n        }, {\n          children: [_jsx(\"b\", {\n            children: binding.action\n          }, void 0), _jsx(\"br\", {}, void 0), _jsx(\"span\", {\n            dangerouslySetInnerHTML: {\n              __html: Binding.format(binding, name)\n            }\n          }, void 0)]\n        }), name) : null;\n      })\n    }, void 0);\n  };\n\n  BindingsHelp.prototype.render = function () {\n    return _jsx(HelpText, {\n      children: this.getBindingComponents()\n    }, void 0);\n  };\n\n  return BindingsHelp;\n}(React.PureComponent);\n\nexport { BindingsHelp };\n\nvar HelpText =\n/** @class */\nfunction (_super) {\n  __extends(HelpText, _super);\n\n  function HelpText() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HelpText.prototype.render = function () {\n    return _jsx(\"div\", __assign({\n      className: 'msp-help-text'\n    }, {\n      children: _jsx(\"div\", {\n        children: this.props.children\n      }, void 0)\n    }), void 0);\n  };\n\n  return HelpText;\n}(React.PureComponent);\n\nexport { HelpText };\n\nvar HelpGroup =\n/** @class */\nfunction (_super) {\n  __extends(HelpGroup, _super);\n\n  function HelpGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      header: _this.props.header,\n      isExpanded: !!_this.props.initiallyExpanded\n    };\n\n    _this.toggleExpanded = function () {\n      return _this.setState({\n        isExpanded: !_this.state.isExpanded\n      });\n    };\n\n    return _this;\n  }\n\n  HelpGroup.prototype.render = function () {\n    return _jsxs(\"div\", __assign({\n      className: 'msp-control-group-wrapper'\n    }, {\n      children: [_jsx(\"div\", __assign({\n        className: 'msp-control-group-header'\n      }, {\n        children: _jsxs(Button, __assign({\n          onClick: this.toggleExpanded\n        }, {\n          children: [_jsx(Icon, {\n            svg: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg\n          }, void 0), this.props.header]\n        }), void 0)\n      }), void 0), this.state.isExpanded && _jsx(\"div\", __assign({\n        className: 'msp-control-offset',\n        style: {\n          display: this.state.isExpanded ? 'block' : 'none'\n        }\n      }, {\n        children: this.props.children\n      }), void 0)]\n    }), void 0);\n  };\n\n  return HelpGroup;\n}(React.PureComponent);\n\nexport { HelpGroup };\n\nfunction HelpSection(props) {\n  return _jsx(\"div\", __assign({\n    className: 'msp-simple-help-section'\n  }, {\n    children: props.header\n  }), void 0);\n}\n\nvar ViewportHelpContent =\n/** @class */\nfunction (_super) {\n  __extends(ViewportHelpContent, _super);\n\n  function ViewportHelpContent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ViewportHelpContent.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.events.canvas3d.settingsUpdated, function () {\n      return _this.forceUpdate();\n    });\n  };\n\n  ViewportHelpContent.prototype.render = function () {\n    var interactionBindings = {};\n    this.plugin.spec.behaviors.forEach(function (b) {\n      var bindings = b.defaultParams.bindings;\n      if (bindings) Object.assign(interactionBindings, bindings);\n    });\n    return _jsxs(_Fragment, {\n      children: [!this.props.selectOnly && this.plugin.canvas3d && _jsx(HelpGroup, __assign({\n        header: 'Moving in 3D'\n      }, {\n        children: _jsx(BindingsHelp, {\n          bindings: this.plugin.canvas3d.props.trackball.bindings\n        }, void 0)\n      }), 'trackball'), _jsx(HelpGroup, __assign({\n        header: 'Mouse Controls'\n      }, {\n        children: _jsx(BindingsHelp, {\n          bindings: interactionBindings\n        }, void 0)\n      }), 'interactions')]\n    }, void 0);\n  };\n\n  return ViewportHelpContent;\n}(PluginUIComponent);\n\nexport { ViewportHelpContent };\n\nvar HelpContent =\n/** @class */\nfunction (_super) {\n  __extends(HelpContent, _super);\n\n  function HelpContent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HelpContent.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.events.canvas3d.settingsUpdated, function () {\n      return _this.forceUpdate();\n    });\n  };\n\n  HelpContent.prototype.formatTriggers = function (binding) {\n    return binding.triggers.map(function (t) {\n      return Binding.Trigger.format(t);\n    }).join(' or ');\n  };\n\n  HelpContent.prototype.getTriggerFor = function (transformer, name) {\n    var state = this.plugin.state.behaviors;\n    var selections = state.select(StateSelection.Generators.ofTransformer(transformer));\n    var params = selections.length === 1 ? selections[0].params : undefined;\n    var bindings = params ? params.values.bindings : {};\n    var binding = name in bindings ? bindings[name] : Binding.Empty;\n    return this.formatTriggers(binding);\n  };\n\n  HelpContent.prototype.render = function () {\n    var selectToggleTriggers = this.getTriggerFor(SelectLoci, 'clickSelectToggle');\n    var focusTriggers = this.getTriggerFor(FocusLoci, 'clickFocus'); // TODO: interactive help, for example for density\n\n    return _jsxs(\"div\", {\n      children: [_jsx(HelpSection, {\n        header: 'Interface Controls'\n      }, void 0), _jsxs(HelpGroup, __assign({\n        header: 'Inline Help'\n      }, {\n        children: [_jsx(HelpText, {\n          children: \"Many user interface elements show a little questionmark icon when hovered over. Clicking the icon toggles the display of an inline help text.\"\n        }, void 0), _jsx(HelpText, {\n          children: \"Tooltips may provide additional information on a user interface element and are shown when hovering over it with the mouse.\"\n        }, void 0)]\n      }), void 0), _jsx(HelpGroup, __assign({\n        header: 'Selections'\n      }, {\n        children: _jsxs(HelpText, {\n          children: [\"The viewer allows changing colors and representations for selections of atoms, residues or chains. Selections can be created by\", _jsxs(\"ul\", __assign({\n            style: {\n              paddingLeft: '20px'\n            }\n          }, {\n            children: [_jsxs(\"li\", {\n              children: [\"picking elements on the 3D canvas or the sequence view using the mouse, e.g. toggle selection using \", selectToggleTriggers, \" (for more see help section on \", _jsx(\"i\", {\n                children: \"Mouse Controls\"\n              }, void 0), \")\"]\n            }, void 0), _jsxs(\"li\", {\n              children: [\"using the \", _jsx(\"i\", {\n                children: \"Add\"\n              }, void 0), \", \", _jsx(\"i\", {\n                children: \"Remove\"\n              }, void 0), \" and \", _jsx(\"i\", {\n                children: \"Only\"\n              }, void 0), \" dropdown buttons in the \", _jsx(\"i\", {\n                children: \"Manage Selection\"\n              }, void 0), \" panel which allow modifing the current selection by predefined sets\"]\n            }, void 0)]\n          }), void 0)]\n        }, void 0)\n      }), void 0), _jsx(HelpGroup, __assign({\n        header: 'Coloring'\n      }, {\n        children: _jsxs(HelpText, {\n          children: [\"There are two ways to color structures. Every representation (e.g. cartoon or spacefill) has a color theme which can be changed using the dropdown for each representation in the \", _jsx(\"i\", {\n            children: \"Structure Settings\"\n          }, void 0), \" panel. Additionally any selection atoms, residues or chains can by given a custom color. For that, first select the parts of the structure to be colored (see help section on \", _jsx(\"i\", {\n            children: \"Selections\"\n          }, void 0), \") and, second, choose a color from the color dropdown botton in the \", _jsx(\"i\", {\n            children: \"Selection\"\n          }, void 0), \" row of the \", _jsx(\"i\", {\n            children: \"Change Representation\"\n          }, void 0), \" panel. The theme color can be seen as a base color that is overpainted by the custom color. Custom colors can be removed for a selection with the 'Clear' option in the color dropdown.\"]\n        }, void 0)\n      }), void 0), _jsx(HelpGroup, __assign({\n        header: 'Representations'\n      }, {\n        children: _jsxs(HelpText, {\n          children: [\"Structures can be shown with many different representations (e.g. cartoon or spacefill). The \", _jsx(\"i\", {\n            children: \"Change Representation\"\n          }, void 0), \" panel offers a collection of predefined styles which can be applied using the \", _jsx(\"i\", {\n            children: \"Preset\"\n          }, void 0), \" dropdown button. Additionally any selection atoms, residues or chains can by shown with a custom representation. For that, first select the parts of the structure to be mofified (see help section on \", _jsx(\"i\", {\n            children: \"Selections\"\n          }, void 0), \") and, second, choose a representation to hide or show from the \", _jsx(\"i\", {\n            children: \"Show\"\n          }, void 0), \" and \", _jsx(\"i\", {\n            children: \"Hide\"\n          }, void 0), \" dropdown bottons in the \", _jsx(\"i\", {\n            children: \"Selection\"\n          }, void 0), \" row of the \", _jsx(\"i\", {\n            children: \"Change Representation\"\n          }, void 0), \" panel. The \", _jsx(\"i\", {\n            children: \"Everything\"\n          }, void 0), \" row applies the action to the whole structure instead of the current selection.\"]\n        }, void 0)\n      }), void 0), _jsx(HelpGroup, __assign({\n        header: 'Surroundings'\n      }, {\n        children: _jsxs(HelpText, {\n          children: [\"To show the surroundings of a residue or ligand, click it in the 3D scene or in the sequence widget using \", focusTriggers, \".\"]\n        }, void 0)\n      }), void 0), _jsx(HelpSection, {\n        header: 'How-to Guides'\n      }, void 0), _jsx(HelpGroup, __assign({\n        header: 'Create an Image'\n      }, {\n        children: _jsxs(HelpText, {\n          children: [_jsxs(\"p\", {\n            children: [\"Use the \", _jsx(Icon, {\n              svg: CameraSvg\n            }, void 0), \" icon in the viewport to bring up the screenshot controls.\"]\n          }, void 0), _jsxs(\"p\", {\n            children: [\"To adjust the size of the image, use the \", _jsx(\"i\", {\n              children: \"Resolution\"\n            }, void 0), \" dropdown.\"]\n          }, void 0)]\n        }, void 0)\n      }), void 0), _jsx(HelpSection, {\n        header: 'Mouse Controls'\n      }, void 0), _jsx(ViewportHelpContent, {}, void 0)]\n    }, void 0);\n  };\n\n  return HelpContent;\n}(PluginUIComponent);\n\nexport { HelpContent };","map":{"version":3,"sources":["../../../src/mol-plugin-ui/viewport/help.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\r\n/**\r\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport * as React from 'react';\r\nimport { Binding } from '../../mol-util/binding';\r\nimport { PluginUIComponent } from '../base';\r\nimport { StateSelection } from '../../mol-state';\r\nimport { SelectLoci } from '../../mol-plugin/behavior/dynamic/representation';\r\nimport { FocusLoci } from '../../mol-plugin/behavior/dynamic/representation';\r\nimport { Icon, ArrowDropDownSvg, ArrowRightSvg, CameraSvg } from '../controls/icons';\r\nimport { Button } from '../controls/common';\r\nfunction getBindingsList(bindings) {\r\n    return Object.keys(bindings).map(function (k) { return [k, bindings[k]]; });\r\n}\r\nvar BindingsHelp = /** @class */ (function (_super) {\r\n    __extends(BindingsHelp, _super);\r\n    function BindingsHelp() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    BindingsHelp.prototype.getBindingComponents = function () {\r\n        var bindingsList = getBindingsList(this.props.bindings);\r\n        return _jsx(_Fragment, { children: bindingsList.map(function (value) {\r\n                var name = value[0], binding = value[1];\r\n                return !Binding.isEmpty(binding)\r\n                    ? _jsxs(\"div\", __assign({ style: { marginBottom: '6px' } }, { children: [_jsx(\"b\", { children: binding.action }, void 0), _jsx(\"br\", {}, void 0), _jsx(\"span\", { dangerouslySetInnerHTML: { __html: Binding.format(binding, name) } }, void 0)] }), name)\r\n                    : null;\r\n            }) }, void 0);\r\n    };\r\n    BindingsHelp.prototype.render = function () {\r\n        return _jsx(HelpText, { children: this.getBindingComponents() }, void 0);\r\n    };\r\n    return BindingsHelp;\r\n}(React.PureComponent));\r\nexport { BindingsHelp };\r\nvar HelpText = /** @class */ (function (_super) {\r\n    __extends(HelpText, _super);\r\n    function HelpText() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HelpText.prototype.render = function () {\r\n        return _jsx(\"div\", __assign({ className: 'msp-help-text' }, { children: _jsx(\"div\", { children: this.props.children }, void 0) }), void 0);\r\n    };\r\n    return HelpText;\r\n}(React.PureComponent));\r\nexport { HelpText };\r\nvar HelpGroup = /** @class */ (function (_super) {\r\n    __extends(HelpGroup, _super);\r\n    function HelpGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            header: _this.props.header,\r\n            isExpanded: !!_this.props.initiallyExpanded\r\n        };\r\n        _this.toggleExpanded = function () { return _this.setState({ isExpanded: !_this.state.isExpanded }); };\r\n        return _this;\r\n    }\r\n    HelpGroup.prototype.render = function () {\r\n        return _jsxs(\"div\", __assign({ className: 'msp-control-group-wrapper' }, { children: [_jsx(\"div\", __assign({ className: 'msp-control-group-header' }, { children: _jsxs(Button, __assign({ onClick: this.toggleExpanded }, { children: [_jsx(Icon, { svg: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg }, void 0), this.props.header] }), void 0) }), void 0), this.state.isExpanded && _jsx(\"div\", __assign({ className: 'msp-control-offset', style: { display: this.state.isExpanded ? 'block' : 'none' } }, { children: this.props.children }), void 0)] }), void 0);\r\n    };\r\n    return HelpGroup;\r\n}(React.PureComponent));\r\nexport { HelpGroup };\r\nfunction HelpSection(props) {\r\n    return _jsx(\"div\", __assign({ className: 'msp-simple-help-section' }, { children: props.header }), void 0);\r\n}\r\nvar ViewportHelpContent = /** @class */ (function (_super) {\r\n    __extends(ViewportHelpContent, _super);\r\n    function ViewportHelpContent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ViewportHelpContent.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.events.canvas3d.settingsUpdated, function () { return _this.forceUpdate(); });\r\n    };\r\n    ViewportHelpContent.prototype.render = function () {\r\n        var interactionBindings = {};\r\n        this.plugin.spec.behaviors.forEach(function (b) {\r\n            var bindings = b.defaultParams.bindings;\r\n            if (bindings)\r\n                Object.assign(interactionBindings, bindings);\r\n        });\r\n        return _jsxs(_Fragment, { children: [(!this.props.selectOnly && this.plugin.canvas3d) && _jsx(HelpGroup, __assign({ header: 'Moving in 3D' }, { children: _jsx(BindingsHelp, { bindings: this.plugin.canvas3d.props.trackball.bindings }, void 0) }), 'trackball'), _jsx(HelpGroup, __assign({ header: 'Mouse Controls' }, { children: _jsx(BindingsHelp, { bindings: interactionBindings }, void 0) }), 'interactions')] }, void 0);\r\n    };\r\n    return ViewportHelpContent;\r\n}(PluginUIComponent));\r\nexport { ViewportHelpContent };\r\nvar HelpContent = /** @class */ (function (_super) {\r\n    __extends(HelpContent, _super);\r\n    function HelpContent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HelpContent.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.events.canvas3d.settingsUpdated, function () { return _this.forceUpdate(); });\r\n    };\r\n    HelpContent.prototype.formatTriggers = function (binding) {\r\n        return binding.triggers.map(function (t) { return Binding.Trigger.format(t); }).join(' or ');\r\n    };\r\n    HelpContent.prototype.getTriggerFor = function (transformer, name) {\r\n        var state = this.plugin.state.behaviors;\r\n        var selections = state.select(StateSelection.Generators.ofTransformer(transformer));\r\n        var params = selections.length === 1 ? selections[0].params : undefined;\r\n        var bindings = params ? params.values.bindings : {};\r\n        var binding = name in bindings ? bindings[name] : Binding.Empty;\r\n        return this.formatTriggers(binding);\r\n    };\r\n    HelpContent.prototype.render = function () {\r\n        var selectToggleTriggers = this.getTriggerFor(SelectLoci, 'clickSelectToggle');\r\n        var focusTriggers = this.getTriggerFor(FocusLoci, 'clickFocus');\r\n        // TODO: interactive help, for example for density\r\n        return _jsxs(\"div\", { children: [_jsx(HelpSection, { header: 'Interface Controls' }, void 0), _jsxs(HelpGroup, __assign({ header: 'Inline Help' }, { children: [_jsx(HelpText, { children: \"Many user interface elements show a little questionmark icon when hovered over. Clicking the icon toggles the display of an inline help text.\" }, void 0), _jsx(HelpText, { children: \"Tooltips may provide additional information on a user interface element and are shown when hovering over it with the mouse.\" }, void 0)] }), void 0), _jsx(HelpGroup, __assign({ header: 'Selections' }, { children: _jsxs(HelpText, { children: [\"The viewer allows changing colors and representations for selections of atoms, residues or chains. Selections can be created by\", _jsxs(\"ul\", __assign({ style: { paddingLeft: '20px' } }, { children: [_jsxs(\"li\", { children: [\"picking elements on the 3D canvas or the sequence view using the mouse, e.g. toggle selection using \", selectToggleTriggers, \" (for more see help section on \", _jsx(\"i\", { children: \"Mouse Controls\" }, void 0), \")\"] }, void 0), _jsxs(\"li\", { children: [\"using the \", _jsx(\"i\", { children: \"Add\" }, void 0), \", \", _jsx(\"i\", { children: \"Remove\" }, void 0), \" and \", _jsx(\"i\", { children: \"Only\" }, void 0), \" dropdown buttons in the \", _jsx(\"i\", { children: \"Manage Selection\" }, void 0), \" panel which allow modifing the current selection by predefined sets\"] }, void 0)] }), void 0)] }, void 0) }), void 0), _jsx(HelpGroup, __assign({ header: 'Coloring' }, { children: _jsxs(HelpText, { children: [\"There are two ways to color structures. Every representation (e.g. cartoon or spacefill) has a color theme which can be changed using the dropdown for each representation in the \", _jsx(\"i\", { children: \"Structure Settings\" }, void 0), \" panel. Additionally any selection atoms, residues or chains can by given a custom color. For that, first select the parts of the structure to be colored (see help section on \", _jsx(\"i\", { children: \"Selections\" }, void 0), \") and, second, choose a color from the color dropdown botton in the \", _jsx(\"i\", { children: \"Selection\" }, void 0), \" row of the \", _jsx(\"i\", { children: \"Change Representation\" }, void 0), \" panel. The theme color can be seen as a base color that is overpainted by the custom color. Custom colors can be removed for a selection with the 'Clear' option in the color dropdown.\"] }, void 0) }), void 0), _jsx(HelpGroup, __assign({ header: 'Representations' }, { children: _jsxs(HelpText, { children: [\"Structures can be shown with many different representations (e.g. cartoon or spacefill). The \", _jsx(\"i\", { children: \"Change Representation\" }, void 0), \" panel offers a collection of predefined styles which can be applied using the \", _jsx(\"i\", { children: \"Preset\" }, void 0), \" dropdown button. Additionally any selection atoms, residues or chains can by shown with a custom representation. For that, first select the parts of the structure to be mofified (see help section on \", _jsx(\"i\", { children: \"Selections\" }, void 0), \") and, second, choose a representation to hide or show from the \", _jsx(\"i\", { children: \"Show\" }, void 0), \" and \", _jsx(\"i\", { children: \"Hide\" }, void 0), \" dropdown bottons in the \", _jsx(\"i\", { children: \"Selection\" }, void 0), \" row of the \", _jsx(\"i\", { children: \"Change Representation\" }, void 0), \" panel. The \", _jsx(\"i\", { children: \"Everything\" }, void 0), \" row applies the action to the whole structure instead of the current selection.\"] }, void 0) }), void 0), _jsx(HelpGroup, __assign({ header: 'Surroundings' }, { children: _jsxs(HelpText, { children: [\"To show the surroundings of a residue or ligand, click it in the 3D scene or in the sequence widget using \", focusTriggers, \".\"] }, void 0) }), void 0), _jsx(HelpSection, { header: 'How-to Guides' }, void 0), _jsx(HelpGroup, __assign({ header: 'Create an Image' }, { children: _jsxs(HelpText, { children: [_jsxs(\"p\", { children: [\"Use the \", _jsx(Icon, { svg: CameraSvg }, void 0), \" icon in the viewport to bring up the screenshot controls.\"] }, void 0), _jsxs(\"p\", { children: [\"To adjust the size of the image, use the \", _jsx(\"i\", { children: \"Resolution\" }, void 0), \" dropdown.\"] }, void 0)] }, void 0) }), void 0), _jsx(HelpSection, { header: 'Mouse Controls' }, void 0), _jsx(ViewportHelpContent, {}, void 0)] }, void 0);\r\n    };\r\n    return HelpContent;\r\n}(PluginUIComponent));\r\nexport { HelpContent };\r\n//# sourceMappingURL=help.js.map"]},"metadata":{},"sourceType":"module"}