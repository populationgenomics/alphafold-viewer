{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\n/**\r\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\n\nimport * as React from 'react';\nimport { Button, ControlGroup } from './common';\nimport { CloseSvg, ArrowDropDownSvg, ArrowRightSvg, CheckSvg } from './icons';\n\nvar ActionMenu =\n/** @class */\nfunction (_super) {\n  __extends(ActionMenu, _super);\n\n  function ActionMenu() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hide = function () {\n      return _this.props.onSelect(void 0);\n    };\n\n    return _this;\n  }\n\n  ActionMenu.prototype.render = function () {\n    var cmd = this.props;\n\n    var section = _jsx(Section, {\n      items: cmd.items,\n      onSelect: cmd.onSelect,\n      current: cmd.current,\n      multiselect: this.props.multiselect,\n      noOffset: this.props.noOffset,\n      noAccent: this.props.noAccent\n    }, void 0);\n\n    return _jsxs(\"div\", __assign({\n      className: \"msp-action-menu-options\" + (cmd.header ? '' : ' msp-action-menu-options-no-header')\n    }, {\n      children: [cmd.header && _jsx(ControlGroup, __assign({\n        header: cmd.header,\n        title: cmd.title,\n        initialExpanded: true,\n        hideExpander: true,\n        hideOffset: true,\n        onHeaderClick: this.hide,\n        topRightIcon: CloseSvg\n      }, {\n        children: section\n      }), void 0), !cmd.header && section]\n    }), void 0);\n  };\n\n  return ActionMenu;\n}(React.PureComponent);\n\nexport { ActionMenu };\n\n(function (ActionMenu) {\n  function Header(label, options) {\n    return options ? __assign({\n      kind: 'header',\n      label: label\n    }, options) : {\n      kind: 'header',\n      label: label\n    };\n  }\n\n  ActionMenu.Header = Header;\n\n  function Item(label, value, options) {\n    return __assign({\n      kind: 'item',\n      label: label,\n      value: value\n    }, options);\n  }\n\n  ActionMenu.Item = Item;\n\n  function createItems(xs, params) {\n    var _a = params || {},\n        label = _a.label,\n        value = _a.value,\n        category = _a.category,\n        selected = _a.selected,\n        icon = _a.icon,\n        addOn = _a.addOn,\n        description = _a.description;\n\n    var cats = void 0;\n    var items = [];\n\n    for (var i = 0; i < xs.length; i++) {\n      var x = xs[i];\n      if ((params === null || params === void 0 ? void 0 : params.filter) && !params.filter(x)) continue;\n      var catName = category === null || category === void 0 ? void 0 : category(x);\n      var l = label ? label(x) : '' + x;\n      var v = value ? value(x) : x;\n      var d = description ? description(x) : typeof x === 'string' ? x : undefined;\n      var cat = void 0;\n\n      if (!!catName) {\n        if (!cats) cats = new Map();\n        cat = cats.get(catName);\n\n        if (!cat) {\n          cat = [ActionMenu.Header(catName, {\n            description: catName\n          })];\n          cats.set(catName, cat);\n          items.push(cat);\n        }\n      } else {\n        cat = items;\n      }\n\n      var ao = addOn === null || addOn === void 0 ? void 0 : addOn(x);\n      cat.push({\n        kind: 'item',\n        label: l,\n        value: v,\n        icon: icon ? icon(x) : void 0,\n        selected: selected ? selected(x) : void 0,\n        addOn: ao,\n        description: d\n      });\n    }\n\n    return items;\n  }\n\n  ActionMenu.createItems = createItems;\n  var _selectOptions = {\n    value: function (o) {\n      return o[0];\n    },\n    label: function (o) {\n      return o[1];\n    },\n    category: function (o) {\n      return o[2];\n    }\n  };\n\n  function createItemsFromSelectOptions(options, params) {\n    return createItems(options, params ? __assign(__assign({}, _selectOptions), params) : _selectOptions);\n  }\n\n  ActionMenu.createItemsFromSelectOptions = createItemsFromSelectOptions;\n\n  function hasSelectedItem(items) {\n    if (isHeader(items)) return false;\n    if (isItem(items)) return !!items.selected;\n\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var s = items_1[_i];\n      var found = hasSelectedItem(s);\n      if (found) return true;\n    }\n\n    return false;\n  }\n\n  ActionMenu.hasSelectedItem = hasSelectedItem;\n\n  function findItem(items, value) {\n    if (isHeader(items)) return;\n    if (isItem(items)) return items.value === value ? items : void 0;\n\n    for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n      var s = items_2[_i];\n      var found = findItem(s, value);\n      if (found) return found;\n    }\n  }\n\n  ActionMenu.findItem = findItem;\n\n  function getFirstItem(items) {\n    if (isHeader(items)) return;\n    if (isItem(items)) return items;\n\n    for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n      var s = items_3[_i];\n      var found = getFirstItem(s);\n      if (found) return found;\n    }\n  }\n\n  ActionMenu.getFirstItem = getFirstItem; // export type SelectProps<T> = {\n  //     items: Items,\n  //     onSelect: (item: Item) => void,\n  //     disabled?: boolean,\n  //     label?: string,\n  //     current?: Item,\n  //     style?: React.CSSProperties\n  // }\n  // export class Select<T> extends React.PureComponent<SelectProps<T>, { isExpanded: boolean }> {\n  //     state = { isExpanded: false };\n  //     toggleExpanded = () => this.setState({ isExpanded: !this.state.isExpanded })\n  //     onSelect: OnSelect = (item) => {\n  //         this.setState({ isExpanded: false });\n  //         if (!item) return;\n  //         this.onSelect(item);\n  //     }\n  //     render() {\n  //         const current = this.props.current;\n  //         const label = this.props.label || current?.label || '';\n  //         return <div className='msp-action-menu-select' style={this.props.style}>\n  //             <ToggleButton disabled={this.props.disabled} style={{ textAlign: 'left' }} className='msp-no-overflow'\n  //                 label={label} title={label as string} toggle={this.toggleExpanded} isSelected={this.state.isExpanded} />\n  //             {this.state.isExpanded && <ActionMenu items={this.props.items} current={this.props.current} onSelect={this.onSelect} />}\n  //         </div>\n  //     }\n  // }\n})(ActionMenu || (ActionMenu = {}));\n\nvar Section =\n/** @class */\nfunction (_super) {\n  __extends(Section, _super);\n\n  function Section() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = Section.createState(_this.props);\n\n    _this.toggleExpanded = function (e) {\n      _this.setState({\n        isExpanded: !_this.state.isExpanded\n      });\n\n      e.currentTarget.blur();\n    };\n\n    _this.selectAll = function () {\n      var items = collectItems(_this.props.items, []).filter(function (i) {\n        return !i.selected;\n      });\n\n      _this.props.onSelect(items);\n    };\n\n    _this.selectNone = function () {\n      var items = collectItems(_this.props.items, []).filter(function (i) {\n        return !!i.selected;\n      });\n\n      _this.props.onSelect(items);\n    };\n\n    return _this;\n  }\n\n  Section.createState = function (props, isExpanded) {\n    var header = isItems(props.items) && isHeader(props.items[0]) ? props.items[0] : void 0;\n    var hasCurrent = (header === null || header === void 0 ? void 0 : header.isIndependent) ? false : props.multiselect ? ActionMenu.hasSelectedItem(props.items) : !!props.current && !!ActionMenu.findItem(props.items, props.current.value) || ActionMenu.hasSelectedItem(props.items);\n    return {\n      header: header,\n      hasCurrent: hasCurrent,\n      isExpanded: hasCurrent || (isExpanded !== null && isExpanded !== void 0 ? isExpanded : !!(header === null || header === void 0 ? void 0 : header.initiallyExpanded))\n    };\n  };\n\n  Section.prototype.componentDidUpdate = function (prevProps) {\n    if (this.props.items !== prevProps.items || this.props.current !== prevProps.current) {\n      // keep previously expanded section if the header label is the same\n      var isExpanded = isItems(this.props.items) && isItems(prevProps.items) && isHeader(this.props.items[0]) && isHeader(prevProps.items[0]) && this.props.items[0].label === prevProps.items[0].label ? this.state.isExpanded : undefined;\n      this.setState(Section.createState(this.props, isExpanded));\n    }\n  };\n\n  Object.defineProperty(Section.prototype, \"multiselectHeader\", {\n    get: function () {\n      var _a = this.state,\n          header = _a.header,\n          hasCurrent = _a.hasCurrent;\n      return _jsxs(\"div\", __assign({\n        className: 'msp-flex-row msp-control-group-header'\n      }, {\n        children: [_jsx(Button, __assign({\n          icon: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg,\n          flex: true,\n          noOverflow: true,\n          onClick: this.toggleExpanded,\n          title: \"Click to \" + (this.state.isExpanded ? 'collapse' : 'expand') + \".\" + ((header === null || header === void 0 ? void 0 : header.description) ? \" \" + (header === null || header === void 0 ? void 0 : header.description) : '')\n        }, {\n          children: hasCurrent ? _jsx(\"b\", {\n            children: header === null || header === void 0 ? void 0 : header.label\n          }, void 0) : header === null || header === void 0 ? void 0 : header.label\n        }), void 0), _jsx(Button, __assign({\n          icon: CheckSvg,\n          flex: true,\n          onClick: this.selectAll,\n          style: {\n            flex: '0 0 50px',\n            textAlign: 'right'\n          }\n        }, {\n          children: \"All\"\n        }), void 0), _jsx(Button, __assign({\n          icon: CloseSvg,\n          flex: true,\n          onClick: this.selectNone,\n          style: {\n            flex: '0 0 50px',\n            textAlign: 'right'\n          }\n        }, {\n          children: \"None\"\n        }), void 0)]\n      }), void 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Section.prototype, \"basicHeader\", {\n    get: function () {\n      var _a = this.state,\n          header = _a.header,\n          hasCurrent = _a.hasCurrent;\n      return _jsx(\"div\", __assign({\n        className: 'msp-control-group-header',\n        style: {\n          marginTop: '1px'\n        }\n      }, {\n        children: _jsx(Button, __assign({\n          noOverflow: true,\n          icon: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg,\n          onClick: this.toggleExpanded,\n          title: \"Click to \" + (this.state.isExpanded ? 'collapse' : 'expand') + \". \" + ((header === null || header === void 0 ? void 0 : header.description) ? header === null || header === void 0 ? void 0 : header.description : '')\n        }, {\n          children: hasCurrent ? _jsx(\"b\", {\n            children: header === null || header === void 0 ? void 0 : header.label\n          }, void 0) : header === null || header === void 0 ? void 0 : header.label\n        }), void 0)\n      }), void 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Section.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        items = _a.items,\n        onSelect = _a.onSelect,\n        current = _a.current;\n    if (isHeader(items)) return null;\n    if (isItem(items)) return _jsx(Action, {\n      item: items,\n      onSelect: onSelect,\n      current: current,\n      multiselect: this.props.multiselect\n    }, void 0);\n    var header = this.state.header;\n    return _jsxs(_Fragment, {\n      children: [header && (this.props.multiselect && this.state.isExpanded ? this.multiselectHeader : this.basicHeader), _jsx(\"div\", __assign({\n        className: this.props.noOffset ? void 0 : this.props.noAccent ? 'msp-control-offset' : 'msp-accent-offset'\n      }, {\n        children: (!header || this.state.isExpanded) && items.map(function (x, i) {\n          if (isHeader(x)) return null;\n          if (isItem(x)) return _jsx(Action, {\n            item: x,\n            onSelect: onSelect,\n            current: current,\n            multiselect: _this.props.multiselect\n          }, i);\n          return _jsx(Section, {\n            items: x,\n            onSelect: onSelect,\n            current: current,\n            multiselect: _this.props.multiselect,\n            noAccent: true\n          }, i);\n        })\n      }), void 0)]\n    }, void 0);\n  };\n\n  return Section;\n}(React.PureComponent);\n\nvar Action = function (_a) {\n  var item = _a.item,\n      onSelect = _a.onSelect,\n      current = _a.current,\n      multiselect = _a.multiselect;\n  var isCurrent = current === item;\n  var style = item.addOn ? {\n    position: 'relative'\n  } : void 0;\n  return _jsxs(Button, __assign({\n    icon: item.icon,\n    noOverflow: true,\n    className: 'msp-action-menu-button',\n    onClick: function (e) {\n      return onSelect(multiselect ? [item] : item, e);\n    },\n    disabled: item.disabled,\n    style: style,\n    title: item.description\n  }, {\n    children: [isCurrent || item.selected ? _jsx(\"b\", {\n      children: item.label\n    }, void 0) : item.label, item.addOn]\n  }), void 0);\n};\n\nfunction isItems(x) {\n  return !!x && Array.isArray(x);\n}\n\nfunction isItem(x) {\n  var v = x;\n  return v && v.kind === 'item';\n}\n\nfunction isHeader(x) {\n  var v = x;\n  return v && v.kind === 'header';\n}\n\nfunction collectItems(items, target) {\n  if (isHeader(items)) return target;\n\n  if (isItem(items)) {\n    target.push(items);\n    return target;\n  }\n\n  for (var _i = 0, items_4 = items; _i < items_4.length; _i++) {\n    var i = items_4[_i];\n    collectItems(i, target);\n  }\n\n  return target;\n}","map":{"version":3,"sources":["../../../src/mol-plugin-ui/controls/action-menu.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\r\n/**\r\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport * as React from 'react';\r\nimport { Button, ControlGroup } from './common';\r\nimport { CloseSvg, ArrowDropDownSvg, ArrowRightSvg, CheckSvg } from './icons';\r\nvar ActionMenu = /** @class */ (function (_super) {\r\n    __extends(ActionMenu, _super);\r\n    function ActionMenu() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.hide = function () { return _this.props.onSelect(void 0); };\r\n        return _this;\r\n    }\r\n    ActionMenu.prototype.render = function () {\r\n        var cmd = this.props;\r\n        var section = _jsx(Section, { items: cmd.items, onSelect: cmd.onSelect, current: cmd.current, multiselect: this.props.multiselect, noOffset: this.props.noOffset, noAccent: this.props.noAccent }, void 0);\r\n        return _jsxs(\"div\", __assign({ className: \"msp-action-menu-options\" + (cmd.header ? '' : ' msp-action-menu-options-no-header') }, { children: [cmd.header && _jsx(ControlGroup, __assign({ header: cmd.header, title: cmd.title, initialExpanded: true, hideExpander: true, hideOffset: true, onHeaderClick: this.hide, topRightIcon: CloseSvg }, { children: section }), void 0), !cmd.header && section] }), void 0);\r\n    };\r\n    return ActionMenu;\r\n}(React.PureComponent));\r\nexport { ActionMenu };\r\n(function (ActionMenu) {\r\n    function Header(label, options) {\r\n        return options ? __assign({ kind: 'header', label: label }, options) : { kind: 'header', label: label };\r\n    }\r\n    ActionMenu.Header = Header;\r\n    function Item(label, value, options) {\r\n        return __assign({ kind: 'item', label: label, value: value }, options);\r\n    }\r\n    ActionMenu.Item = Item;\r\n    function createItems(xs, params) {\r\n        var _a = params || {}, label = _a.label, value = _a.value, category = _a.category, selected = _a.selected, icon = _a.icon, addOn = _a.addOn, description = _a.description;\r\n        var cats = void 0;\r\n        var items = [];\r\n        for (var i = 0; i < xs.length; i++) {\r\n            var x = xs[i];\r\n            if ((params === null || params === void 0 ? void 0 : params.filter) && !params.filter(x))\r\n                continue;\r\n            var catName = category === null || category === void 0 ? void 0 : category(x);\r\n            var l = label ? label(x) : '' + x;\r\n            var v = value ? value(x) : x;\r\n            var d = description ? description(x) :\r\n                typeof x === 'string' ? x : undefined;\r\n            var cat = void 0;\r\n            if (!!catName) {\r\n                if (!cats)\r\n                    cats = new Map();\r\n                cat = cats.get(catName);\r\n                if (!cat) {\r\n                    cat = [ActionMenu.Header(catName, { description: catName })];\r\n                    cats.set(catName, cat);\r\n                    items.push(cat);\r\n                }\r\n            }\r\n            else {\r\n                cat = items;\r\n            }\r\n            var ao = addOn === null || addOn === void 0 ? void 0 : addOn(x);\r\n            cat.push({ kind: 'item', label: l, value: v, icon: icon ? icon(x) : void 0, selected: selected ? selected(x) : void 0, addOn: ao, description: d });\r\n        }\r\n        return items;\r\n    }\r\n    ActionMenu.createItems = createItems;\r\n    var _selectOptions = { value: function (o) { return o[0]; }, label: function (o) { return o[1]; }, category: function (o) { return o[2]; } };\r\n    function createItemsFromSelectOptions(options, params) {\r\n        return createItems(options, params ? __assign(__assign({}, _selectOptions), params) : _selectOptions);\r\n    }\r\n    ActionMenu.createItemsFromSelectOptions = createItemsFromSelectOptions;\r\n    function hasSelectedItem(items) {\r\n        if (isHeader(items))\r\n            return false;\r\n        if (isItem(items))\r\n            return !!items.selected;\r\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n            var s = items_1[_i];\r\n            var found = hasSelectedItem(s);\r\n            if (found)\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n    ActionMenu.hasSelectedItem = hasSelectedItem;\r\n    function findItem(items, value) {\r\n        if (isHeader(items))\r\n            return;\r\n        if (isItem(items))\r\n            return items.value === value ? items : void 0;\r\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\r\n            var s = items_2[_i];\r\n            var found = findItem(s, value);\r\n            if (found)\r\n                return found;\r\n        }\r\n    }\r\n    ActionMenu.findItem = findItem;\r\n    function getFirstItem(items) {\r\n        if (isHeader(items))\r\n            return;\r\n        if (isItem(items))\r\n            return items;\r\n        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\r\n            var s = items_3[_i];\r\n            var found = getFirstItem(s);\r\n            if (found)\r\n                return found;\r\n        }\r\n    }\r\n    ActionMenu.getFirstItem = getFirstItem;\r\n    // export type SelectProps<T> = {\r\n    //     items: Items,\r\n    //     onSelect: (item: Item) => void,\r\n    //     disabled?: boolean,\r\n    //     label?: string,\r\n    //     current?: Item,\r\n    //     style?: React.CSSProperties\r\n    // }\r\n    // export class Select<T> extends React.PureComponent<SelectProps<T>, { isExpanded: boolean }> {\r\n    //     state = { isExpanded: false };\r\n    //     toggleExpanded = () => this.setState({ isExpanded: !this.state.isExpanded })\r\n    //     onSelect: OnSelect = (item) => {\r\n    //         this.setState({ isExpanded: false });\r\n    //         if (!item) return;\r\n    //         this.onSelect(item);\r\n    //     }\r\n    //     render() {\r\n    //         const current = this.props.current;\r\n    //         const label = this.props.label || current?.label || '';\r\n    //         return <div className='msp-action-menu-select' style={this.props.style}>\r\n    //             <ToggleButton disabled={this.props.disabled} style={{ textAlign: 'left' }} className='msp-no-overflow'\r\n    //                 label={label} title={label as string} toggle={this.toggleExpanded} isSelected={this.state.isExpanded} />\r\n    //             {this.state.isExpanded && <ActionMenu items={this.props.items} current={this.props.current} onSelect={this.onSelect} />}\r\n    //         </div>\r\n    //     }\r\n    // }\r\n})(ActionMenu || (ActionMenu = {}));\r\nvar Section = /** @class */ (function (_super) {\r\n    __extends(Section, _super);\r\n    function Section() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = Section.createState(_this.props);\r\n        _this.toggleExpanded = function (e) {\r\n            _this.setState({ isExpanded: !_this.state.isExpanded });\r\n            e.currentTarget.blur();\r\n        };\r\n        _this.selectAll = function () {\r\n            var items = collectItems(_this.props.items, []).filter(function (i) { return !i.selected; });\r\n            _this.props.onSelect(items);\r\n        };\r\n        _this.selectNone = function () {\r\n            var items = collectItems(_this.props.items, []).filter(function (i) { return !!i.selected; });\r\n            _this.props.onSelect(items);\r\n        };\r\n        return _this;\r\n    }\r\n    Section.createState = function (props, isExpanded) {\r\n        var header = isItems(props.items) && isHeader(props.items[0]) ? props.items[0] : void 0;\r\n        var hasCurrent = (header === null || header === void 0 ? void 0 : header.isIndependent)\r\n            ? false\r\n            : props.multiselect\r\n                ? ActionMenu.hasSelectedItem(props.items)\r\n                : (!!props.current && !!ActionMenu.findItem(props.items, props.current.value)) || ActionMenu.hasSelectedItem(props.items);\r\n        return {\r\n            header: header,\r\n            hasCurrent: hasCurrent,\r\n            isExpanded: hasCurrent || (isExpanded !== null && isExpanded !== void 0 ? isExpanded : !!(header === null || header === void 0 ? void 0 : header.initiallyExpanded))\r\n        };\r\n    };\r\n    Section.prototype.componentDidUpdate = function (prevProps) {\r\n        if (this.props.items !== prevProps.items || this.props.current !== prevProps.current) {\r\n            // keep previously expanded section if the header label is the same\r\n            var isExpanded = (isItems(this.props.items) && isItems(prevProps.items) &&\r\n                isHeader(this.props.items[0]) && isHeader(prevProps.items[0]) &&\r\n                this.props.items[0].label === prevProps.items[0].label) ? this.state.isExpanded : undefined;\r\n            this.setState(Section.createState(this.props, isExpanded));\r\n        }\r\n    };\r\n    Object.defineProperty(Section.prototype, \"multiselectHeader\", {\r\n        get: function () {\r\n            var _a = this.state, header = _a.header, hasCurrent = _a.hasCurrent;\r\n            return _jsxs(\"div\", __assign({ className: 'msp-flex-row msp-control-group-header' }, { children: [_jsx(Button, __assign({ icon: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg, flex: true, noOverflow: true, onClick: this.toggleExpanded, title: \"Click to \" + (this.state.isExpanded ? 'collapse' : 'expand') + \".\" + ((header === null || header === void 0 ? void 0 : header.description) ? \" \" + (header === null || header === void 0 ? void 0 : header.description) : '') }, { children: hasCurrent ? _jsx(\"b\", { children: header === null || header === void 0 ? void 0 : header.label }, void 0) : header === null || header === void 0 ? void 0 : header.label }), void 0), _jsx(Button, __assign({ icon: CheckSvg, flex: true, onClick: this.selectAll, style: { flex: '0 0 50px', textAlign: 'right' } }, { children: \"All\" }), void 0), _jsx(Button, __assign({ icon: CloseSvg, flex: true, onClick: this.selectNone, style: { flex: '0 0 50px', textAlign: 'right' } }, { children: \"None\" }), void 0)] }), void 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Section.prototype, \"basicHeader\", {\r\n        get: function () {\r\n            var _a = this.state, header = _a.header, hasCurrent = _a.hasCurrent;\r\n            return _jsx(\"div\", __assign({ className: 'msp-control-group-header', style: { marginTop: '1px' } }, { children: _jsx(Button, __assign({ noOverflow: true, icon: this.state.isExpanded ? ArrowDropDownSvg : ArrowRightSvg, onClick: this.toggleExpanded, title: \"Click to \" + (this.state.isExpanded ? 'collapse' : 'expand') + \". \" + ((header === null || header === void 0 ? void 0 : header.description) ? header === null || header === void 0 ? void 0 : header.description : '') }, { children: hasCurrent ? _jsx(\"b\", { children: header === null || header === void 0 ? void 0 : header.label }, void 0) : header === null || header === void 0 ? void 0 : header.label }), void 0) }), void 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Section.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, items = _a.items, onSelect = _a.onSelect, current = _a.current;\r\n        if (isHeader(items))\r\n            return null;\r\n        if (isItem(items))\r\n            return _jsx(Action, { item: items, onSelect: onSelect, current: current, multiselect: this.props.multiselect }, void 0);\r\n        var header = this.state.header;\r\n        return _jsxs(_Fragment, { children: [header && (this.props.multiselect && this.state.isExpanded ? this.multiselectHeader : this.basicHeader), _jsx(\"div\", __assign({ className: this.props.noOffset ? void 0 : this.props.noAccent ? 'msp-control-offset' : 'msp-accent-offset' }, { children: (!header || this.state.isExpanded) && items.map(function (x, i) {\r\n                        if (isHeader(x))\r\n                            return null;\r\n                        if (isItem(x))\r\n                            return _jsx(Action, { item: x, onSelect: onSelect, current: current, multiselect: _this.props.multiselect }, i);\r\n                        return _jsx(Section, { items: x, onSelect: onSelect, current: current, multiselect: _this.props.multiselect, noAccent: true }, i);\r\n                    }) }), void 0)] }, void 0);\r\n    };\r\n    return Section;\r\n}(React.PureComponent));\r\nvar Action = function (_a) {\r\n    var item = _a.item, onSelect = _a.onSelect, current = _a.current, multiselect = _a.multiselect;\r\n    var isCurrent = current === item;\r\n    var style = item.addOn ? { position: 'relative' } : void 0;\r\n    return _jsxs(Button, __assign({ icon: item.icon, noOverflow: true, className: 'msp-action-menu-button', onClick: function (e) { return onSelect(multiselect ? [item] : item, e); }, disabled: item.disabled, style: style, title: item.description }, { children: [isCurrent || item.selected ? _jsx(\"b\", { children: item.label }, void 0) : item.label, item.addOn] }), void 0);\r\n};\r\nfunction isItems(x) {\r\n    return !!x && Array.isArray(x);\r\n}\r\nfunction isItem(x) {\r\n    var v = x;\r\n    return v && v.kind === 'item';\r\n}\r\nfunction isHeader(x) {\r\n    var v = x;\r\n    return v && v.kind === 'header';\r\n}\r\nfunction collectItems(items, target) {\r\n    if (isHeader(items))\r\n        return target;\r\n    if (isItem(items)) {\r\n        target.push(items);\r\n        return target;\r\n    }\r\n    for (var _i = 0, items_4 = items; _i < items_4.length; _i++) {\r\n        var i = items_4[_i];\r\n        collectItems(i, target);\r\n    }\r\n    return target;\r\n}\r\n//# sourceMappingURL=action-menu.js.map"]},"metadata":{},"sourceType":"module"}