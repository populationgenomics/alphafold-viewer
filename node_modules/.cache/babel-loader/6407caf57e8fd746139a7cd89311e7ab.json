{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { PluginUIComponent } from '../base';\nimport { Icon, CodeSvg } from '../controls/icons';\nimport { ApplyActionControl } from './apply-action';\n\nvar StateObjectActions =\n/** @class */\nfunction (_super) {\n  __extends(StateObjectActions, _super);\n\n  function StateObjectActions() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(StateObjectActions.prototype, \"current\", {\n    get: function () {\n      return this.props.state.behaviors.currentObject.value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateObjectActions.prototype.componentDidMount = function () {\n    // TODO: handle tree change: some state actions might become invalid\n    // this.subscribe(this.props.state.events.changed, o => {\n    //     this.setState(createStateObjectActionSelectState(this.props));\n    // });\n    var _this = this;\n\n    this.subscribe(this.plugin.state.events.object.updated, function (_a) {\n      var ref = _a.ref,\n          state = _a.state;\n      var current = _this.current;\n      if (current.ref !== ref || current.state !== state) return;\n\n      _this.forceUpdate();\n    });\n    this.subscribe(this.plugin.state.data.actions.events.added, function () {\n      return _this.forceUpdate();\n    });\n    this.subscribe(this.plugin.state.data.actions.events.removed, function () {\n      return _this.forceUpdate();\n    });\n  };\n\n  StateObjectActions.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        state = _a.state,\n        ref = _a.nodeRef;\n    var cell = state.cells.get(ref);\n    var actions = state.actions.fromCell(cell, this.plugin);\n    if (actions.length === 0) return null;\n    var def = cell.transform.transformer.definition;\n    var display = cell.obj ? cell.obj.label : def.display && def.display.name || def.name;\n    return _jsxs(\"div\", __assign({\n      className: 'msp-state-actions'\n    }, {\n      children: [!this.props.hideHeader && _jsxs(\"div\", __assign({\n        className: 'msp-section-header'\n      }, {\n        children: [_jsx(Icon, {\n          svg: CodeSvg\n        }, void 0), \" \", \"Actions (\" + display + \")\"]\n      }), void 0), actions.map(function (act, i) {\n        return _jsx(ApplyActionControl, {\n          state: state,\n          action: act,\n          nodeRef: ref,\n          initiallyCollapsed: i === 0 ? !_this.props.alwaysExpandFirst && _this.props.initiallyCollapsed : _this.props.initiallyCollapsed\n        }, \"\" + act.id);\n      })]\n    }), void 0);\n  };\n\n  return StateObjectActions;\n}(PluginUIComponent);\n\nexport { StateObjectActions };","map":{"version":3,"sources":["../../../src/mol-plugin-ui/state/actions.tsx"],"names":[],"mappings":";;AAOA,SAAS,iBAAT,QAAkC,SAAlC;AACA,SAAS,IAAT,EAAe,OAAf,QAA8B,mBAA9B;AACA,SAAS,kBAAT,QAAmC,gBAAnC;;AAEA,IAAA,kBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAwC,EAAA,SAAA,CAAA,kBAAA,EAAA,MAAA,CAAA;;AAAxC,WAAA,kBAAA,GAAA;;AAqCC;;AApCG,EAAA,MAAA,CAAA,cAAA,CAAI,kBAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,YAAA;AACI,aAAO,KAAK,KAAL,CAAW,KAAX,CAAiB,SAAjB,CAA2B,aAA3B,CAAyC,KAAhD;AACH,KAFU;qBAAA;;AAAA,GAAX;;AAIA,EAAA,kBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI;AACA;AACA;AACA;AAJJ,QAAA,KAAA,GAAA,IAAA;;AAMI,SAAK,SAAL,CAAe,KAAK,MAAL,CAAY,KAAZ,CAAkB,MAAlB,CAAyB,MAAzB,CAAgC,OAA/C,EAAwD,UAAC,EAAD,EAAe;UAAZ,GAAG,GAAA,EAAA,CAAA,G;UAAE,KAAK,GAAA,EAAA,CAAA,K;AACjE,UAAM,OAAO,GAAG,KAAI,CAAC,OAArB;AACA,UAAI,OAAO,CAAC,GAAR,KAAgB,GAAhB,IAAuB,OAAO,CAAC,KAAR,KAAkB,KAA7C,EAAoD;;AACpD,MAAA,KAAI,CAAC,WAAL;AACH,KAJD;AAMA,SAAK,SAAL,CAAe,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,OAAvB,CAA+B,MAA/B,CAAsC,KAArD,EAA4D,YAAA;AAAM,aAAA,KAAI,CAAJ,WAAA,EAAA;AAAkB,KAApF;AACA,SAAK,SAAL,CAAe,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,OAAvB,CAA+B,MAA/B,CAAsC,OAArD,EAA8D,YAAA;AAAM,aAAA,KAAI,CAAJ,WAAA,EAAA;AAAkB,KAAtF;AACH,GAdD;;AAgBA,EAAA,kBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACU,QAAA,EAAA,GAA0B,KAAK,KAA/B;AAAA,QAAE,KAAK,GAAA,EAAA,CAAA,KAAP;AAAA,QAAkB,GAAG,GAAA,EAAA,CAAA,OAArB;AACN,QAAM,IAAI,GAAG,KAAK,CAAC,KAAN,CAAY,GAAZ,CAAgB,GAAhB,CAAb;AACA,QAAM,OAAO,GAAG,KAAK,CAAC,OAAN,CAAc,QAAd,CAAuB,IAAvB,EAA6B,KAAK,MAAlC,CAAhB;AACA,QAAI,OAAO,CAAC,MAAR,KAAmB,CAAvB,EAA0B,OAAO,IAAP;AAE1B,QAAM,GAAG,GAAG,IAAI,CAAC,SAAL,CAAe,WAAf,CAA2B,UAAvC;AACA,QAAM,OAAO,GAAG,IAAI,CAAC,GAAL,GAAW,IAAI,CAAC,GAAL,CAAS,KAApB,GAA6B,GAAG,CAAC,OAAJ,IAAe,GAAG,CAAC,OAAJ,CAAY,IAA5B,IAAqC,GAAG,CAAC,IAArF;AAEA,WAAO,KAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EAAkC;AAAA,MAAA,QAAA,EAAA,CACpC,CAAC,KAAK,KAAL,CAAW,UAAZ,IAA0B,KAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EAAmC;AAAA,QAAA,QAAA,EAAA,CAAC,IAAA,CAAC,IAAD,EAAK;AAAC,UAAA,GAAG,EAAE;AAAN,SAAL,EAAkB,KAAA,CAAlB,CAAD,EAAuB,GAAvB,EAAyB,cAAY,OAAZ,GAAmB,GAA5C;AAAA,OAAnC,CAAA,EAAkF,KAAA,CAAlF,CADU,EAEpC,OAAO,CAAC,GAAR,CAAY,UAAC,GAAD,EAAM,CAAN,EAAO;AAAK,eAAA,IAAA,CAAC,kBAAD,EAAmB;AACtB,UAAA,KAAK,EAAE,KADe;AACR,UAAA,MAAM,EAAE,GADA;AACK,UAAA,OAAO,EAAE,GADd;AAExC,UAAA,kBAAkB,EAAE,CAAC,KAAK,CAAN,GAAU,CAAC,KAAI,CAAC,KAAL,CAAW,iBAAZ,IAAiC,KAAI,CAAC,KAAL,CAAW,kBAAtD,GAA2E,KAAI,CAAC,KAAL,CAAW;AAFlE,SAAnB,EAChB,KAAG,GAAG,CADU,EAAA,CAAA;AAE2G,OAFnI,CAFoC;AAAA,KAAlC,CAAA,EAIkI,KAAA,CAJlI,CAAP;AAMH,GAfD;;AAgBJ,SAAA,kBAAA;AAAC,CArCD,CAAwC,iBAAxC,CAAA","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { PluginUIComponent } from '../base';\r\nimport { Icon, CodeSvg } from '../controls/icons';\r\nimport { ApplyActionControl } from './apply-action';\r\nvar StateObjectActions = /** @class */ (function (_super) {\r\n    __extends(StateObjectActions, _super);\r\n    function StateObjectActions() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(StateObjectActions.prototype, \"current\", {\r\n        get: function () {\r\n            return this.props.state.behaviors.currentObject.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StateObjectActions.prototype.componentDidMount = function () {\r\n        // TODO: handle tree change: some state actions might become invalid\r\n        // this.subscribe(this.props.state.events.changed, o => {\r\n        //     this.setState(createStateObjectActionSelectState(this.props));\r\n        // });\r\n        var _this = this;\r\n        this.subscribe(this.plugin.state.events.object.updated, function (_a) {\r\n            var ref = _a.ref, state = _a.state;\r\n            var current = _this.current;\r\n            if (current.ref !== ref || current.state !== state)\r\n                return;\r\n            _this.forceUpdate();\r\n        });\r\n        this.subscribe(this.plugin.state.data.actions.events.added, function () { return _this.forceUpdate(); });\r\n        this.subscribe(this.plugin.state.data.actions.events.removed, function () { return _this.forceUpdate(); });\r\n    };\r\n    StateObjectActions.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, state = _a.state, ref = _a.nodeRef;\r\n        var cell = state.cells.get(ref);\r\n        var actions = state.actions.fromCell(cell, this.plugin);\r\n        if (actions.length === 0)\r\n            return null;\r\n        var def = cell.transform.transformer.definition;\r\n        var display = cell.obj ? cell.obj.label : (def.display && def.display.name) || def.name;\r\n        return _jsxs(\"div\", __assign({ className: 'msp-state-actions' }, { children: [!this.props.hideHeader && _jsxs(\"div\", __assign({ className: 'msp-section-header' }, { children: [_jsx(Icon, { svg: CodeSvg }, void 0), \" \", \"Actions (\" + display + \")\"] }), void 0), actions.map(function (act, i) { return _jsx(ApplyActionControl, { state: state, action: act, nodeRef: ref, initiallyCollapsed: i === 0 ? !_this.props.alwaysExpandFirst && _this.props.initiallyCollapsed : _this.props.initiallyCollapsed }, \"\" + act.id); })] }), void 0);\r\n    };\r\n    return StateObjectActions;\r\n}(PluginUIComponent));\r\nexport { StateObjectActions };\r\n//# sourceMappingURL=actions.js.map"]},"metadata":{},"sourceType":"module"}