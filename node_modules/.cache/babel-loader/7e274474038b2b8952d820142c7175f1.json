{"ast":null,"code":"import { __assign, __extends, __spreadArray } from \"tslib\";\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { getStructureThemeTypes } from '../../mol-plugin-state/helpers/structure-representation-params';\nimport { StructureComponentManager } from '../../mol-plugin-state/manager/structure/component';\nimport { StructureHierarchyManager } from '../../mol-plugin-state/manager/structure/hierarchy';\nimport { PluginCommands } from '../../mol-plugin/commands';\nimport { State } from '../../mol-state';\nimport { ParamDefinition } from '../../mol-util/param-definition';\nimport { CollapsableControls, PurePluginUIComponent } from '../base';\nimport { ActionMenu } from '../controls/action-menu';\nimport { Button, ExpandGroup, IconButton, ToggleButton, ControlRow, TextInput } from '../controls/common';\nimport { CubeOutlineSvg, IntersectSvg, SetSvg, SubtractSvg, UnionSvg, BookmarksOutlinedSvg, AddSvg, TuneSvg, RestoreSvg, VisibilityOffOutlinedSvg, VisibilityOutlinedSvg, DeleteOutlinedSvg, MoreHorizSvg, CheckSvg } from '../controls/icons';\nimport { ParameterControls } from '../controls/parameters';\nimport { UpdateTransformControl } from '../state/update-transform';\nimport { GenericEntryListControls } from './generic';\n\nvar StructureComponentControls =\n/** @class */\nfunction (_super) {\n  __extends(StructureComponentControls, _super);\n\n  function StructureComponentControls() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  StructureComponentControls.prototype.defaultState = function () {\n    return {\n      header: 'Components',\n      isCollapsed: false,\n      isDisabled: false,\n      brand: {\n        accent: 'blue',\n        svg: CubeOutlineSvg\n      }\n    };\n  };\n\n  StructureComponentControls.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.managers.structure.hierarchy.behaviors.selection, function (c) {\n      return _this.setState({\n        description: StructureHierarchyManager.getSelectedStructuresDescription(_this.plugin)\n      });\n    });\n  };\n\n  StructureComponentControls.prototype.renderControls = function () {\n    return _jsxs(_Fragment, {\n      children: [_jsx(ComponentEditorControls, {}, void 0), _jsx(ComponentListControls, {}, void 0), _jsx(GenericEntryListControls, {}, void 0)]\n    }, void 0);\n  };\n\n  return StructureComponentControls;\n}(CollapsableControls);\n\nexport { StructureComponentControls };\n\nvar ComponentEditorControls =\n/** @class */\nfunction (_super) {\n  __extends(ComponentEditorControls, _super);\n\n  function ComponentEditorControls() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      isEmpty: true,\n      isBusy: false,\n      canUndo: false\n    };\n    _this.togglePreset = _this.toggleAction('preset');\n    _this.toggleAdd = _this.toggleAction('add');\n    _this.toggleOptions = _this.toggleAction('options');\n\n    _this.hideAction = function () {\n      return _this.setState({\n        action: void 0\n      });\n    };\n\n    _this.applyPreset = function (item) {\n      _this.hideAction();\n\n      if (!item) return;\n      var mng = _this.plugin.managers.structure;\n      var structures = mng.hierarchy.selection.structures;\n      if (item.value === null) mng.component.clear(structures);else mng.component.applyPreset(structures, item.value);\n    };\n\n    _this.undo = function () {\n      var task = _this.plugin.state.data.undo();\n\n      if (task) _this.plugin.runTask(task);\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(ComponentEditorControls.prototype, \"isDisabled\", {\n    get: function () {\n      return this.state.isBusy || this.state.isEmpty;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ComponentEditorControls.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.managers.structure.hierarchy.behaviors.selection, function (c) {\n      return _this.setState({\n        action: _this.state.action !== 'options' || c.structures.length === 0 ? void 0 : 'options',\n        isEmpty: c.structures.length === 0\n      });\n    });\n    this.subscribe(this.plugin.behaviors.state.isBusy, function (v) {\n      _this.setState({\n        isBusy: v,\n        action: _this.state.action !== 'options' ? void 0 : 'options'\n      });\n    });\n    this.subscribe(this.plugin.state.data.events.historyUpdated, function (_a) {\n      var state = _a.state;\n\n      _this.setState({\n        canUndo: state.canUndo\n      });\n    });\n  };\n\n  ComponentEditorControls.prototype.toggleAction = function (action) {\n    var _this = this;\n\n    return function () {\n      return _this.setState({\n        action: _this.state.action === action ? void 0 : action\n      });\n    };\n  };\n\n  Object.defineProperty(ComponentEditorControls.prototype, \"presetControls\", {\n    get: function () {\n      return _jsx(ActionMenu, {\n        items: this.presetActions,\n        onSelect: this.applyPreset\n      }, void 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ComponentEditorControls.prototype, \"presetActions\", {\n    get: function () {\n      var pivot = this.plugin.managers.structure.component.pivotStructure;\n      var providers = this.plugin.builders.structure.representation.getPresets(pivot === null || pivot === void 0 ? void 0 : pivot.cell.obj);\n      return ActionMenu.createItems(providers, {\n        label: function (p) {\n          return p.display.name;\n        },\n        category: function (p) {\n          return p.display.group;\n        },\n        description: function (p) {\n          return p.display.description;\n        }\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ComponentEditorControls.prototype.render = function () {\n    var undoTitle = this.state.canUndo ? \"Undo \" + this.plugin.state.data.latestUndoLabel : 'Some mistakes of the past can be undone.';\n    return _jsxs(_Fragment, {\n      children: [_jsxs(\"div\", __assign({\n        className: 'msp-flex-row'\n      }, {\n        children: [_jsx(ToggleButton, {\n          icon: BookmarksOutlinedSvg,\n          label: 'Preset',\n          title: 'Apply a representation preset for the current structure(s).',\n          toggle: this.togglePreset,\n          isSelected: this.state.action === 'preset',\n          disabled: this.isDisabled\n        }, void 0), _jsx(ToggleButton, {\n          icon: AddSvg,\n          label: 'Add',\n          title: 'Add a new representation component for a selection.',\n          toggle: this.toggleAdd,\n          isSelected: this.state.action === 'add',\n          disabled: this.isDisabled\n        }, void 0), _jsx(ToggleButton, {\n          icon: TuneSvg,\n          label: '',\n          title: 'Options that are applied to all applicable representations.',\n          style: {\n            flex: '0 0 40px',\n            padding: 0\n          },\n          toggle: this.toggleOptions,\n          isSelected: this.state.action === 'options',\n          disabled: this.isDisabled\n        }, void 0), _jsx(IconButton, {\n          svg: RestoreSvg,\n          className: 'msp-flex-item',\n          flex: '40px',\n          onClick: this.undo,\n          disabled: !this.state.canUndo || this.isDisabled,\n          title: undoTitle\n        }, void 0)]\n      }), void 0), this.state.action === 'preset' && this.presetControls, this.state.action === 'add' && _jsx(\"div\", __assign({\n        className: 'msp-control-offset'\n      }, {\n        children: _jsx(AddComponentControls, {\n          onApply: this.hideAction\n        }, void 0)\n      }), void 0), this.state.action === 'options' && _jsx(\"div\", __assign({\n        className: 'msp-control-offset'\n      }, {\n        children: _jsx(ComponentOptionsControls, {\n          isDisabled: this.isDisabled\n        }, void 0)\n      }), void 0)]\n    }, void 0);\n  };\n\n  return ComponentEditorControls;\n}(PurePluginUIComponent);\n\nvar AddComponentControls =\n/** @class */\nfunction (_super) {\n  __extends(AddComponentControls, _super);\n\n  function AddComponentControls() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = _this.createState();\n\n    _this.apply = function () {\n      var structures = _this.props.forSelection ? _this.currentStructures : _this.selectedStructures;\n\n      _this.props.onApply();\n\n      _this.plugin.managers.structure.component.add(_this.state.values, structures);\n    };\n\n    _this.paramsChanged = function (values) {\n      return _this.setState({\n        values: values\n      });\n    };\n\n    return _this;\n  }\n\n  AddComponentControls.prototype.createState = function () {\n    var params = StructureComponentManager.getAddParams(this.plugin);\n    return {\n      params: params,\n      values: ParamDefinition.getDefaultValues(params)\n    };\n  };\n\n  Object.defineProperty(AddComponentControls.prototype, \"selectedStructures\", {\n    get: function () {\n      return this.plugin.managers.structure.component.currentStructures;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AddComponentControls.prototype, \"currentStructures\", {\n    get: function () {\n      return this.plugin.managers.structure.hierarchy.current.structures;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AddComponentControls.prototype.render = function () {\n    return _jsxs(_Fragment, {\n      children: [_jsx(ParameterControls, {\n        params: this.state.params,\n        values: this.state.values,\n        onChangeValues: this.paramsChanged\n      }, void 0), _jsx(Button, __assign({\n        icon: AddSvg,\n        title: 'Use Selection and optional Representation to create a new Component.',\n        className: 'msp-btn-commit msp-btn-commit-on',\n        onClick: this.apply,\n        style: {\n          marginTop: '1px'\n        }\n      }, {\n        children: \"Create Component\"\n      }), void 0)]\n    }, void 0);\n  };\n\n  return AddComponentControls;\n}(PurePluginUIComponent);\n\nexport { AddComponentControls };\n\nvar ComponentOptionsControls =\n/** @class */\nfunction (_super) {\n  __extends(ComponentOptionsControls, _super);\n\n  function ComponentOptionsControls() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.update = function (options) {\n      return _this.plugin.managers.structure.component.setOptions(options);\n    };\n\n    return _this;\n  }\n\n  ComponentOptionsControls.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.managers.structure.component.events.optionsUpdated, function () {\n      return _this.forceUpdate();\n    });\n  };\n\n  ComponentOptionsControls.prototype.render = function () {\n    return _jsx(ParameterControls, {\n      params: StructureComponentManager.OptionsParams,\n      values: this.plugin.managers.structure.component.state.options,\n      onChangeValues: this.update,\n      isDisabled: this.props.isDisabled\n    }, void 0);\n  };\n\n  return ComponentOptionsControls;\n}(PurePluginUIComponent);\n\nvar ComponentListControls =\n/** @class */\nfunction (_super) {\n  __extends(ComponentListControls, _super);\n\n  function ComponentListControls() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ComponentListControls.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.managers.structure.hierarchy.behaviors.selection, function () {\n      _this.forceUpdate();\n    });\n  };\n\n  ComponentListControls.prototype.render = function () {\n    var componentGroups = this.plugin.managers.structure.hierarchy.currentComponentGroups;\n    if (componentGroups.length === 0) return null;\n    return _jsx(\"div\", __assign({\n      style: {\n        marginTop: '6px'\n      }\n    }, {\n      children: componentGroups.map(function (g) {\n        return _jsx(StructureComponentGroup, {\n          group: g\n        }, g[0].cell.transform.ref);\n      })\n    }), void 0);\n  };\n\n  return ComponentListControls;\n}(PurePluginUIComponent);\n\nvar StructureComponentGroup =\n/** @class */\nfunction (_super) {\n  __extends(StructureComponentGroup, _super);\n\n  function StructureComponentGroup() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      action: void 0\n    };\n\n    _this.toggleVisible = function (e) {\n      e.preventDefault();\n      e.currentTarget.blur();\n\n      _this.plugin.managers.structure.component.toggleVisibility(_this.props.group);\n    };\n\n    _this.selectAction = function (item) {\n      if (!item) return;\n\n      _this.setState({\n        action: void 0\n      });\n\n      (item === null || item === void 0 ? void 0 : item.value)();\n    };\n\n    _this.remove = function () {\n      return _this.plugin.managers.structure.hierarchy.remove(_this.props.group, true);\n    };\n\n    _this.toggleAction = function () {\n      return _this.setState({\n        action: _this.state.action === 'action' ? void 0 : 'action'\n      });\n    };\n\n    _this.toggleLabel = function () {\n      return _this.setState({\n        action: _this.state.action === 'label' ? void 0 : 'label'\n      });\n    };\n\n    _this.highlight = function (e) {\n      e.preventDefault();\n      if (!_this.props.group[0].cell.parent) return;\n      PluginCommands.Interactivity.Object.Highlight(_this.plugin, {\n        state: _this.props.group[0].cell.parent,\n        ref: _this.props.group.map(function (c) {\n          return c.cell.transform.ref;\n        })\n      });\n    };\n\n    _this.clearHighlight = function (e) {\n      e.preventDefault();\n      PluginCommands.Interactivity.ClearHighlights(_this.plugin);\n    };\n\n    _this.focus = function () {\n      var allHidden = true;\n\n      for (var _i = 0, _a = _this.props.group; _i < _a.length; _i++) {\n        var c = _a[_i];\n\n        if (!c.cell.state.isHidden) {\n          allHidden = false;\n          break;\n        }\n      }\n\n      if (allHidden) {\n        _this.plugin.managers.structure.hierarchy.toggleVisibility(_this.props.group, 'show');\n      }\n\n      _this.plugin.managers.camera.focusSpheres(_this.props.group, function (e) {\n        var _a;\n\n        if (e.cell.state.isHidden) return;\n        return (_a = e.cell.obj) === null || _a === void 0 ? void 0 : _a.data.boundary.sphere;\n      });\n    };\n\n    _this.updateLabel = function (v) {\n      _this.plugin.managers.structure.component.updateLabel(_this.pivot, v);\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(StructureComponentGroup.prototype, \"pivot\", {\n    get: function () {\n      return this.props.group[0];\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StructureComponentGroup.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.state.events.cell.stateUpdated, function (e) {\n      if (State.ObjectEvent.isCell(e, _this.pivot.cell)) _this.forceUpdate();\n    });\n  };\n\n  Object.defineProperty(StructureComponentGroup.prototype, \"colorByActions\", {\n    get: function () {\n      var _this = this;\n\n      var _a, _b;\n\n      var mng = this.plugin.managers.structure.component;\n      var repr = this.pivot.representations[0];\n      var name = (_a = repr.cell.transform.params) === null || _a === void 0 ? void 0 : _a.colorTheme.name;\n      var themes = getStructureThemeTypes(this.plugin, (_b = this.pivot.cell.obj) === null || _b === void 0 ? void 0 : _b.data);\n      return ActionMenu.createItemsFromSelectOptions(themes, {\n        value: function (o) {\n          return function () {\n            return mng.updateRepresentationsTheme(_this.props.group, {\n              color: o[0]\n            });\n          };\n        },\n        selected: function (o) {\n          return o[0] === name;\n        }\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StructureComponentGroup.prototype, \"actions\", {\n    get: function () {\n      var _this = this;\n\n      var mng = this.plugin.managers.structure.component;\n      var ret = [__spreadArray([ActionMenu.Header('Add Representation')], StructureComponentManager.getRepresentationTypes(this.plugin, this.props.group[0]).map(function (t) {\n        return ActionMenu.Item(t[1], function () {\n          return mng.addRepresentation(_this.props.group, t[0]);\n        });\n      }), true)];\n\n      if (this.pivot.representations.length > 0) {\n        ret.push(__spreadArray([ActionMenu.Header('Set Coloring', {\n          isIndependent: true\n        })], this.colorByActions, true));\n      }\n\n      if (mng.canBeModified(this.props.group[0])) {\n        ret.push([ActionMenu.Header('Modify by Selection'), ActionMenu.Item('Include', function () {\n          return mng.modifyByCurrentSelection(_this.props.group, 'union');\n        }, {\n          icon: UnionSvg\n        }), ActionMenu.Item('Subtract', function () {\n          return mng.modifyByCurrentSelection(_this.props.group, 'subtract');\n        }, {\n          icon: SubtractSvg\n        }), ActionMenu.Item('Intersect', function () {\n          return mng.modifyByCurrentSelection(_this.props.group, 'intersect');\n        }, {\n          icon: IntersectSvg\n        })]);\n      }\n\n      ret.push(ActionMenu.Item('Select This', function () {\n        return mng.selectThis(_this.props.group);\n      }, {\n        icon: SetSvg\n      }));\n\n      if (mng.canBeModified(this.props.group[0])) {\n        ret.push(ActionMenu.Item('Edit Label', this.toggleLabel));\n      }\n\n      return ret;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StructureComponentGroup.prototype, \"reprLabel\", {\n    get: function () {\n      var _a; // TODO: handle generic reprs.\n\n\n      var pivot = this.pivot;\n      if (pivot.representations.length === 0) return 'No repr.';\n      if (pivot.representations.length === 1) return (_a = pivot.representations[0].cell.obj) === null || _a === void 0 ? void 0 : _a.label;\n      return pivot.representations.length + \" reprs\";\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StructureComponentGroup.prototype.render = function () {\n    var _this = this;\n\n    var _a;\n\n    var component = this.pivot;\n    var cell = component.cell;\n    var label = (_a = cell.obj) === null || _a === void 0 ? void 0 : _a.label;\n    var reprLabel = this.reprLabel;\n    return _jsxs(_Fragment, {\n      children: [_jsxs(\"div\", __assign({\n        className: 'msp-flex-row'\n      }, {\n        children: [_jsxs(Button, __assign({\n          noOverflow: true,\n          className: 'msp-control-button-label',\n          title: label + \". Click to focus.\",\n          onClick: this.focus,\n          onMouseEnter: this.highlight,\n          onMouseLeave: this.clearHighlight,\n          style: {\n            textAlign: 'left'\n          }\n        }, {\n          children: [label, _jsx(\"small\", __assign({\n            className: 'msp-25-lower-contrast-text',\n            style: {\n              float: 'right'\n            }\n          }, {\n            children: reprLabel\n          }), void 0)]\n        }), void 0), _jsx(IconButton, {\n          svg: cell.state.isHidden ? VisibilityOffOutlinedSvg : VisibilityOutlinedSvg,\n          toggleState: false,\n          onClick: this.toggleVisible,\n          title: (cell.state.isHidden ? 'Show' : 'Hide') + \" component\",\n          small: true,\n          className: 'msp-form-control',\n          flex: true\n        }, void 0), _jsx(IconButton, {\n          svg: DeleteOutlinedSvg,\n          toggleState: false,\n          onClick: this.remove,\n          title: 'Remove',\n          small: true,\n          className: 'msp-form-control',\n          flex: true\n        }, void 0), _jsx(IconButton, {\n          svg: MoreHorizSvg,\n          onClick: this.toggleAction,\n          title: 'Actions',\n          toggleState: this.state.action === 'action',\n          className: 'msp-form-control',\n          flex: true\n        }, void 0)]\n      }), void 0), this.state.action === 'label' && _jsx(\"div\", __assign({\n        className: 'msp-control-offset',\n        style: {\n          marginBottom: '6px'\n        }\n      }, {\n        children: _jsx(ControlRow, {\n          label: 'Label',\n          control: _jsxs(\"div\", __assign({\n            style: {\n              display: 'flex',\n              textAlignLast: 'center'\n            }\n          }, {\n            children: [_jsx(TextInput, {\n              onChange: this.updateLabel,\n              value: label,\n              style: {\n                flex: '1 1 auto',\n                minWidth: 0\n              },\n              className: 'msp-form-control',\n              blurOnEnter: true,\n              blurOnEscape: true\n            }, void 0), _jsx(IconButton, {\n              svg: CheckSvg,\n              onClick: this.toggleLabel,\n              className: 'msp-form-control msp-control-button-label',\n              flex: true\n            }, void 0)]\n          }), void 0)\n        }, void 0)\n      }), void 0), this.state.action === 'action' && _jsxs(\"div\", __assign({\n        className: 'msp-accent-offset'\n      }, {\n        children: [_jsx(\"div\", __assign({\n          style: {\n            marginBottom: '6px'\n          }\n        }, {\n          children: _jsx(ActionMenu, {\n            items: this.actions,\n            onSelect: this.selectAction,\n            noOffset: true\n          }, void 0)\n        }), void 0), _jsx(\"div\", __assign({\n          style: {\n            marginBottom: '6px'\n          }\n        }, {\n          children: component.representations.map(function (r) {\n            return _jsx(StructureRepresentationEntry, {\n              group: _this.props.group,\n              representation: r\n            }, r.cell.transform.ref);\n          })\n        }), void 0)]\n      }), void 0)]\n    }, void 0);\n  };\n\n  return StructureComponentGroup;\n}(PurePluginUIComponent);\n\nvar StructureRepresentationEntry =\n/** @class */\nfunction (_super) {\n  __extends(StructureRepresentationEntry, _super);\n\n  function StructureRepresentationEntry() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.remove = function () {\n      return _this.plugin.managers.structure.component.removeRepresentations(_this.props.group, _this.props.representation);\n    };\n\n    _this.toggleVisible = function (e) {\n      e.preventDefault();\n      e.currentTarget.blur();\n\n      _this.plugin.managers.structure.component.toggleVisibility(_this.props.group, _this.props.representation);\n    };\n\n    _this.update = function (params) {\n      return _this.plugin.managers.structure.component.updateRepresentations(_this.props.group, _this.props.representation, params);\n    };\n\n    return _this;\n  }\n\n  StructureRepresentationEntry.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this.subscribe(this.plugin.state.events.cell.stateUpdated, function (e) {\n      if (State.ObjectEvent.isCell(e, _this.props.representation.cell)) _this.forceUpdate();\n    });\n  };\n\n  StructureRepresentationEntry.prototype.render = function () {\n    var _a;\n\n    var repr = this.props.representation.cell;\n    return _jsxs(\"div\", __assign({\n      className: 'msp-representation-entry'\n    }, {\n      children: [repr.parent && _jsx(ExpandGroup, __assign({\n        header: (((_a = repr.obj) === null || _a === void 0 ? void 0 : _a.label) || '') + \" Representation\",\n        noOffset: true\n      }, {\n        children: _jsx(UpdateTransformControl, {\n          state: repr.parent,\n          transform: repr.transform,\n          customHeader: 'none',\n          customUpdate: this.update,\n          noMargin: true\n        }, void 0)\n      }), void 0), _jsx(IconButton, {\n        svg: DeleteOutlinedSvg,\n        onClick: this.remove,\n        title: 'Remove',\n        small: true,\n        className: 'msp-default-bg',\n        toggleState: false,\n        style: {\n          position: 'absolute',\n          top: 0,\n          right: '32px',\n          lineHeight: '24px',\n          height: '24px',\n          textAlign: 'right',\n          width: '44px',\n          paddingRight: '6px',\n          background: 'none'\n        }\n      }, void 0), _jsx(IconButton, {\n        svg: this.props.representation.cell.state.isHidden ? VisibilityOffOutlinedSvg : VisibilityOutlinedSvg,\n        toggleState: false,\n        onClick: this.toggleVisible,\n        title: 'Toggle Visibility',\n        small: true,\n        className: 'msp-default-bg',\n        style: {\n          position: 'absolute',\n          top: 0,\n          right: 0,\n          lineHeight: '24px',\n          height: '24px',\n          textAlign: 'right',\n          width: '32px',\n          paddingRight: '6px',\n          background: 'none'\n        }\n      }, void 0)]\n    }), void 0);\n  };\n\n  return StructureRepresentationEntry;\n}(PurePluginUIComponent);","map":{"version":3,"sources":["../../../src/mol-plugin-ui/structure/components.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends, __spreadArray } from \"tslib\";\r\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { getStructureThemeTypes } from '../../mol-plugin-state/helpers/structure-representation-params';\r\nimport { StructureComponentManager } from '../../mol-plugin-state/manager/structure/component';\r\nimport { StructureHierarchyManager } from '../../mol-plugin-state/manager/structure/hierarchy';\r\nimport { PluginCommands } from '../../mol-plugin/commands';\r\nimport { State } from '../../mol-state';\r\nimport { ParamDefinition } from '../../mol-util/param-definition';\r\nimport { CollapsableControls, PurePluginUIComponent } from '../base';\r\nimport { ActionMenu } from '../controls/action-menu';\r\nimport { Button, ExpandGroup, IconButton, ToggleButton, ControlRow, TextInput } from '../controls/common';\r\nimport { CubeOutlineSvg, IntersectSvg, SetSvg, SubtractSvg, UnionSvg, BookmarksOutlinedSvg, AddSvg, TuneSvg, RestoreSvg, VisibilityOffOutlinedSvg, VisibilityOutlinedSvg, DeleteOutlinedSvg, MoreHorizSvg, CheckSvg } from '../controls/icons';\r\nimport { ParameterControls } from '../controls/parameters';\r\nimport { UpdateTransformControl } from '../state/update-transform';\r\nimport { GenericEntryListControls } from './generic';\r\nvar StructureComponentControls = /** @class */ (function (_super) {\r\n    __extends(StructureComponentControls, _super);\r\n    function StructureComponentControls() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    StructureComponentControls.prototype.defaultState = function () {\r\n        return {\r\n            header: 'Components',\r\n            isCollapsed: false,\r\n            isDisabled: false,\r\n            brand: { accent: 'blue', svg: CubeOutlineSvg }\r\n        };\r\n    };\r\n    StructureComponentControls.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.managers.structure.hierarchy.behaviors.selection, function (c) { return _this.setState({\r\n            description: StructureHierarchyManager.getSelectedStructuresDescription(_this.plugin)\r\n        }); });\r\n    };\r\n    StructureComponentControls.prototype.renderControls = function () {\r\n        return _jsxs(_Fragment, { children: [_jsx(ComponentEditorControls, {}, void 0), _jsx(ComponentListControls, {}, void 0), _jsx(GenericEntryListControls, {}, void 0)] }, void 0);\r\n    };\r\n    return StructureComponentControls;\r\n}(CollapsableControls));\r\nexport { StructureComponentControls };\r\nvar ComponentEditorControls = /** @class */ (function (_super) {\r\n    __extends(ComponentEditorControls, _super);\r\n    function ComponentEditorControls() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            isEmpty: true,\r\n            isBusy: false,\r\n            canUndo: false\r\n        };\r\n        _this.togglePreset = _this.toggleAction('preset');\r\n        _this.toggleAdd = _this.toggleAction('add');\r\n        _this.toggleOptions = _this.toggleAction('options');\r\n        _this.hideAction = function () { return _this.setState({ action: void 0 }); };\r\n        _this.applyPreset = function (item) {\r\n            _this.hideAction();\r\n            if (!item)\r\n                return;\r\n            var mng = _this.plugin.managers.structure;\r\n            var structures = mng.hierarchy.selection.structures;\r\n            if (item.value === null)\r\n                mng.component.clear(structures);\r\n            else\r\n                mng.component.applyPreset(structures, item.value);\r\n        };\r\n        _this.undo = function () {\r\n            var task = _this.plugin.state.data.undo();\r\n            if (task)\r\n                _this.plugin.runTask(task);\r\n        };\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ComponentEditorControls.prototype, \"isDisabled\", {\r\n        get: function () {\r\n            return this.state.isBusy || this.state.isEmpty;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ComponentEditorControls.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.managers.structure.hierarchy.behaviors.selection, function (c) { return _this.setState({\r\n            action: _this.state.action !== 'options' || c.structures.length === 0 ? void 0 : 'options',\r\n            isEmpty: c.structures.length === 0\r\n        }); });\r\n        this.subscribe(this.plugin.behaviors.state.isBusy, function (v) {\r\n            _this.setState({ isBusy: v, action: _this.state.action !== 'options' ? void 0 : 'options' });\r\n        });\r\n        this.subscribe(this.plugin.state.data.events.historyUpdated, function (_a) {\r\n            var state = _a.state;\r\n            _this.setState({ canUndo: state.canUndo });\r\n        });\r\n    };\r\n    ComponentEditorControls.prototype.toggleAction = function (action) {\r\n        var _this = this;\r\n        return function () { return _this.setState({ action: _this.state.action === action ? void 0 : action }); };\r\n    };\r\n    Object.defineProperty(ComponentEditorControls.prototype, \"presetControls\", {\r\n        get: function () {\r\n            return _jsx(ActionMenu, { items: this.presetActions, onSelect: this.applyPreset }, void 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ComponentEditorControls.prototype, \"presetActions\", {\r\n        get: function () {\r\n            var pivot = this.plugin.managers.structure.component.pivotStructure;\r\n            var providers = this.plugin.builders.structure.representation.getPresets(pivot === null || pivot === void 0 ? void 0 : pivot.cell.obj);\r\n            return ActionMenu.createItems(providers, { label: function (p) { return p.display.name; }, category: function (p) { return p.display.group; }, description: function (p) { return p.display.description; } });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ComponentEditorControls.prototype.render = function () {\r\n        var undoTitle = this.state.canUndo\r\n            ? \"Undo \" + this.plugin.state.data.latestUndoLabel\r\n            : 'Some mistakes of the past can be undone.';\r\n        return _jsxs(_Fragment, { children: [_jsxs(\"div\", __assign({ className: 'msp-flex-row' }, { children: [_jsx(ToggleButton, { icon: BookmarksOutlinedSvg, label: 'Preset', title: 'Apply a representation preset for the current structure(s).', toggle: this.togglePreset, isSelected: this.state.action === 'preset', disabled: this.isDisabled }, void 0), _jsx(ToggleButton, { icon: AddSvg, label: 'Add', title: 'Add a new representation component for a selection.', toggle: this.toggleAdd, isSelected: this.state.action === 'add', disabled: this.isDisabled }, void 0), _jsx(ToggleButton, { icon: TuneSvg, label: '', title: 'Options that are applied to all applicable representations.', style: { flex: '0 0 40px', padding: 0 }, toggle: this.toggleOptions, isSelected: this.state.action === 'options', disabled: this.isDisabled }, void 0), _jsx(IconButton, { svg: RestoreSvg, className: 'msp-flex-item', flex: '40px', onClick: this.undo, disabled: !this.state.canUndo || this.isDisabled, title: undoTitle }, void 0)] }), void 0), this.state.action === 'preset' && this.presetControls, this.state.action === 'add' && _jsx(\"div\", __assign({ className: 'msp-control-offset' }, { children: _jsx(AddComponentControls, { onApply: this.hideAction }, void 0) }), void 0), this.state.action === 'options' && _jsx(\"div\", __assign({ className: 'msp-control-offset' }, { children: _jsx(ComponentOptionsControls, { isDisabled: this.isDisabled }, void 0) }), void 0)] }, void 0);\r\n    };\r\n    return ComponentEditorControls;\r\n}(PurePluginUIComponent));\r\nvar AddComponentControls = /** @class */ (function (_super) {\r\n    __extends(AddComponentControls, _super);\r\n    function AddComponentControls() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = _this.createState();\r\n        _this.apply = function () {\r\n            var structures = _this.props.forSelection ? _this.currentStructures : _this.selectedStructures;\r\n            _this.props.onApply();\r\n            _this.plugin.managers.structure.component.add(_this.state.values, structures);\r\n        };\r\n        _this.paramsChanged = function (values) { return _this.setState({ values: values }); };\r\n        return _this;\r\n    }\r\n    AddComponentControls.prototype.createState = function () {\r\n        var params = StructureComponentManager.getAddParams(this.plugin);\r\n        return { params: params, values: ParamDefinition.getDefaultValues(params) };\r\n    };\r\n    Object.defineProperty(AddComponentControls.prototype, \"selectedStructures\", {\r\n        get: function () {\r\n            return this.plugin.managers.structure.component.currentStructures;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AddComponentControls.prototype, \"currentStructures\", {\r\n        get: function () {\r\n            return this.plugin.managers.structure.hierarchy.current.structures;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AddComponentControls.prototype.render = function () {\r\n        return _jsxs(_Fragment, { children: [_jsx(ParameterControls, { params: this.state.params, values: this.state.values, onChangeValues: this.paramsChanged }, void 0), _jsx(Button, __assign({ icon: AddSvg, title: 'Use Selection and optional Representation to create a new Component.', className: 'msp-btn-commit msp-btn-commit-on', onClick: this.apply, style: { marginTop: '1px' } }, { children: \"Create Component\" }), void 0)] }, void 0);\r\n    };\r\n    return AddComponentControls;\r\n}(PurePluginUIComponent));\r\nexport { AddComponentControls };\r\nvar ComponentOptionsControls = /** @class */ (function (_super) {\r\n    __extends(ComponentOptionsControls, _super);\r\n    function ComponentOptionsControls() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.update = function (options) { return _this.plugin.managers.structure.component.setOptions(options); };\r\n        return _this;\r\n    }\r\n    ComponentOptionsControls.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.managers.structure.component.events.optionsUpdated, function () { return _this.forceUpdate(); });\r\n    };\r\n    ComponentOptionsControls.prototype.render = function () {\r\n        return _jsx(ParameterControls, { params: StructureComponentManager.OptionsParams, values: this.plugin.managers.structure.component.state.options, onChangeValues: this.update, isDisabled: this.props.isDisabled }, void 0);\r\n    };\r\n    return ComponentOptionsControls;\r\n}(PurePluginUIComponent));\r\nvar ComponentListControls = /** @class */ (function (_super) {\r\n    __extends(ComponentListControls, _super);\r\n    function ComponentListControls() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ComponentListControls.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.managers.structure.hierarchy.behaviors.selection, function () {\r\n            _this.forceUpdate();\r\n        });\r\n    };\r\n    ComponentListControls.prototype.render = function () {\r\n        var componentGroups = this.plugin.managers.structure.hierarchy.currentComponentGroups;\r\n        if (componentGroups.length === 0)\r\n            return null;\r\n        return _jsx(\"div\", __assign({ style: { marginTop: '6px' } }, { children: componentGroups.map(function (g) { return _jsx(StructureComponentGroup, { group: g }, g[0].cell.transform.ref); }) }), void 0);\r\n    };\r\n    return ComponentListControls;\r\n}(PurePluginUIComponent));\r\nvar StructureComponentGroup = /** @class */ (function (_super) {\r\n    __extends(StructureComponentGroup, _super);\r\n    function StructureComponentGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { action: void 0 };\r\n        _this.toggleVisible = function (e) {\r\n            e.preventDefault();\r\n            e.currentTarget.blur();\r\n            _this.plugin.managers.structure.component.toggleVisibility(_this.props.group);\r\n        };\r\n        _this.selectAction = function (item) {\r\n            if (!item)\r\n                return;\r\n            _this.setState({ action: void 0 });\r\n            (item === null || item === void 0 ? void 0 : item.value)();\r\n        };\r\n        _this.remove = function () { return _this.plugin.managers.structure.hierarchy.remove(_this.props.group, true); };\r\n        _this.toggleAction = function () { return _this.setState({ action: _this.state.action === 'action' ? void 0 : 'action' }); };\r\n        _this.toggleLabel = function () { return _this.setState({ action: _this.state.action === 'label' ? void 0 : 'label' }); };\r\n        _this.highlight = function (e) {\r\n            e.preventDefault();\r\n            if (!_this.props.group[0].cell.parent)\r\n                return;\r\n            PluginCommands.Interactivity.Object.Highlight(_this.plugin, { state: _this.props.group[0].cell.parent, ref: _this.props.group.map(function (c) { return c.cell.transform.ref; }) });\r\n        };\r\n        _this.clearHighlight = function (e) {\r\n            e.preventDefault();\r\n            PluginCommands.Interactivity.ClearHighlights(_this.plugin);\r\n        };\r\n        _this.focus = function () {\r\n            var allHidden = true;\r\n            for (var _i = 0, _a = _this.props.group; _i < _a.length; _i++) {\r\n                var c = _a[_i];\r\n                if (!c.cell.state.isHidden) {\r\n                    allHidden = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (allHidden) {\r\n                _this.plugin.managers.structure.hierarchy.toggleVisibility(_this.props.group, 'show');\r\n            }\r\n            _this.plugin.managers.camera.focusSpheres(_this.props.group, function (e) {\r\n                var _a;\r\n                if (e.cell.state.isHidden)\r\n                    return;\r\n                return (_a = e.cell.obj) === null || _a === void 0 ? void 0 : _a.data.boundary.sphere;\r\n            });\r\n        };\r\n        _this.updateLabel = function (v) {\r\n            _this.plugin.managers.structure.component.updateLabel(_this.pivot, v);\r\n        };\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StructureComponentGroup.prototype, \"pivot\", {\r\n        get: function () {\r\n            return this.props.group[0];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StructureComponentGroup.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.state.events.cell.stateUpdated, function (e) {\r\n            if (State.ObjectEvent.isCell(e, _this.pivot.cell))\r\n                _this.forceUpdate();\r\n        });\r\n    };\r\n    Object.defineProperty(StructureComponentGroup.prototype, \"colorByActions\", {\r\n        get: function () {\r\n            var _this = this;\r\n            var _a, _b;\r\n            var mng = this.plugin.managers.structure.component;\r\n            var repr = this.pivot.representations[0];\r\n            var name = (_a = repr.cell.transform.params) === null || _a === void 0 ? void 0 : _a.colorTheme.name;\r\n            var themes = getStructureThemeTypes(this.plugin, (_b = this.pivot.cell.obj) === null || _b === void 0 ? void 0 : _b.data);\r\n            return ActionMenu.createItemsFromSelectOptions(themes, {\r\n                value: function (o) { return function () { return mng.updateRepresentationsTheme(_this.props.group, { color: o[0] }); }; },\r\n                selected: function (o) { return o[0] === name; }\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StructureComponentGroup.prototype, \"actions\", {\r\n        get: function () {\r\n            var _this = this;\r\n            var mng = this.plugin.managers.structure.component;\r\n            var ret = [\r\n                __spreadArray([\r\n                    ActionMenu.Header('Add Representation')\r\n                ], StructureComponentManager.getRepresentationTypes(this.plugin, this.props.group[0])\r\n                    .map(function (t) { return ActionMenu.Item(t[1], function () { return mng.addRepresentation(_this.props.group, t[0]); }); }), true)\r\n            ];\r\n            if (this.pivot.representations.length > 0) {\r\n                ret.push(__spreadArray([\r\n                    ActionMenu.Header('Set Coloring', { isIndependent: true })\r\n                ], this.colorByActions, true));\r\n            }\r\n            if (mng.canBeModified(this.props.group[0])) {\r\n                ret.push([\r\n                    ActionMenu.Header('Modify by Selection'),\r\n                    ActionMenu.Item('Include', function () { return mng.modifyByCurrentSelection(_this.props.group, 'union'); }, { icon: UnionSvg }),\r\n                    ActionMenu.Item('Subtract', function () { return mng.modifyByCurrentSelection(_this.props.group, 'subtract'); }, { icon: SubtractSvg }),\r\n                    ActionMenu.Item('Intersect', function () { return mng.modifyByCurrentSelection(_this.props.group, 'intersect'); }, { icon: IntersectSvg })\r\n                ]);\r\n            }\r\n            ret.push(ActionMenu.Item('Select This', function () { return mng.selectThis(_this.props.group); }, { icon: SetSvg }));\r\n            if (mng.canBeModified(this.props.group[0])) {\r\n                ret.push(ActionMenu.Item('Edit Label', this.toggleLabel));\r\n            }\r\n            return ret;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StructureComponentGroup.prototype, \"reprLabel\", {\r\n        get: function () {\r\n            var _a;\r\n            // TODO: handle generic reprs.\r\n            var pivot = this.pivot;\r\n            if (pivot.representations.length === 0)\r\n                return 'No repr.';\r\n            if (pivot.representations.length === 1)\r\n                return (_a = pivot.representations[0].cell.obj) === null || _a === void 0 ? void 0 : _a.label;\r\n            return pivot.representations.length + \" reprs\";\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StructureComponentGroup.prototype.render = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var component = this.pivot;\r\n        var cell = component.cell;\r\n        var label = (_a = cell.obj) === null || _a === void 0 ? void 0 : _a.label;\r\n        var reprLabel = this.reprLabel;\r\n        return _jsxs(_Fragment, { children: [_jsxs(\"div\", __assign({ className: 'msp-flex-row' }, { children: [_jsxs(Button, __assign({ noOverflow: true, className: 'msp-control-button-label', title: label + \". Click to focus.\", onClick: this.focus, onMouseEnter: this.highlight, onMouseLeave: this.clearHighlight, style: { textAlign: 'left' } }, { children: [label, _jsx(\"small\", __assign({ className: 'msp-25-lower-contrast-text', style: { float: 'right' } }, { children: reprLabel }), void 0)] }), void 0), _jsx(IconButton, { svg: cell.state.isHidden ? VisibilityOffOutlinedSvg : VisibilityOutlinedSvg, toggleState: false, onClick: this.toggleVisible, title: (cell.state.isHidden ? 'Show' : 'Hide') + \" component\", small: true, className: 'msp-form-control', flex: true }, void 0), _jsx(IconButton, { svg: DeleteOutlinedSvg, toggleState: false, onClick: this.remove, title: 'Remove', small: true, className: 'msp-form-control', flex: true }, void 0), _jsx(IconButton, { svg: MoreHorizSvg, onClick: this.toggleAction, title: 'Actions', toggleState: this.state.action === 'action', className: 'msp-form-control', flex: true }, void 0)] }), void 0), this.state.action === 'label' && _jsx(\"div\", __assign({ className: 'msp-control-offset', style: { marginBottom: '6px' } }, { children: _jsx(ControlRow, { label: 'Label', control: _jsxs(\"div\", __assign({ style: { display: 'flex', textAlignLast: 'center' } }, { children: [_jsx(TextInput, { onChange: this.updateLabel, value: label, style: { flex: '1 1 auto', minWidth: 0 }, className: 'msp-form-control', blurOnEnter: true, blurOnEscape: true }, void 0), _jsx(IconButton, { svg: CheckSvg, onClick: this.toggleLabel, className: 'msp-form-control msp-control-button-label', flex: true }, void 0)] }), void 0) }, void 0) }), void 0), this.state.action === 'action' && _jsxs(\"div\", __assign({ className: 'msp-accent-offset' }, { children: [_jsx(\"div\", __assign({ style: { marginBottom: '6px' } }, { children: _jsx(ActionMenu, { items: this.actions, onSelect: this.selectAction, noOffset: true }, void 0) }), void 0), _jsx(\"div\", __assign({ style: { marginBottom: '6px' } }, { children: component.representations.map(function (r) { return _jsx(StructureRepresentationEntry, { group: _this.props.group, representation: r }, r.cell.transform.ref); }) }), void 0)] }), void 0)] }, void 0);\r\n    };\r\n    return StructureComponentGroup;\r\n}(PurePluginUIComponent));\r\nvar StructureRepresentationEntry = /** @class */ (function (_super) {\r\n    __extends(StructureRepresentationEntry, _super);\r\n    function StructureRepresentationEntry() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.remove = function () { return _this.plugin.managers.structure.component.removeRepresentations(_this.props.group, _this.props.representation); };\r\n        _this.toggleVisible = function (e) {\r\n            e.preventDefault();\r\n            e.currentTarget.blur();\r\n            _this.plugin.managers.structure.component.toggleVisibility(_this.props.group, _this.props.representation);\r\n        };\r\n        _this.update = function (params) { return _this.plugin.managers.structure.component.updateRepresentations(_this.props.group, _this.props.representation, params); };\r\n        return _this;\r\n    }\r\n    StructureRepresentationEntry.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        this.subscribe(this.plugin.state.events.cell.stateUpdated, function (e) {\r\n            if (State.ObjectEvent.isCell(e, _this.props.representation.cell))\r\n                _this.forceUpdate();\r\n        });\r\n    };\r\n    StructureRepresentationEntry.prototype.render = function () {\r\n        var _a;\r\n        var repr = this.props.representation.cell;\r\n        return _jsxs(\"div\", __assign({ className: 'msp-representation-entry' }, { children: [repr.parent && _jsx(ExpandGroup, __assign({ header: (((_a = repr.obj) === null || _a === void 0 ? void 0 : _a.label) || '') + \" Representation\", noOffset: true }, { children: _jsx(UpdateTransformControl, { state: repr.parent, transform: repr.transform, customHeader: 'none', customUpdate: this.update, noMargin: true }, void 0) }), void 0), _jsx(IconButton, { svg: DeleteOutlinedSvg, onClick: this.remove, title: 'Remove', small: true, className: 'msp-default-bg', toggleState: false, style: {\r\n                        position: 'absolute', top: 0, right: '32px', lineHeight: '24px', height: '24px', textAlign: 'right', width: '44px', paddingRight: '6px', background: 'none'\r\n                    } }, void 0), _jsx(IconButton, { svg: this.props.representation.cell.state.isHidden ? VisibilityOffOutlinedSvg : VisibilityOutlinedSvg, toggleState: false, onClick: this.toggleVisible, title: 'Toggle Visibility', small: true, className: 'msp-default-bg', style: {\r\n                        position: 'absolute', top: 0, right: 0, lineHeight: '24px', height: '24px', textAlign: 'right', width: '32px', paddingRight: '6px', background: 'none'\r\n                    } }, void 0)] }), void 0);\r\n    };\r\n    return StructureRepresentationEntry;\r\n}(PurePluginUIComponent));\r\n//# sourceMappingURL=components.js.map"]},"metadata":{},"sourceType":"module"}