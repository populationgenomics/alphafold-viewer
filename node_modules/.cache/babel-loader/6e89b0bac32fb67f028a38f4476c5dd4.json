{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\n\nimport * as React from 'react';\nimport { Button } from './controls/common';\nimport { Icon, ArrowRightSvg, ArrowDropDownSvg } from './controls/icons';\nexport var PluginReactContext = React.createContext(void 0);\n\nvar PluginUIComponent =\n/** @class */\nfunction (_super) {\n  __extends(PluginUIComponent, _super);\n\n  function PluginUIComponent(props, context) {\n    var _this = _super.call(this, props) || this;\n\n    _this.subs = void 0;\n    _this.plugin = context;\n    if (_this.init) _this.init();\n    return _this;\n  }\n\n  PluginUIComponent.prototype.subscribe = function (obs, action) {\n    if (typeof this.subs === 'undefined') this.subs = [];\n    this.subs.push(obs.subscribe(action));\n  };\n\n  PluginUIComponent.prototype.componentWillUnmount = function () {\n    if (!this.subs) return;\n\n    for (var _i = 0, _a = this.subs; _i < _a.length; _i++) {\n      var s = _a[_i];\n      s.unsubscribe();\n    }\n\n    this.subs = void 0;\n  };\n\n  PluginUIComponent.contextType = PluginReactContext;\n  return PluginUIComponent;\n}(React.Component);\n\nexport { PluginUIComponent };\n\nvar PurePluginUIComponent =\n/** @class */\nfunction (_super) {\n  __extends(PurePluginUIComponent, _super);\n\n  function PurePluginUIComponent(props, context) {\n    var _this = _super.call(this, props, context) || this;\n\n    _this.subs = void 0;\n    _this.plugin = context;\n    if (_this.init) _this.init();\n    return _this;\n  }\n\n  PurePluginUIComponent.prototype.subscribe = function (obs, action) {\n    if (typeof this.subs === 'undefined') this.subs = [];\n    this.subs.push(obs.subscribe(action));\n  };\n\n  PurePluginUIComponent.prototype.componentWillUnmount = function () {\n    if (!this.subs) return;\n\n    for (var _i = 0, _a = this.subs; _i < _a.length; _i++) {\n      var s = _a[_i];\n      s.unsubscribe();\n    }\n\n    this.subs = void 0;\n  };\n\n  PurePluginUIComponent.contextType = PluginReactContext;\n  return PurePluginUIComponent;\n}(React.PureComponent);\n\nexport { PurePluginUIComponent };\n\nvar CollapsableControls =\n/** @class */\nfunction (_super) {\n  __extends(CollapsableControls, _super);\n\n  function CollapsableControls(props, context) {\n    var _this = _super.call(this, props, context) || this;\n\n    _this.toggleCollapsed = function () {\n      _this.setState({\n        isCollapsed: !_this.state.isCollapsed\n      });\n    };\n\n    var state = _this.defaultState();\n\n    if (props.initiallyCollapsed !== undefined) state.isCollapsed = props.initiallyCollapsed;\n    if (props.header !== undefined) state.header = props.header;\n    _this.state = state;\n    return _this;\n  }\n\n  CollapsableControls.prototype.componentDidUpdate = function (prevProps) {\n    if (this.props.initiallyCollapsed !== undefined && prevProps.initiallyCollapsed !== this.props.initiallyCollapsed) {\n      this.setState({\n        isCollapsed: this.props.initiallyCollapsed\n      });\n    }\n  };\n\n  CollapsableControls.prototype.render = function () {\n    var _a;\n\n    if (this.state.isHidden) return null;\n    var wrapClass = this.state.isCollapsed ? 'msp-transform-wrapper msp-transform-wrapper-collapsed' : 'msp-transform-wrapper';\n    return _jsxs(\"div\", __assign({\n      className: wrapClass\n    }, {\n      children: [_jsx(\"div\", __assign({\n        className: 'msp-transform-header'\n      }, {\n        children: _jsxs(Button, __assign({\n          icon: this.state.brand ? void 0 : this.state.isCollapsed ? ArrowRightSvg : ArrowDropDownSvg,\n          noOverflow: true,\n          onClick: this.toggleCollapsed,\n          className: this.state.brand ? \"msp-transform-header-brand msp-transform-header-brand-\" + this.state.brand.accent : void 0,\n          title: \"Click to \" + (this.state.isCollapsed ? 'expand' : 'collapse')\n        }, {\n          children: [_jsx(Icon, {\n            svg: (_a = this.state.brand) === null || _a === void 0 ? void 0 : _a.svg,\n            inline: true\n          }, void 0), this.state.header, _jsx(\"small\", __assign({\n            style: {\n              margin: '0 6px'\n            }\n          }, {\n            children: this.state.isCollapsed ? '' : this.state.description\n          }), void 0)]\n        }), void 0)\n      }), void 0), !this.state.isCollapsed && this.renderControls()]\n    }), void 0);\n  };\n\n  return CollapsableControls;\n}(PluginUIComponent);\n\nexport { CollapsableControls };","map":{"version":3,"sources":["../../src/mol-plugin-ui/base.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\n/**\r\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport * as React from 'react';\r\nimport { Button } from './controls/common';\r\nimport { Icon, ArrowRightSvg, ArrowDropDownSvg } from './controls/icons';\r\nexport var PluginReactContext = React.createContext(void 0);\r\nvar PluginUIComponent = /** @class */ (function (_super) {\r\n    __extends(PluginUIComponent, _super);\r\n    function PluginUIComponent(props, context) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.subs = void 0;\r\n        _this.plugin = context;\r\n        if (_this.init)\r\n            _this.init();\r\n        return _this;\r\n    }\r\n    PluginUIComponent.prototype.subscribe = function (obs, action) {\r\n        if (typeof this.subs === 'undefined')\r\n            this.subs = [];\r\n        this.subs.push(obs.subscribe(action));\r\n    };\r\n    PluginUIComponent.prototype.componentWillUnmount = function () {\r\n        if (!this.subs)\r\n            return;\r\n        for (var _i = 0, _a = this.subs; _i < _a.length; _i++) {\r\n            var s = _a[_i];\r\n            s.unsubscribe();\r\n        }\r\n        this.subs = void 0;\r\n    };\r\n    PluginUIComponent.contextType = PluginReactContext;\r\n    return PluginUIComponent;\r\n}(React.Component));\r\nexport { PluginUIComponent };\r\nvar PurePluginUIComponent = /** @class */ (function (_super) {\r\n    __extends(PurePluginUIComponent, _super);\r\n    function PurePluginUIComponent(props, context) {\r\n        var _this = _super.call(this, props, context) || this;\r\n        _this.subs = void 0;\r\n        _this.plugin = context;\r\n        if (_this.init)\r\n            _this.init();\r\n        return _this;\r\n    }\r\n    PurePluginUIComponent.prototype.subscribe = function (obs, action) {\r\n        if (typeof this.subs === 'undefined')\r\n            this.subs = [];\r\n        this.subs.push(obs.subscribe(action));\r\n    };\r\n    PurePluginUIComponent.prototype.componentWillUnmount = function () {\r\n        if (!this.subs)\r\n            return;\r\n        for (var _i = 0, _a = this.subs; _i < _a.length; _i++) {\r\n            var s = _a[_i];\r\n            s.unsubscribe();\r\n        }\r\n        this.subs = void 0;\r\n    };\r\n    PurePluginUIComponent.contextType = PluginReactContext;\r\n    return PurePluginUIComponent;\r\n}(React.PureComponent));\r\nexport { PurePluginUIComponent };\r\nvar CollapsableControls = /** @class */ (function (_super) {\r\n    __extends(CollapsableControls, _super);\r\n    function CollapsableControls(props, context) {\r\n        var _this = _super.call(this, props, context) || this;\r\n        _this.toggleCollapsed = function () {\r\n            _this.setState({ isCollapsed: !_this.state.isCollapsed });\r\n        };\r\n        var state = _this.defaultState();\r\n        if (props.initiallyCollapsed !== undefined)\r\n            state.isCollapsed = props.initiallyCollapsed;\r\n        if (props.header !== undefined)\r\n            state.header = props.header;\r\n        _this.state = state;\r\n        return _this;\r\n    }\r\n    CollapsableControls.prototype.componentDidUpdate = function (prevProps) {\r\n        if (this.props.initiallyCollapsed !== undefined && prevProps.initiallyCollapsed !== this.props.initiallyCollapsed) {\r\n            this.setState({ isCollapsed: this.props.initiallyCollapsed });\r\n        }\r\n    };\r\n    CollapsableControls.prototype.render = function () {\r\n        var _a;\r\n        if (this.state.isHidden)\r\n            return null;\r\n        var wrapClass = this.state.isCollapsed\r\n            ? 'msp-transform-wrapper msp-transform-wrapper-collapsed'\r\n            : 'msp-transform-wrapper';\r\n        return _jsxs(\"div\", __assign({ className: wrapClass }, { children: [_jsx(\"div\", __assign({ className: 'msp-transform-header' }, { children: _jsxs(Button, __assign({ icon: this.state.brand ? void 0 : this.state.isCollapsed ? ArrowRightSvg : ArrowDropDownSvg, noOverflow: true, onClick: this.toggleCollapsed, className: this.state.brand ? \"msp-transform-header-brand msp-transform-header-brand-\" + this.state.brand.accent : void 0, title: \"Click to \" + (this.state.isCollapsed ? 'expand' : 'collapse') }, { children: [_jsx(Icon, { svg: (_a = this.state.brand) === null || _a === void 0 ? void 0 : _a.svg, inline: true }, void 0), this.state.header, _jsx(\"small\", __assign({ style: { margin: '0 6px' } }, { children: this.state.isCollapsed ? '' : this.state.description }), void 0)] }), void 0) }), void 0), !this.state.isCollapsed && this.renderControls()] }), void 0);\r\n    };\r\n    return CollapsableControls;\r\n}(PluginUIComponent));\r\nexport { CollapsableControls };\r\n//# sourceMappingURL=base.js.map"]},"metadata":{},"sourceType":"module"}