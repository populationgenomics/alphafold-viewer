{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\r\n * Copyright (c) 2020-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\n\nimport * as React from 'react';\nimport { PluginUIComponent } from '../base';\n\nvar ViewportCanvas =\n/** @class */\nfunction (_super) {\n  __extends(ViewportCanvas, _super);\n\n  function ViewportCanvas() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.container = React.createRef();\n    _this.canvas = React.createRef();\n    _this.state = {\n      noWebGl: false,\n      showLogo: true\n    };\n\n    _this.handleLogo = function () {\n      var _a;\n\n      _this.setState({\n        showLogo: !((_a = _this.plugin.canvas3d) === null || _a === void 0 ? void 0 : _a.reprCount.value)\n      });\n    };\n\n    return _this;\n  }\n\n  ViewportCanvas.prototype.componentDidMount = function () {\n    if (!this.canvas.current || !this.container.current || !this.plugin.initViewer(this.canvas.current, this.container.current)) {\n      this.setState({\n        noWebGl: true\n      });\n      return;\n    }\n\n    this.handleLogo();\n    this.subscribe(this.plugin.canvas3d.reprCount, this.handleLogo);\n  };\n\n  ViewportCanvas.prototype.componentWillUnmount = function () {\n    _super.prototype.componentWillUnmount.call(this); // TODO viewer cleanup\n\n  };\n\n  ViewportCanvas.prototype.renderMissing = function () {\n    if (this.props.noWebGl) {\n      var C = this.props.noWebGl;\n      return _jsx(C, {}, void 0);\n    }\n\n    return _jsx(\"div\", __assign({\n      className: 'msp-no-webgl'\n    }, {\n      children: _jsxs(\"div\", {\n        children: [_jsx(\"p\", {\n          children: _jsx(\"b\", {\n            children: \"WebGL does not seem to be available.\"\n          }, void 0)\n        }, void 0), _jsx(\"p\", {\n          children: \"This can be caused by an outdated browser, graphics card driver issue, or bad weather. Sometimes, just restarting the browser helps.\"\n        }, void 0), _jsxs(\"p\", {\n          children: [\"For a list of supported browsers, refer to \", _jsx(\"a\", __assign({\n            href: 'http://caniuse.com/#feat=webgl',\n            target: '_blank'\n          }, {\n            children: \"http://caniuse.com/#feat=webgl\"\n          }), void 0), \".\"]\n        }, void 0)]\n      }, void 0)\n    }), void 0);\n  };\n\n  ViewportCanvas.prototype.render = function () {\n    if (this.state.noWebGl) return this.renderMissing();\n    var Logo = this.props.logo;\n    return _jsxs(\"div\", __assign({\n      className: this.props.parentClassName || 'msp-viewport',\n      style: this.props.parentStyle\n    }, {\n      children: [_jsx(\"div\", __assign({\n        className: this.props.hostClassName || 'msp-viewport-host3d',\n        style: this.props.hostStyle,\n        ref: this.container\n      }, {\n        children: _jsx(\"canvas\", {\n          ref: this.canvas\n        }, void 0)\n      }), void 0), this.state.showLogo && Logo && _jsx(Logo, {}, void 0)]\n    }), void 0);\n  };\n\n  return ViewportCanvas;\n}(PluginUIComponent);\n\nexport { ViewportCanvas };","map":{"version":3,"sources":["../../../src/mol-plugin-ui/viewport/canvas.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\n/**\r\n * Copyright (c) 2020-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport * as React from 'react';\r\nimport { PluginUIComponent } from '../base';\r\nvar ViewportCanvas = /** @class */ (function (_super) {\r\n    __extends(ViewportCanvas, _super);\r\n    function ViewportCanvas() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.container = React.createRef();\r\n        _this.canvas = React.createRef();\r\n        _this.state = {\r\n            noWebGl: false,\r\n            showLogo: true\r\n        };\r\n        _this.handleLogo = function () {\r\n            var _a;\r\n            _this.setState({ showLogo: !((_a = _this.plugin.canvas3d) === null || _a === void 0 ? void 0 : _a.reprCount.value) });\r\n        };\r\n        return _this;\r\n    }\r\n    ViewportCanvas.prototype.componentDidMount = function () {\r\n        if (!this.canvas.current || !this.container.current || !this.plugin.initViewer(this.canvas.current, this.container.current)) {\r\n            this.setState({ noWebGl: true });\r\n            return;\r\n        }\r\n        this.handleLogo();\r\n        this.subscribe(this.plugin.canvas3d.reprCount, this.handleLogo);\r\n    };\r\n    ViewportCanvas.prototype.componentWillUnmount = function () {\r\n        _super.prototype.componentWillUnmount.call(this);\r\n        // TODO viewer cleanup\r\n    };\r\n    ViewportCanvas.prototype.renderMissing = function () {\r\n        if (this.props.noWebGl) {\r\n            var C = this.props.noWebGl;\r\n            return _jsx(C, {}, void 0);\r\n        }\r\n        return _jsx(\"div\", __assign({ className: 'msp-no-webgl' }, { children: _jsxs(\"div\", { children: [_jsx(\"p\", { children: _jsx(\"b\", { children: \"WebGL does not seem to be available.\" }, void 0) }, void 0), _jsx(\"p\", { children: \"This can be caused by an outdated browser, graphics card driver issue, or bad weather. Sometimes, just restarting the browser helps.\" }, void 0), _jsxs(\"p\", { children: [\"For a list of supported browsers, refer to \", _jsx(\"a\", __assign({ href: 'http://caniuse.com/#feat=webgl', target: '_blank' }, { children: \"http://caniuse.com/#feat=webgl\" }), void 0), \".\"] }, void 0)] }, void 0) }), void 0);\r\n    };\r\n    ViewportCanvas.prototype.render = function () {\r\n        if (this.state.noWebGl)\r\n            return this.renderMissing();\r\n        var Logo = this.props.logo;\r\n        return _jsxs(\"div\", __assign({ className: this.props.parentClassName || 'msp-viewport', style: this.props.parentStyle }, { children: [_jsx(\"div\", __assign({ className: this.props.hostClassName || 'msp-viewport-host3d', style: this.props.hostStyle, ref: this.container }, { children: _jsx(\"canvas\", { ref: this.canvas }, void 0) }), void 0), (this.state.showLogo && Logo) && _jsx(Logo, {}, void 0)] }), void 0);\r\n    };\r\n    return ViewportCanvas;\r\n}(PluginUIComponent));\r\nexport { ViewportCanvas };\r\n//# sourceMappingURL=canvas.js.map"]},"metadata":{},"sourceType":"module"}