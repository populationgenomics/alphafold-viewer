{"ast":null,"code":"/**\r\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\nimport { ButtonsType, ModifiersKeys } from './input/input-observer';\nimport { interpolate, stringToWords } from './string';\nexport { Binding };\n\nfunction Binding(triggers, action, description) {\n  if (action === void 0) {\n    action = '';\n  }\n\n  if (description === void 0) {\n    description = '';\n  }\n\n  return Binding.create(triggers, action, description);\n}\n\n(function (Binding) {\n  function create(triggers, action, description) {\n    if (action === void 0) {\n      action = '';\n    }\n\n    if (description === void 0) {\n      description = '';\n    }\n\n    return {\n      triggers: triggers,\n      action: action,\n      description: description\n    };\n  }\n\n  Binding.create = create;\n  Binding.Empty = {\n    triggers: [],\n    action: '',\n    description: ''\n  };\n\n  function isEmpty(binding) {\n    return binding.triggers.length === 0 || binding.triggers.every(function (t) {\n      return t.buttons === undefined && t.modifiers === undefined;\n    });\n  }\n\n  Binding.isEmpty = isEmpty;\n\n  function match(binding, buttons, modifiers) {\n    return binding.triggers.some(function (t) {\n      return Trigger.match(t, buttons, modifiers);\n    });\n  }\n\n  Binding.match = match;\n\n  function formatTriggers(binding) {\n    return binding.triggers.map(Trigger.format).join(' or ');\n  }\n\n  Binding.formatTriggers = formatTriggers;\n\n  function format(binding, name) {\n    if (name === void 0) {\n      name = '';\n    }\n\n    var help = binding.description || stringToWords(name);\n    return interpolate(help, {\n      triggers: '<i>' + formatTriggers(binding) + '</i>'\n    });\n  }\n\n  Binding.format = format;\n\n  function Trigger(buttons, modifiers) {\n    return Trigger.create(buttons, modifiers);\n  }\n\n  Binding.Trigger = Trigger;\n\n  (function (Trigger) {\n    function create(buttons, modifiers) {\n      return {\n        buttons: buttons,\n        modifiers: modifiers\n      };\n    }\n\n    Trigger.create = create;\n    Trigger.Empty = {};\n\n    function match(trigger, buttons, modifiers) {\n      var b = trigger.buttons,\n          m = trigger.modifiers;\n      return b !== undefined && (b === buttons || ButtonsType.has(b, buttons)) && (!m || ModifiersKeys.areEqual(m, modifiers));\n    }\n\n    Trigger.match = match;\n\n    function format(trigger) {\n      var s = [];\n      var b = formatButtons(trigger.buttons);\n      if (b) s.push(b);\n      var m = formatModifiers(trigger.modifiers);\n      if (m) s.push(m);\n      return s.join(' + ');\n    }\n\n    Trigger.format = format;\n  })(Trigger = Binding.Trigger || (Binding.Trigger = {}));\n})(Binding || (Binding = {}));\n\nvar B = ButtonsType;\n\nfunction formatButtons(buttons) {\n  var s = [];\n\n  if (buttons === undefined) {\n    s.push('any mouse button');\n  } else if (buttons === 0) {\n    s.push('mouse hover');\n  } else {\n    if (B.has(buttons, 1\n    /* Primary */\n    )) s.push('left mouse button');\n    if (B.has(buttons, 2\n    /* Secondary */\n    )) s.push('right mouse button');\n    if (B.has(buttons, 4\n    /* Auxilary */\n    )) s.push('wheel/middle mouse button');\n    if (B.has(buttons, 8\n    /* Forth */\n    )) s.push('three fingers');\n  }\n\n  return s.join(' + ');\n}\n\nfunction formatModifiers(modifiers, verbose) {\n  var s = [];\n\n  if (modifiers) {\n    if (modifiers.alt) s.push('alt key');\n    if (modifiers.control) s.push('control key');\n    if (modifiers.meta) s.push('meta/command key');\n    if (modifiers.shift) s.push('shift key');\n    if (verbose && s.length === 0) s.push('no key');\n  } else {\n    if (verbose) s.push('any key');\n  }\n\n  return s.join(' + ');\n}","map":{"version":3,"sources":["../../src/mol-util/binding.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { ButtonsType, ModifiersKeys } from './input/input-observer';\r\nimport { interpolate, stringToWords } from './string';\r\nexport { Binding };\r\nfunction Binding(triggers, action, description) {\r\n    if (action === void 0) { action = ''; }\r\n    if (description === void 0) { description = ''; }\r\n    return Binding.create(triggers, action, description);\r\n}\r\n(function (Binding) {\r\n    function create(triggers, action, description) {\r\n        if (action === void 0) { action = ''; }\r\n        if (description === void 0) { description = ''; }\r\n        return { triggers: triggers, action: action, description: description };\r\n    }\r\n    Binding.create = create;\r\n    Binding.Empty = { triggers: [], action: '', description: '' };\r\n    function isEmpty(binding) {\r\n        return binding.triggers.length === 0 ||\r\n            binding.triggers.every(function (t) { return t.buttons === undefined && t.modifiers === undefined; });\r\n    }\r\n    Binding.isEmpty = isEmpty;\r\n    function match(binding, buttons, modifiers) {\r\n        return binding.triggers.some(function (t) { return Trigger.match(t, buttons, modifiers); });\r\n    }\r\n    Binding.match = match;\r\n    function formatTriggers(binding) {\r\n        return binding.triggers.map(Trigger.format).join(' or ');\r\n    }\r\n    Binding.formatTriggers = formatTriggers;\r\n    function format(binding, name) {\r\n        if (name === void 0) { name = ''; }\r\n        var help = binding.description || stringToWords(name);\r\n        return interpolate(help, { triggers: '<i>' + formatTriggers(binding) + '</i>' });\r\n    }\r\n    Binding.format = format;\r\n    function Trigger(buttons, modifiers) {\r\n        return Trigger.create(buttons, modifiers);\r\n    }\r\n    Binding.Trigger = Trigger;\r\n    (function (Trigger) {\r\n        function create(buttons, modifiers) {\r\n            return { buttons: buttons, modifiers: modifiers };\r\n        }\r\n        Trigger.create = create;\r\n        Trigger.Empty = {};\r\n        function match(trigger, buttons, modifiers) {\r\n            var b = trigger.buttons, m = trigger.modifiers;\r\n            return b !== undefined &&\r\n                (b === buttons || ButtonsType.has(b, buttons)) &&\r\n                (!m || ModifiersKeys.areEqual(m, modifiers));\r\n        }\r\n        Trigger.match = match;\r\n        function format(trigger) {\r\n            var s = [];\r\n            var b = formatButtons(trigger.buttons);\r\n            if (b)\r\n                s.push(b);\r\n            var m = formatModifiers(trigger.modifiers);\r\n            if (m)\r\n                s.push(m);\r\n            return s.join(' + ');\r\n        }\r\n        Trigger.format = format;\r\n    })(Trigger = Binding.Trigger || (Binding.Trigger = {}));\r\n})(Binding || (Binding = {}));\r\nvar B = ButtonsType;\r\nfunction formatButtons(buttons) {\r\n    var s = [];\r\n    if (buttons === undefined) {\r\n        s.push('any mouse button');\r\n    }\r\n    else if (buttons === 0) {\r\n        s.push('mouse hover');\r\n    }\r\n    else {\r\n        if (B.has(buttons, 1 /* Primary */))\r\n            s.push('left mouse button');\r\n        if (B.has(buttons, 2 /* Secondary */))\r\n            s.push('right mouse button');\r\n        if (B.has(buttons, 4 /* Auxilary */))\r\n            s.push('wheel/middle mouse button');\r\n        if (B.has(buttons, 8 /* Forth */))\r\n            s.push('three fingers');\r\n    }\r\n    return s.join(' + ');\r\n}\r\nfunction formatModifiers(modifiers, verbose) {\r\n    var s = [];\r\n    if (modifiers) {\r\n        if (modifiers.alt)\r\n            s.push('alt key');\r\n        if (modifiers.control)\r\n            s.push('control key');\r\n        if (modifiers.meta)\r\n            s.push('meta/command key');\r\n        if (modifiers.shift)\r\n            s.push('shift key');\r\n        if (verbose && s.length === 0)\r\n            s.push('no key');\r\n    }\r\n    else {\r\n        if (verbose)\r\n            s.push('any key');\r\n    }\r\n    return s.join(' + ');\r\n}\r\n//# sourceMappingURL=binding.js.map"]},"metadata":{},"sourceType":"module"}