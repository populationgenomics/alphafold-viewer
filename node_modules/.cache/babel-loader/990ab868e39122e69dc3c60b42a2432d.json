{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/Documents/Projects/AlphaFoldVisualisation/alphafold-viewer/src/viewer.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from \"react\";\nimport { createPlugin } from \"molstar/lib/mol-plugin-ui/index\";\nimport \"molstar/build/viewer/molstar.css\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Viewer(props) {\n  _s();\n\n  const parent = useRef(null);\n  const plugin = React.useRef();\n  useEffect(() => {\n    var _plugin$current, _plugin$current2;\n\n    console.log(\"Here\");\n    (_plugin$current = plugin.current) === null || _plugin$current === void 0 ? void 0 : _plugin$current.clear();\n    (_plugin$current2 = plugin.current) === null || _plugin$current2 === void 0 ? void 0 : _plugin$current2.dispose();\n    plugin.current = undefined;\n  }, [props.url]);\n  useEffect(() => {\n    console.log(\"there\"); // let plugin: PluginContext | undefined = undefined;\n\n    async function init() {\n      plugin.current = createPlugin(parent.current);\n      const data = await plugin.current.builders.data.download({\n        url: props.url\n      }, {\n        state: {\n          isGhost: true\n        }\n      });\n      const trajectory = await plugin.current.builders.structure.parseTrajectory(data, \"mmcif\");\n      await plugin.current.builders.structure.hierarchy.applyPreset(trajectory, \"default\");\n    }\n\n    init(); // return () => {\n    //     plugin.current?.dispose();\n    //     plugin.current = undefined;\n    // };\n  }, [props.url]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: parent,\n    style: {\n      position: \"absolute\",\n      height: 800,\n      width: 1500,\n      left: props.left,\n      top: props.top\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Viewer, \"Jmc9ctBSfU5Xhdq1Ew42P1FmAXk=\");\n\n_c = Viewer;\nViewer.propTypes = {\n  left: PropTypes.number.isRequired,\n  top: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired\n};\nexport default Viewer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Viewer\");","map":{"version":3,"sources":["/Users/daniel/Documents/Projects/AlphaFoldVisualisation/alphafold-viewer/src/viewer.tsx"],"names":["React","useEffect","useRef","createPlugin","PropTypes","Viewer","props","parent","plugin","console","log","current","clear","dispose","undefined","url","init","data","builders","download","state","isGhost","trajectory","structure","parseTrajectory","hierarchy","applyPreset","position","height","width","left","top","propTypes","number","isRequired","string"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AAEA,SAASC,YAAT,QAA6B,iCAA7B;AACA,OAAO,kCAAP;AACA,OAAOC,SAAP,MAAsB,YAAtB;;;AAEA,SAASC,MAAT,CAAgBC,KAAhB,EAAmE;AAAA;;AAC/D,QAAMC,MAAM,GAAGL,MAAM,CAAiB,IAAjB,CAArB;AACA,QAAMM,MAAM,GAAGR,KAAK,CAACE,MAAN,EAAf;AAEAD,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACZQ,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,uBAAAF,MAAM,CAACG,OAAP,oEAAgBC,KAAhB;AACA,wBAAAJ,MAAM,CAACG,OAAP,sEAAgBE,OAAhB;AACAL,IAAAA,MAAM,CAACG,OAAP,GAAiBG,SAAjB;AACH,GALQ,EAKN,CAACR,KAAK,CAACS,GAAP,CALM,CAAT;AAOAd,EAAAA,SAAS,CAAC,MAAM;AACZQ,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EADY,CAEZ;;AACA,mBAAeM,IAAf,GAAsB;AAClBR,MAAAA,MAAM,CAACG,OAAP,GAAiBR,YAAY,CAACI,MAAM,CAACI,OAAR,CAA7B;AACA,YAAMM,IAAI,GAAG,MAAMT,MAAM,CAACG,OAAP,CAAeO,QAAf,CAAwBD,IAAxB,CAA6BE,QAA7B,CACf;AAAEJ,QAAAA,GAAG,EAAET,KAAK,CAACS;AAAb,OADe,EAEf;AAAEK,QAAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX;AAAT,OAFe,CAAnB;AAIA,YAAMC,UAAU,GACZ,MAAMd,MAAM,CAACG,OAAP,CAAeO,QAAf,CAAwBK,SAAxB,CAAkCC,eAAlC,CACFP,IADE,EAEF,OAFE,CADV;AAKA,YAAMT,MAAM,CAACG,OAAP,CAAeO,QAAf,CAAwBK,SAAxB,CAAkCE,SAAlC,CAA4CC,WAA5C,CACFJ,UADE,EAEF,SAFE,CAAN;AAIH;;AACDN,IAAAA,IAAI,GAnBQ,CAqBZ;AACA;AACA;AACA;AACH,GAzBQ,EAyBN,CAACV,KAAK,CAACS,GAAP,CAzBM,CAAT;AA2BA,sBACI;AACI,IAAA,GAAG,EAAER,MADT;AAEI,IAAA,KAAK,EAAE;AACHoB,MAAAA,QAAQ,EAAE,UADP;AAEHC,MAAAA,MAAM,EAAE,GAFL;AAGHC,MAAAA,KAAK,EAAE,IAHJ;AAIHC,MAAAA,IAAI,EAAExB,KAAK,CAACwB,IAJT;AAKHC,MAAAA,GAAG,EAAEzB,KAAK,CAACyB;AALR;AAFX;AAAA;AAAA;AAAA;AAAA,UADJ;AAYH;;GAlDQ1B,M;;KAAAA,M;AAoDTA,MAAM,CAAC2B,SAAP,GAAmB;AACfF,EAAAA,IAAI,EAAE1B,SAAS,CAAC6B,MAAV,CAAiBC,UADR;AAEfH,EAAAA,GAAG,EAAE3B,SAAS,CAAC6B,MAAV,CAAiBC,UAFP;AAGfnB,EAAAA,GAAG,EAAEX,SAAS,CAAC+B,MAAV,CAAiBD;AAHP,CAAnB;AAMA,eAAe7B,MAAf","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { PluginContext } from \"molstar/lib/mol-plugin/context\";\nimport { createPlugin } from \"molstar/lib/mol-plugin-ui/index\";\nimport \"molstar/build/viewer/molstar.css\";\nimport PropTypes from \"prop-types\";\n\nfunction Viewer(props: { left: number; top: number; url: string }) {\n    const parent = useRef<HTMLDivElement>(null);\n    const plugin = React.useRef<PluginContext | null>();\n\n    useEffect(() => {\n        console.log(\"Here\");\n        plugin.current?.clear();\n        plugin.current?.dispose();\n        plugin.current = undefined;\n    }, [props.url]);\n\n    useEffect(() => {\n        console.log(\"there\");\n        // let plugin: PluginContext | undefined = undefined;\n        async function init() {\n            plugin.current = createPlugin(parent.current!);\n            const data = await plugin.current.builders.data.download(\n                { url: props.url },\n                { state: { isGhost: true } }\n            );\n            const trajectory =\n                await plugin.current.builders.structure.parseTrajectory(\n                    data,\n                    \"mmcif\"\n                );\n            await plugin.current.builders.structure.hierarchy.applyPreset(\n                trajectory,\n                \"default\"\n            );\n        }\n        init();\n\n        // return () => {\n        //     plugin.current?.dispose();\n        //     plugin.current = undefined;\n        // };\n    }, [props.url]);\n\n    return (\n        <div\n            ref={parent}\n            style={{\n                position: \"absolute\",\n                height: 800,\n                width: 1500,\n                left: props.left,\n                top: props.top,\n            }}\n        />\n    );\n}\n\nViewer.propTypes = {\n    left: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    url: PropTypes.string.isRequired,\n};\n\nexport default Viewer;\n"]},"metadata":{},"sourceType":"module"}