{"ast":null,"code":"/**\r\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n *\r\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\r\n * MIT License, Copyright (c) 2018 Photopea\r\n */\nexport function toUint32(x) {\n  return x >>> 0;\n}\nexport function toInt32(x) {\n  return x >> 0;\n}\nexport function readUshort(buff, p) {\n  return buff[p] | buff[p + 1] << 8;\n}\nexport function writeUshort(buff, p, n) {\n  buff[p] = n & 255;\n  buff[p + 1] = n >> 8 & 255;\n}\nexport function readUint(buff, p) {\n  return buff[p + 3] * (256 * 256 * 256) + (buff[p + 2] << 16 | buff[p + 1] << 8 | buff[p]);\n}\nexport function writeUint(buff, p, n) {\n  buff[p] = n & 255;\n  buff[p + 1] = n >> 8 & 255;\n  buff[p + 2] = n >> 16 & 255;\n  buff[p + 3] = n >> 24 & 255;\n}\n\nfunction readASCII(buff, p, l) {\n  var s = '';\n\n  for (var i = 0; i < l; i++) s += String.fromCharCode(buff[p + i]);\n\n  return s;\n} // function writeASCII(data: Uint8Array, p: number, s: string){\n//     for(let i=0; i<s.length; i++) data[p+i] = s.charCodeAt(i);\n// }\n\n\nfunction pad(n) {\n  return n.length < 2 ? '0' + n : n;\n}\n\nexport function readUTF8(buff, p, l) {\n  var s = '',\n      ns;\n\n  for (var i = 0; i < l; i++) s += '%' + pad(buff[p + i].toString(16));\n\n  try {\n    ns = decodeURIComponent(s);\n  } catch (e) {\n    return readASCII(buff, p, l);\n  }\n\n  return ns;\n}\nexport function writeUTF8(buff, p, str) {\n  var strl = str.length;\n  var i = 0;\n\n  for (var ci = 0; ci < strl; ci++) {\n    var code = str.charCodeAt(ci);\n\n    if ((code & 0xffffffff - (1 << 7) + 1) === 0) {\n      buff[p + i] = code;\n      i++;\n    } else if ((code & 0xffffffff - (1 << 11) + 1) === 0) {\n      buff[p + i] = 192 | code >> 6;\n      buff[p + i + 1] = 128 | code >> 0 & 63;\n      i += 2;\n    } else if ((code & 0xffffffff - (1 << 16) + 1) === 0) {\n      buff[p + i] = 224 | code >> 12;\n      buff[p + i + 1] = 128 | code >> 6 & 63;\n      buff[p + i + 2] = 128 | code >> 0 & 63;\n      i += 3;\n    } else if ((code & 0xffffffff - (1 << 21) + 1) === 0) {\n      buff[p + i] = 240 | code >> 18;\n      buff[p + i + 1] = 128 | code >> 12 & 63;\n      buff[p + i + 2] = 128 | code >> 6 & 63;\n      buff[p + i + 3] = 128 | code >> 0 & 63;\n      i += 4;\n    } else throw new Error('e');\n  }\n\n  return i;\n}\nexport function sizeUTF8(str) {\n  var strl = str.length;\n  var i = 0;\n\n  for (var ci = 0; ci < strl; ci++) {\n    var code = str.charCodeAt(ci);\n\n    if ((code & 0xffffffff - (1 << 7) + 1) === 0) {\n      i++;\n    } else if ((code & 0xffffffff - (1 << 11) + 1) === 0) {\n      i += 2;\n    } else if ((code & 0xffffffff - (1 << 16) + 1) === 0) {\n      i += 3;\n    } else if ((code & 0xffffffff - (1 << 21) + 1) === 0) {\n      i += 4;\n    } else {\n      throw new Error('e');\n    }\n  }\n\n  return i;\n}","map":{"version":3,"sources":["../../../src/mol-util/zip/bin.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\r\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\r\n *\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n *\r\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\r\n * MIT License, Copyright (c) 2018 Photopea\r\n */\r\nexport function toUint32(x) {\r\n    return x >>> 0;\r\n}\r\nexport function toInt32(x) {\r\n    return x >> 0;\r\n}\r\nexport function readUshort(buff, p) {\r\n    return (buff[p]) | (buff[p + 1] << 8);\r\n}\r\nexport function writeUshort(buff, p, n) {\r\n    buff[p] = (n) & 255;\r\n    buff[p + 1] = (n >> 8) & 255;\r\n}\r\nexport function readUint(buff, p) {\r\n    return (buff[p + 3] * (256 * 256 * 256)) + ((buff[p + 2] << 16) | (buff[p + 1] << 8) | buff[p]);\r\n}\r\nexport function writeUint(buff, p, n) {\r\n    buff[p] = n & 255;\r\n    buff[p + 1] = (n >> 8) & 255;\r\n    buff[p + 2] = (n >> 16) & 255;\r\n    buff[p + 3] = (n >> 24) & 255;\r\n}\r\nfunction readASCII(buff, p, l) {\r\n    var s = '';\r\n    for (var i = 0; i < l; i++)\r\n        s += String.fromCharCode(buff[p + i]);\r\n    return s;\r\n}\r\n// function writeASCII(data: Uint8Array, p: number, s: string){\r\n//     for(let i=0; i<s.length; i++) data[p+i] = s.charCodeAt(i);\r\n// }\r\nfunction pad(n) {\r\n    return n.length < 2 ? '0' + n : n;\r\n}\r\nexport function readUTF8(buff, p, l) {\r\n    var s = '', ns;\r\n    for (var i = 0; i < l; i++)\r\n        s += '%' + pad(buff[p + i].toString(16));\r\n    try {\r\n        ns = decodeURIComponent(s);\r\n    }\r\n    catch (e) {\r\n        return readASCII(buff, p, l);\r\n    }\r\n    return ns;\r\n}\r\nexport function writeUTF8(buff, p, str) {\r\n    var strl = str.length;\r\n    var i = 0;\r\n    for (var ci = 0; ci < strl; ci++) {\r\n        var code = str.charCodeAt(ci);\r\n        if ((code & (0xffffffff - (1 << 7) + 1)) === 0) {\r\n            buff[p + i] = (code);\r\n            i++;\r\n        }\r\n        else if ((code & (0xffffffff - (1 << 11) + 1)) === 0) {\r\n            buff[p + i] = (192 | (code >> 6));\r\n            buff[p + i + 1] = (128 | ((code >> 0) & 63));\r\n            i += 2;\r\n        }\r\n        else if ((code & (0xffffffff - (1 << 16) + 1)) === 0) {\r\n            buff[p + i] = (224 | (code >> 12));\r\n            buff[p + i + 1] = (128 | ((code >> 6) & 63));\r\n            buff[p + i + 2] = (128 | ((code >> 0) & 63));\r\n            i += 3;\r\n        }\r\n        else if ((code & (0xffffffff - (1 << 21) + 1)) === 0) {\r\n            buff[p + i] = (240 | (code >> 18));\r\n            buff[p + i + 1] = (128 | ((code >> 12) & 63));\r\n            buff[p + i + 2] = (128 | ((code >> 6) & 63));\r\n            buff[p + i + 3] = (128 | ((code >> 0) & 63));\r\n            i += 4;\r\n        }\r\n        else\r\n            throw new Error('e');\r\n    }\r\n    return i;\r\n}\r\nexport function sizeUTF8(str) {\r\n    var strl = str.length;\r\n    var i = 0;\r\n    for (var ci = 0; ci < strl; ci++) {\r\n        var code = str.charCodeAt(ci);\r\n        if ((code & (0xffffffff - (1 << 7) + 1)) === 0) {\r\n            i++;\r\n        }\r\n        else if ((code & (0xffffffff - (1 << 11) + 1)) === 0) {\r\n            i += 2;\r\n        }\r\n        else if ((code & (0xffffffff - (1 << 16) + 1)) === 0) {\r\n            i += 3;\r\n        }\r\n        else if ((code & (0xffffffff - (1 << 21) + 1)) === 0) {\r\n            i += 4;\r\n        }\r\n        else {\r\n            throw new Error('e');\r\n        }\r\n    }\r\n    return i;\r\n}\r\n//# sourceMappingURL=bin.js.map"]},"metadata":{},"sourceType":"module"}